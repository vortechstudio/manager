import{r as O,R as a}from"./react-5c625ba7.js";import{K as se,F as en,g as _a}from"./konva-3dc0d119.js";import{S as Ra,L as Yn,I as cn,R as Fa,E as Da,a as Ss,T as Is,b as Ps,A as Cs,G as js,c as La,u as Ts}from"./react-konva-9834f442.js";import{_ as f,d as z,l as Ma,a as be,b as de,c as ve,e as tn}from"./@babel-6f304d66.js";import{u as xs,C as Z,F as Pe,L as ce,B as ks,S as As,I as Ba,a as Ns,b as _s,c as Rs,P as Fs,E as Ds,d as De,M as Rt,A as Ls,e as Ms,f as Bs,g as Ft,h as $s,i as Ws,j as zs,R as Xs,k as Hs,l as ze,m as Gs,n as Ks,o as Ys,p as Us,q as qs,r as Vs,T as Zs,s as $a,t as Qs,v as Js,w as Wa,x as za,y as Xa,z as ec,D as Ha,G as tc,H as nc,J as rc,K as oc,N as ic,O as ac,Q as lc,U as sc,V as oo,W as Ga,X as cc,Y as uc,Z as dc,_ as pc,$ as fc,a0 as Ka,a1 as mc,a2 as gc,a3 as hc,a4 as vc,a5 as yc,a6 as Oc,a7 as bc,a8 as wc,a9 as Ec,aa as Sc,ab as Ic,ac as Ya,ad as Pc,ae as Cc,af as Ua,ag as jc,ah as Tc,ai as xc,aj as kc,ak as Ac,al as Nc,am as _c,an as Rc,ao as Fc,ap as Dc,aq as Lc,ar as Mc,as as Bc,at as $c,au as Wc,av as qa,aw as zc,ax as Xc,ay as Hc,az as Gc,aA as Kc,aB as Yc,aC as Uc,aD as qc,aE as Vc,aF as Zc,aG as Qc,aH as Jc,aI as eu,aJ as tu}from"./@scaleflex-a7ac8e36.js";import{s as A,A as Ge,W as nu,$ as Va}from"./styled-components-a5d1e7ae.js";import{P as Se}from"./prop-types-6bb36580.js";var Ln=function(e,t,n,r){return Math.min(e/n,t/r)||1},nn="FIE_root",ru="FIE_design-layer",Za="FIE_transformers-layer",Qa="FIE_original-image",Ja="FIE_nodes-transformer",Xe="watermark",Mn="353297d2-40b4-4684-a875-45a2178a8157",el=.92,ne={FINETUNE:"Finetune",FILTERS:"Filters",ADJUST:"Adjust",WATERMARK:"Watermark",ANNOTATE:"Annotate",RESIZE:"Resize"},b={CROP:"Crop",ROTATE:"Rotate",FLIP_X:"Flip_X",FLIP_Y:"Flip_Y",BRIGHTNESS:"Brightness",CONTRAST:"Contrast",HSV:"HueSaturationValue",WARMTH:"Warmth",BLUR:"Blur",THRESHOLD:"Threshold",POSTERIZE:"Posterize",PIXELATE:"Pixelate",NOISE:"Noise",FILTERS:"Filters",RECT:"Rect",ELLIPSE:"Ellipse",POLYGON:"Polygon",TEXT:"Text",LINE:"Line",IMAGE:"Image",ARROW:"Arrow",WATERMARK:"Watermark",PEN:"Pen",RESIZE:"Resize"},Un={X:"X",Y:"Y"},Le=1,ht=["png","jpeg","jpg","webp"],ou=[].concat(ht,["svg","gif","avif","apng"]),io=ht[0],Fe={DEFAULT:"default",DRAW:"crosshair",SELECT:"pointer",MOVE:"move",DRAG:"GRAB"},Nt="Crop",tl="custom",rt="ellipse",fe={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",MIDDLE_LEFT:"middle-left",MIDDLE_CENTER:"middle-center",MIDDLE_RIGHT:"middle-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},ao={WIDTH:14,HEIGHT:14},nl={AFTER_SAVE:"after-saving",CLOSE_BUTTON:"close-button-clicked",BACK_BUTTON:"back-button-clicked"},vt={WARNING:"warning",ERROR:"error"},lo={top:"north",bottom:"south",left:"west",center:"center",right:"east"},iu={northwest:"top-left",northcenter:"top-center",northeast:"top-right",centerwest:"center-left",centercenter:"center-center",centereast:"center-right",southwest:"bottom-left",southcenter:"bottom-center",southeast:"bottom-right"},au=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2];t.ratio!==rt||n?e.rect(t.x,t.y,t.width,t.height):e.ellipse(t.x+t.width/2,t.y+t.height/2,t.width/2,t.height/2,0,0,2*Math.PI)};function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function co(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?so(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):so(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var rl="ADD_FILTER",lu=function(e,t){return co(co({},e),{},{isDesignState:!t.dismissHistory,filter:t.filter||null})};function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function po(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?uo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var un="HIDE_LOADER",su=function(e){return po(po({},e),{},{isLoadingGlobally:!1})},at;const ol=(at={theme:{palette:{"bg-primary-active":"#ECF3FF"},typography:{fontFamily:"Roboto, Arial"}},annotationsCommon:{fill:"#000000",stroke:"#000000",strokeWidth:0,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"#000000",shadowOpacity:1,opacity:1}},f(f(f(f(f(f(f(f(f(f(at,b.TEXT,{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",fontFamily:"Arial",fonts:[{label:"Arial",value:"Arial"},"Tahoma","Sans-serif",{label:"Comic Sans",value:"Comic-sans"}],fontSize:14,letterSpacing:0,lineHeight:1,align:"left",fontStyle:"normal",onFontChange:void 0}),b.IMAGE,{fill:void 0,disableUpload:!1,gallery:[]}),b.RECT,{cornerRadius:0}),b.ELLIPSE,{}),b.POLYGON,{sides:3}),b.PEN,{strokeWidth:1,tension:.5,lineCap:"round",selectAnnotationAfterDrawing:!0}),b.LINE,{lineCap:"butt",strokeWidth:1}),b.ARROW,{strokeWidth:6,lineCap:"butt",pointerLength:void 0,pointerWidth:void 0}),b.WATERMARK,{gallery:[],textScalingRatio:.5,imageScalingRatio:.5,hideTextWatermark:!1,onUploadWatermarkImgClick:void 0}),b.CROP,{minWidth:ao.WIDTH,minHeight:ao.HEIGHT,width:null,height:null,maxWidth:null,maxHeight:null,ratio:null,ratioTitleKey:void 0,noPresets:!1,autoResize:!1,presetsItems:[],presetsFolders:[],lockCropAreaAt:null}),f(f(f(f(f(f(f(f(f(f(at,b.ROTATE,{angle:60,componentType:"slider"}),"tabsIds",[]),"defaultTabId",ne.ADJUST),"defaultToolId",b.CROP),"onClose",void 0),"onSave",void 0),"onBeforeSave",void 0),"closeAfterSave",!1),"defaultSavedImageName",void 0),"defaultSavedImageType",null),f(f(f(f(f(f(f(f(f(f(at,"defaultSavedImageQuality",.92),"forceToPngInEllipticalCrop",!1),"useBackendTranslations",!0),"translations",null),"language","en"),"avoidChangesNotSavedAlertOnLeave",!1),"loadableDesignState",null),"moreSaveOptions",[]),"savingPixelRatio",4),"previewPixelRatio",window&&window.devicePixelRatio||1),f(f(f(f(f(f(f(f(f(f(at,"showBackButton",!1),"useCloudimage",!1),"cloudimage",{token:"",dontPrefixUrl:!1,domain:"cloudimg.io",version:"",loadableQuery:"",secureProtocol:!0,imageSealing:{enable:!1,salt:"",charCount:10,includeParams:[]}}),"observePluginContainerSize",!1),"showCanvasOnly",!1),"getCurrentImgDataFnRef",void 0),"onModify",void 0),"useZoomPresetsMenu",!0),"disableZooming",!1),"noCrossOrigin",!1),f(f(at,"disableSaveIfNoChanges",!1),"removeSaveButton",!1));function cu(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=uu(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){l=!0},f:function s(){try{i||n.return==null||n.return()}finally{if(l)throw s}}}}function uu(e,t){if(e){if(typeof e=="string")return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fo(e,t):void 0}}function fo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I={apply:function(t){for(var n=t.data,r=n.length,o=arguments.length,i=Array(1<o?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];for(var s=0;s<r;s+=4){var u,c=cu(i);try{for(c.s();!(u=c.n()).done;){var d=u.value,p=d([n[s],n[s+1],n[s+2]]),m=z(p,3);n[s]=m[0],n[s+1]=m[1],n[s+2]=m[2]}}catch(h){c.e(h)}finally{c.f()}}},brightness:function(t){return function(n){var r=t;return r=1<r?1:r,r=-1>r?-1:r,r=~~(255*r),[n[0]+r,n[1]+r,n[2]+r]}},contrast:function(t){return function(n){var r=t;r*=255;var o=259*(r+255)/(255*(259-r));return[o*(n[0]-128)+128,o*(n[1]-128)+128,o*(n[2]-128)+128]}},saturation:function(t){return function(n){var r=t;r=-1>r?-1:r;var o=n[0],i=n[1],l=n[2],s=.2989*o+.587*i+.114*l;return[-s*r+o*(1+r),-s*r+i*(1+r),-s*r+l*(1+r)]}},grayscale:function(){return function(t){var n=t[0],r=t[1],o=t[2];return[,,,].fill(.2126*n+.7152*r+.0722*o)}},sepia:function(t){return function(n){var r=n[0],o=n[1],i=n[2];return[r*(1-.607*t)+.769*o*t+.189*i*t,.349*r*t+o*(1-.314*t)+.168*i*t,.272*r*t+.534*o*t+i*(1-.869*t)]}},adjustRGB:function(t){return function(n){return[n[0]*t[0],n[1]*t[1],n[2]*t[2]]}},colorFilter:function(t){return function(n){var r=n[0],o=n[1],i=n[2],l=t[3];return[r-(r-t[0])*l,o-(o-t[1])*l,i-(i-t[2])*l]}}};function qn(e){I.apply(e,function(t){var n=(t[0]+t[1]+t[2])/3>100,r=n?255:0;return[r,r,r]})}qn.filterName="BlackAndWhite";var du=.1,pu=.1,fu=.15;function Vn(e){I.apply(e,I.brightness(du),I.contrast(pu),I.saturation(fu))}Vn.filterName="Clarendon";var mu=.04,gu=-.15;function Zn(e){I.apply(e,I.sepia(mu),I.contrast(gu))}Zn.filterName="Gingham";var hu=.1;function Qn(e){I.apply(e,I.grayscale(),I.brightness(hu));var t=e.data;t.length}Qn.filterName="Moon";var vu=.08,yu=[1,1.03,1.05],Ou=.12;function Jn(e){I.apply(e,I.brightness(vu),I.adjustRGB(yu),I.saturation(Ou))}Jn.filterName="Lark";var bu=.4,wu=.13,Eu=-.05;function er(e){I.apply(e,I.sepia(bu),I.brightness(wu),I.contrast(Eu))}er.filterName="Reyes";var Su=[1.01,1.04,1],Iu=.3;function tr(e){I.apply(e,I.adjustRGB(Su),I.saturation(Iu))}tr.filterName="Juno";var Pu=.1,Cu=-.5;function nr(e){I.apply(e,I.brightness(Pu),I.saturation(Cu))}nr.filterName="Slumber";var ju=[1.04,1,1.02],Tu=-.05;function rr(e){I.apply(e,I.adjustRGB(ju),I.saturation(Tu))}rr.filterName="Crema";var xu=.05,ku=-.03;function or(e){I.apply(e,I.brightness(xu),I.saturation(ku))}or.filterName="Ludwig";var Au=[228,130,225,.13],Nu=-.2;function ir(e){I.apply(e,I.colorFilter(Au),I.saturation(Nu))}ir.filterName="Aden";var _u=[1.05,1.1,1];function ar(e){I.apply(e,I.adjustRGB(_u))}ar.filterName="Perpetua";var Ru=.3,Fu=.15;function lr(e){I.apply(e,I.saturation(Ru),I.brightness(Fu))}lr.filterName="Amaro";var Du=[230,115,108,.05],Lu=.15;function sr(e){I.apply(e,I.colorFilter(Du),I.saturation(Lu))}sr.filterName="Mayfair";var Mu=[255,170,0,.1],Bu=.09,$u=.1;function cr(e){I.apply(e,I.colorFilter(Mu),I.brightness(Bu),I.saturation($u))}cr.filterName="Rise";var Wu=[1,1,1.25],zu=.1,Xu=.15;function ur(e){I.apply(e,I.adjustRGB(Wu),I.contrast(zu),I.brightness(Xu))}ur.filterName="Hudson";var Hu=[255,225,80,.08],Gu=.1,Ku=.05;function dr(e){I.apply(e,I.colorFilter(Hu),I.saturation(Gu),I.contrast(Ku))}dr.filterName="Valencia";var Yu=[255,255,0,.07],Uu=.2,qu=.15;function pr(e){I.apply(e,I.colorFilter(Yu),I.saturation(Uu),I.contrast(qu))}pr.filterName="XPro2";var Vu=-.15,Zu=.1;function fr(e){I.apply(e,I.contrast(Vu),I.saturation(Zu))}fr.filterName="Sierra";var Qu=[100,28,210,.03],Ju=.1;function mr(e){I.apply(e,I.grayscale(),I.colorFilter(Qu),I.brightness(Ju))}mr.filterName="Willow";var ed=.15,td=.2;function gr(e){I.apply(e,I.contrast(ed),I.saturation(td))}gr.filterName="LoFi";var nd=.1,rd=.15;function hr(e){I.apply(e,I.contrast(nd),I.saturation(rd))}hr.filterName="Hefe";var od=[220,115,188,.12],id=-.05;function vr(e){I.apply(e,I.colorFilter(od),I.contrast(id))}vr.filterName="Nashville";var ad=.1,ld=.3;function yr(e){I.apply(e,I.brightness(ad),I.sepia(ld))}yr.filterName="Stinson";var sd=[255,225,0,.05],cd=.06,ud=.06;function Or(e){I.apply(e,I.colorFilter(sd),I.brightness(cd),I.contrast(ud))}Or.filterName="Vesper";var dd=[255,165,40,.2];function br(e){I.apply(e,I.colorFilter(dd))}br.filterName="Earlybird";var pd=.2,fd=[140,10,185,.1];function wr(e){I.apply(e,I.contrast(pd),I.colorFilter(fd))}wr.filterName="Brannan";var md=-.1,gd=-.1;function Er(e){I.apply(e,I.brightness(md),I.saturation(gd))}Er.filterName="Sutro";var hd=.1,vd=[255,145,0,.2];function Sr(e){I.apply(e,I.sepia(hd),I.colorFilter(vd))}Sr.filterName="Toaster";var yd=.1,Od=[255,255,0,.2];function Ir(e){I.apply(e,I.brightness(yd),I.colorFilter(Od))}Ir.filterName="Walden";var bd=[255,25,0,.15],wd=.1;function Pr(e){I.apply(e,I.colorFilter(bd),I.brightness(wd))}Pr.filterName="NinteenSeventySeven";var Ed=[255,140,0,.1],Sd=[1.15,1.05,1],Id=.35;function Cr(e){I.apply(e,I.colorFilter(Ed),I.adjustRGB(Sd),I.saturation(Id))}Cr.filterName="Kelvin";var Pd=[225,240,0,.1],Cd=.25,jd=.05;function jr(e){I.apply(e,I.colorFilter(Pd),I.saturation(Cd),I.contrast(jd))}jr.filterName="Maven";var Td=.06,xd=.1;function Tr(e){I.apply(e,I.sepia(Td),I.brightness(xd))}Tr.filterName="Ginza";var kd=.35,Ad=.1;function xr(e){I.apply(e,I.saturation(kd),I.brightness(Ad))}xr.filterName="Skyline";var Nd=.15,_d=.1;function kr(e){I.apply(e,I.contrast(Nd),I.brightness(_d))}kr.filterName="Dogpatch";var Rd=[25,240,252,.05],Fd=.3;function Ar(e){I.apply(e,I.colorFilter(Rd),I.sepia(Fd))}Ar.filterName="Brooklyn";var Dd=[208,208,86,.2],Ld=.15;function Nr(e){I.apply(e,I.colorFilter(Dd),I.contrast(Ld))}Nr.filterName="Helena";var Md=[255,160,25,.1],Bd=.1;function _r(e){I.apply(e,I.colorFilter(Md),I.brightness(Bd))}_r.filterName="Ashby";var $d=[255,50,80,.12],Wd=.05;function Rr(e){I.apply(e,I.colorFilter($d),I.contrast(Wd))}Rr.filterName="Charmes";const zd=Object.freeze(Object.defineProperty({__proto__:null,Aden:ir,Amaro:lr,Ashby:_r,BlackAndWhite:qn,Brannan:wr,Brooklyn:Ar,Charmes:Rr,Clarendon:Vn,Crema:rr,Dogpatch:kr,Earlybird:br,Gingham:Zn,Ginza:Tr,Hefe:hr,Helena:Nr,Hudson:ur,Juno:tr,Kelvin:Cr,Lark:Jn,LoFi:gr,Ludwig:or,Maven:jr,Mayfair:sr,Moon:Qn,Nashville:vr,NinteenSeventySeven:Pr,Perpetua:ar,Reyes:er,Rise:cr,Sierra:fr,Skyline:xr,Slumber:nr,Stinson:yr,Sutro:Er,Toaster:Sr,Valencia:dr,Vesper:Or,Walden:Ir,Willow:mr,XPro2:pr},Symbol.toStringTag,{value:"Module"}));var il=function(e){return e?zd[e]||se.Filters[e]:null};function Fr(e){for(var t=this.warmth(),n=e.data,r=n.length,o=0;o<r;o+=4)n[o]+=t,n[o+2]-=t}Fr.finetuneName="Warmth";en.addGetterSetter(se.Image,"warmth",0,_a(),en.afterSetFilter);function al(e){for(var t=this.threshold(),n=e.data,r=n.length,o=0;o<r;o+=4)t===0||(n[o]=n[o]>=t?255:0,n[o+1]=n[o+1]>=t?255:0,n[o+2]=n[o+2]>=t?255:0)}al.finetuneName="CustomThreshold";en.addGetterSetter(se.Image,"threshold",0,_a,en.afterSetFilter);const Xd=Object.freeze(Object.defineProperty({__proto__:null,CustomThreshold:al,Warmth:Fr},Symbol.toStringTag,{value:"Module"}));var ll=function(e){return Array.isArray(e)&&0<e.length?e.map(function(t){return se.Filters[t]||Xd[t]}):[]};function mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yn(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?mo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var sl=function(){var e,t,n,r,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},i=yn({},o.loadableDesignState);Array.isArray(i.finetunes)&&(i.finetunes=ll(i.finetunes)),i.filter&&(i.filter=il(i.filter));var l=!!o.loadableDesignState||!!(o.useCloudimage&&(!((e=o.cloudimage)===null||e===void 0)&&e.loadableQuery));return yn(yn({imgSrc:typeof o.source=="string"?o.source:((t=o.source)===null||t===void 0?void 0:t.src)||"",finetunes:[],finetunesProps:{},filter:null,adjustments:{crop:{ratio:o[b.CROP].ratio,ratioTitleKey:(n=o[b.CROP].ratioTitleKey)!==null&&n!==void 0?n:o[b.CROP].ratio,width:null,height:null,x:0,y:0},isFlippedX:!1,isFlippedY:!1,rotation:0},annotations:{},resize:{},shownImageDimensions:{}},i),{},{pointerCssIcon:Fe.DEFAULT,canvasScale:1,zoom:{factor:Le,x:null,y:null},isLoadingGlobally:!0,selectionsIds:[],tabId:o.defaultTabId||null,toolId:o.defaultToolId||null,feedback:{},pastDesignStates:[],futureDesignStates:[],isResetted:(r=!l)===null||r===void 0||r,haveNotSavedChanges:!1,latestColors:{},showTabsMenu:!1})},yt=function(e,t){var n=sl(t?e:ol);return{imgSrc:e.imgSrc||n.imgSrc,finetunes:e.finetunes||n.finetunes,finetunesProps:e.finetunesProps||n.finetunesProps,filter:e.filter||n.filter,adjustments:e.adjustments||n.adjustments,annotations:e.annotations||n.annotations,resize:e.resize||n.resize}};function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?go(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):go(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Dr="REDO",Hd=function(e){if(e.futureDesignStates&&0<e.futureDesignStates.length){var t=yt(e),n=Ma(e.futureDesignStates),r=n[0],o=n.slice(1),i=[t].concat(be(e.pastDesignStates||[]));return On(On(On({},e),r),{},{selectionsIds:[],pastDesignStates:i,futureDesignStates:o,hasUndo:!0,hasRedo:0<o.length,haveNotSavedChanges:!0})}return e};function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function It(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ho(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ho(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Lr="RESET",Gd=function(e,t){var n=yt(It(It({},t.config),{},{imgSrc:e.imgSrc}),!0);return It(It(It({},e),n),{},{selectionsIds:[],isResetted:!0,pastDesignStates:[],futureDesignStates:[],hasUndo:!1,hasRedo:!1,haveNotSavedChanges:!1})};function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yo(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?vo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ke="SET_FEEDBACK",Kd=function(e,t){return yo(yo({},e),{},{isLoadingGlobally:!1,feedback:t.feedback||{}})};function Oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function bo(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Oo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Mr="SHOW_LOADER",Yd=function(e){return bo(bo({},e),{},{isLoadingGlobally:!0})},Br=O.createContext({});const Bn={name:"Name",save:"Save",saveAs:"Save as",back:"Back",loading:"Loading...",resetOperations:"Reset/delete all operations",changesLoseWarningHint:"If you press button “reset” your changes will lost. Would you like to continue?",discardChangesWarningHint:"If you close modal, your last change will not be saved.",cancel:"Cancel",apply:"Apply",warning:"Warning",confirm:"Confirm",discardChanges:"Discard changes",undoTitle:"Undo last operation",redoTitle:"Redo last operation",showImageTitle:"Show original image",zoomInTitle:"Zoom in",zoomOutTitle:"Zoom out",toggleZoomMenuTitle:"Toggle zoom menu",adjustTab:"Adjust",finetuneTab:"Finetune",filtersTab:"Filters",watermarkTab:"Watermark",annotateTabLabel:"Annotate",resize:"Resize",resizeTab:"Resize",imageName:"Image name",invalidImageError:"Invalid image provided.",uploadImageError:"Error while uploading the image.",areNotImages:"are not images",isNotImage:"is not image",toBeUploaded:"to be uploaded",cropTool:"Crop",original:"Original",custom:"Custom",square:"Square",landscape:"Landscape",portrait:"Portrait",ellipse:"Ellipse",classicTv:"Classic TV",cinemascope:"Cinemascope",arrowTool:"Arrow",blurTool:"Blur",brightnessTool:"Brightness",contrastTool:"Contrast",ellipseTool:"Ellipse",unFlipX:"Un-Flip X",flipX:"Flip X",unFlipY:"Un-Flip Y",flipY:"Flip Y",hsvTool:"HSV",hue:"Hue",brightness:"Brightness",saturation:"Saturation",value:"Value",imageTool:"Image",importing:"Importing...",addImage:"+ Add image",uploadImage:"Upload image",fromGallery:"From gallery",lineTool:"Line",penTool:"Pen",polygonTool:"Polygon",sides:"Sides",rectangleTool:"Rectangle",cornerRadius:"Corner Radius",resizeWidthTitle:"Width in pixels",resizeHeightTitle:"Height in pixels",toggleRatioLockTitle:"Toggle ratio lock",resetSize:"Reset to original image size",rotateTool:"Rotate",textTool:"Text",textSpacings:"Text spacings",textAlignment:"Text alignment",fontFamily:"Font family",size:"Size",letterSpacing:"Letter Spacing",lineHeight:"Line height",warmthTool:"Warmth",addWatermark:"+ Add watermark",addTextWatermark:"+ Add text watermark",addWatermarkTitle:"Choose the watermark type",uploadWatermark:"Upload watermark",addWatermarkAsText:"Add as text",padding:"Padding",paddings:"Paddings",shadow:"Shadow",horizontal:"Horizontal",vertical:"Vertical",blur:"Blur",opacity:"Opacity",transparency:"Transparency",position:"Position",stroke:"Stroke",saveAsModalTitle:"Save as",extension:"Extension",format:"Format",nameIsRequired:"Name is required.",quality:"Quality",imageDimensionsHoverTitle:"Saved image size (width x height)",cropSizeLowerThanResizedWarning:"Note, the selected crop area is lower than the applied resize which might cause quality decrease",actualSize:"Actual size (100%)",fitSize:"Fit size",addImageTitle:"Select image to add...",mutualizedFailedToLoadImg:"Failed to load image.",tabsMenu:"Menu",download:"Download",width:"Width",height:"Height",plus:"+",cropItemNoEffect:"No preview available for this crop item"};function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?wo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var qt={},$r=$n({},Bn),Eo="Error while loading translations from backend.",cl=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"en";return Object.assign($r,qt[t==null?void 0:t.toLowerCase()]||{},e)},Ud=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return new Promise(function(t,n){var r=new XMLHttpRequest;r.responseType="json",r.onload=function(){if(200<=r.status&&300>r.status)t(r.response);else{var o;console.warn("Error in sending translation key to backend ".concat((o=r.response)===null||o===void 0?void 0:o.hint,", ").concat(r.status)),n()}},r.onerror=function(){var o;console.warn("Error in sending translation key to backend ".concat((o=r.response)===null||o===void 0?void 0:o.hint,", ").concat(r.status)),n()},r.open("POST","https://neo.wordplex.io/api/import/request-translations?grid_uuid=".concat(Mn)),r.send(JSON.stringify({grid_uuid:Mn,translations_requests:e}))})},qd=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"en",t=1<arguments.length?arguments[1]:void 0;return new Promise(function(n,r){var o=e.toLowerCase(),i=new XMLHttpRequest;i.responseType="json",i.onload=function(){if(200<=i.status&&300>i.status){(i.response||[]).forEach(function(d){qt[o]=$n($n({},qt[o]),{},f({},d.translation_key,d.translations[o]))});var l=[];Object.keys(Bn).forEach(function(d){var p;d&&!((p=qt[o])!==null&&p!==void 0&&p[d])&&l.push({key:d,lang:o,default:Bn[d]})}),0<l.length&&Ud(l),cl(t,o),n($r)}else{var s,u,c;console.error("Status code: ".concat(i.status)),console.error(((s=i.response)===null||s===void 0?void 0:s.msg)||((u=i.response)===null||u===void 0?void 0:u.msg)||((c=i.response)===null||c===void 0?void 0:c.details)||Eo),r()}},i.onerror=function(){console.error("Status code ".concat(i.status,", error: ").concat(Eo)),r()},i.open("GET","https://i18n.ultrafast.io/api/export?grid=".concat(Mn)),i.send()})},Vd=function(e){return $r[e]||e||""},Zd=function(e,t){return na[t.type]&&na[t.type](e,t.payload)||e};function So(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Io(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?So(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):So(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var bn=!0,ul=function(e){var t=e.children,n=e.config,r=n===void 0?{}:n,o=dp(Zd,sl(r),r),i=z(o,2),l=i[0],s=i[1];O.useEffect(function(){return bn=!0,function(){bn=!1}},[]);var u=O.useCallback(function(){bn&&s.apply(void 0,arguments)},[s]);O.useEffect(function(){cl(r.translations,r.language)},[r.useBackendTranslations,r.language,r.translations]);var c=xs(),d=O.useMemo(function(){return Io(Io({},l),{},{config:r,theme:c,dispatch:u,t:Vd})},[r,l]);return a.createElement(Br.Provider,{value:d},t)};ul.defaultProps={config:{}};var Qd=function(e){var t=e.children,n=e.overridingValue;return a.createElement(Br.Provider,{value:n},t)},X=function(){return O.useContext(Br)};function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Co(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Po(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Po(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Dt=function(e,t){var n=X(),r=n.dispatch,o=n.finetunes,i=n.finetunesProps,l=O.useCallback(function(s){r({type:Ul,payload:{finetune:e,finetuneProps:s}})},[]);return O.useEffect(function(){o.includes(e)||l(Co(Co({},t),i))},[]),O.useMemo(function(){return[i,l]},[i])},Jd=function(){var e=X(),t=e.dispatch,n=e.filter,r=O.useCallback(function(o){t({type:rl,payload:{filter:o}})},[]);return O.useMemo(function(){return[n,r]},[n])},dn=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return"".concat(e).concat(e?"-":"").concat(parseInt(Date.now()*Math.random(),10))},pn=function(e){var t,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:300;return function(){var r,o;clearTimeout(t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];var u=l[0],c=l.slice(1);t=setTimeout(e.bind.apply(e,[null,(r=u==null||(o=u.target)===null||o===void 0?void 0:o.value)!==null&&r!==void 0?r:u].concat(be(c))),n)}},Wn=function(){var e,t,n=document,r=n.body,o=document.documentElement,i=((e=window)===null||e===void 0?void 0:e.pageYOffset)||o.scrollTop||r.scrollTop,l=((t=window)===null||t===void 0?void 0:t.pageXOffset)||o.scrollLeft||r.scrollLeft;return{topOffset:i,leftOffset:l}},dl=function(e){if(!e)return null;var t=e.getBoundingClientRect(),n=document,r=n.body,o=Wn(),i=o.topOffset,l=o.leftOffset,s=document.documentElement,u=s.clientTop||r.clientTop||0,c=s.clientLeft||r.clientLeft||0,d=t.top+i-u,p=t.left+l-c;return{top:Math.round(d),left:Math.round(p),width:t.width,height:t.height}},me=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0;return Math.min(Math.max(t,+e),n||1e6)},Vt=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=e.parent,r=n.getStage(),o=r.attrs.zoomFactor,i=n.getRelativePointerPosition();return{offsetX:me(i.x,0,t.width/(r.scaleX()/o))+n.attrs.xPadding,offsetY:me(i.y,0,t.height/(r.scaleY()/o))+n.attrs.yPadding}},jo=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,r={},o=n.parent.attrs;return r.x=Math.min(e.offsetX,t.startedX)-o.xPadding||0,r.y=Math.min(e.offsetY,t.startedY)-o.yPadding||0,r.width=e.offsetX-t.startedX,r.height=e.offsetY-t.startedY,r.startedX=t.startedX-o.xPadding||0,r.startedY=t.startedY-o.yPadding||0,r},ep=["width","height","startedX","startedY"];function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xo(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?To(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):To(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var tp=f(f(f(f(f(f(f({},b.RECT,se.Rect),b.ELLIPSE,se.Ellipse),b.POLYGON,se.RegularPolygon),b.LINE,se.Line),b.IMAGE,se.Image),b.TEXT,se.Text),b.ARROW,se.Arrow),pl=[b.LINE,b.ARROW],np=[].concat(pl,[b.ELLIPSE,b.POLYGON]),ko=function(e){var t,n,r;return new tp[e.name](xo(xo({},e),{},{opacity:(t=e.opacity)!==null&&t!==void 0?t:.7,x:(n=e.x)!==null&&n!==void 0?n:0,y:(r=e.y)!==null&&r!==void 0?r:0,width:Math.abs(e.width)||0,height:Math.abs(e.height)||0},pl.includes(e.name)?{stroke:e.stroke||"#000000"}:{}))},rp=function(e,t,n){var r=e.width,o=e.height,i=e.startedX,l=e.startedY,s=de(e,ep),u=Math.abs(r),c=Math.abs(o),d=0>r,p=0>o;switch(t){case b.RECT:n?(s.width=Math.sqrt(u*u+c*c),s.height=s.width,s.x-=d?s.width-u:0,s.y-=p?s.height-c:0):(s.width=u,s.height=c);break;case b.ELLIPSE:n?(s.radiusX=Math.sqrt(u*u+c*c)/2,s.radiusY=s.radiusX,s.x-=d?2*s.radiusX-u:0,s.y-=p?2*s.radiusY-c:0):(s.radiusX=u/2,s.radiusY=c/2),s.offsetX=-s.radiusX,s.offsetY=-s.radiusY;break;case b.POLYGON:s.radius=(u+c)/2,s.x-=d?2*s.radius-u:0,s.y-=p?2*s.radius-c:0,s.offsetX=-s.radius,s.offsetY=-s.radius;break;case b.LINE:case b.ARROW:s.x=i,s.y=l,s.points=[0,0],n?s.points.push(u>=c?r:0,c>u?o:0):s.points=[0,0,r,o];break;default:s.width=u,s.height=c}return s},op=["id","x","y","points"],ip=["startedX","startedY","offsetX","offsetY","width","height"];function Ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ao(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ao(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var xe={startedX:void 0,startedY:void 0,isOutOfCanvas:!1},we={passive:!0},Pt=1,st=null,Ct=null,Ee=null,ap=function(e,t,n,r){var o=function(){return dl(e.content)},i=function(v){Ct=ko(lt(lt({},v),{},{name:b.RECT,fill:"",stroke:"#000000",strokeWidth:2,shadowColor:"#ffffff",shadowBlur:1,shadowOpacity:.7})),n.add(Ct)},l=function(v){st=ko(v),n.add(st),v.name===b.TEXT&&i(v),Ee=v},s=function(v,y){var E=rp(v,Ee.name,y);Ct&&Ct.setAttrs(E),st.setAttrs(E),Ee=lt(lt({},Ee),E)},u=function(v){var y=Vt(n,o());s(jo(y,xe,n),v.shiftKey)},c=function(){n&&st&&n.destroyChildren()},d=function(v){var y;if(!(1<((y=v.evt.touches)===null||y===void 0?void 0:y.length))){var E=Vt(n,o());xe.isOutOfCanvas&&(document.removeEventListener("mousemove",u,we),document.removeEventListener("touchmove",u,we),xe.isOutOfCanvas=!1);var S=jo(E,xe,n);if(st)s(S,v.evt.shiftKey);else{t.id,t.x,t.y,t.points;var k=de(t,op);l(lt(lt({},k),S))}e.setAttrs({isDrawing:!0})}},p=function(){xe.isOutOfCanvas||(document.addEventListener("mousemove",u,we),document.addEventListener("touchmove",u,we),xe.isOutOfCanvas=!0)},m=function(){var v,y;if(c(),Ee&&(Ee.width>=Pt&&Ee.height>=Pt||Ee.radiusX>=Pt&&Ee.radiusY>=Pt||(v=Ee.points)!==null&&v!==void 0&&v[2]||(y=Ee.points)!==null&&y!==void 0&&y[3]||Ee.radius>=Pt)){var E=Ee;E.startedX,E.startedY,E.offsetX,E.offsetY;var S=E.width,k=E.height,j=de(E,ip);np.includes(t.name)||(j.width=S,j.height=k),r(j,!0)}st=null,Ct=null,Ee=null,e.setAttrs({isDrawing:!1}),e.off("mousemove touchmove",d),e.off("mouseleave touchcancel",p),document.removeEventListener("mouseup",m,we),document.removeEventListener("touchend",m,we),document.removeEventListener("mouseleave",m,we),document.removeEventListener("touchcancel",m,we),document.removeEventListener("mousemove",u,we),document.removeEventListener("touchmove",u,we),xe.isOutOfCanvas=!1},h=function(v){var y;if(v.evt.preventDefault(),!(v.target.attrs.draggable||1<((y=v.evt.touches)===null||y===void 0?void 0:y.length))){c();var E=Vt(n,o());xe.startedX=E.offsetX,xe.startedY=E.offsetY,xe.isOutOfCanvas=!1,e.on("mousemove touchmove",d),e.on("mouseleave touchcancel",p),document.addEventListener("mouseup",m,we),document.addEventListener("touchend",m,we),document.addEventListener("mouseleave",m,we),document.addEventListener("touchcancel",m,we)}};return e.on("mousedown touchstart",h),function(){c(),e.off("mousedown touchstart",h)}},fl=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[];return O.useCallback(pn(e,t),n)},lp=["fonts","onFontChange"],sp=["x","y","width","height","radius","radiusX","radiusY","points","image","text","scaleX","scaleY","rotation"],cp=["shouldSave","neverSave"];function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function le(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?No(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):No(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ye=function(){var e,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],r=X(),o=r.dispatch,i=r.previewGroup,l=r.annotations,s=r.selectionsIds,u=s===void 0?[]:s,c=r.config,d=le(le({},c.annotationsCommon),c[((e=l[u[0]])===null||e===void 0?void 0:e.name)||t.name]),p=O.useState(function(){return le(le(le({},d),t),l[u[0]])}),m=z(p,2),h=m[0],g=m[1],v=O.useRef(),y=i==null?void 0:i.getStage(),E=O.useCallback(function(w){w.fonts,w.onFontChange;var P=de(w,lp);o({type:nt,payload:P}),P.id&&t.name!==b.PEN&&pn(function(){o({type:Ot,payload:{annotationId:P.id}})},30)()},[]),S=fl(function(w){g(function(P){return le(le({},P),{},{shouldSave:!1,neverSave:!1},typeof w=="function"?w(P):w)})},15),k=O.useCallback(function(w,P){if(w.name===P){w.x,w.y,w.width,w.height,w.radius,w.radiusX,w.radiusY,w.points,w.image,w.text,w.scaleX,w.scaleY,w.rotation;var C=de(w,sp);return le(le(le({},d),t),C)}return le(le({},d),t)},[]),j=O.useCallback(function(w){g(function(P){var C=k(P,w.name||t.name);return le(le(le({},C),w),{},{id:w.id||dn(w.name||P.name),shouldSave:!0,neverSave:!1})})},[]);return O.useEffect(function(){var w=h.shouldSave,P=h.neverSave,C=de(h,cp),x=u.length===1&&l[u[0]];!P&&(w||x)&&E(le(le({},C),{},{id:w?C.id:x.id}))},[h]),O.useEffect(function(){setTimeout(function(){u.length===1?(v.current=h,g(le(le({},l[u[0]]),{},{neverSave:!0}))):v.current&&(g(le(le({},v.current),{},{neverSave:!0})),v.current=null)})},[u,l]),O.useEffect(function(){var w=null;if(y&&n){var P=k(h,t.name);w=ap(y,le(le({},P),{},{name:t.name}),i,j)}return function(){w&&w()}},[y,h,i]),O.useMemo(function(){return[h,S,j]},[h,S,j])},up=["isDesignState"];function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Lt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?_o(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_o(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ro,dp=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},r=Lt(Lt({},t),{},{pastDesignStates:[],futureDesignStates:[],hasRedo:!1,hasUndo:!1});return O.useReducer(function(i,l){var s=e(i,l)||r;if([Yr,Dr,Lr].includes(l.type))return s;if(s.isDesignState){var u=yt(i);s.isDesignState;var c=de(s,up),d=Lt(Lt({},c),{},{pastDesignStates:[u].concat(be(i.pastDesignStates)),hasUndo:!0,hasRedo:!1,futureDesignStates:[],isResetted:!1,haveNotSavedChanges:!0});return Ro=setTimeout(function(){clearTimeout(Ro),typeof n.onModify=="function"&&n.onModify(d)}),d}return s},r)},pp=function(){var e=X(),t=e.tabId,n=e.dispatch,r=O.useMemo(function(){return t!==ne.ANNOTATE&&t!==ne.WATERMARK},[t]),o=O.useCallback(function(d){n({type:nt,payload:d})},[]),i=O.useCallback(function(d){o({id:d.target.id(),x:d.target.x(),y:d.target.y()})},[]),l=O.useCallback(function(d){var p={id:d.target.id(),rotation:d.target.rotation(),x:d.target.x(),y:d.target.y()};return d.target.name()===b.TEXT?(p.width=d.target.width()*d.target.scaleX(),p.height=d.target.height()*d.target.scaleY(),p.scaleX=1,p.scaleY=1):(p.scaleX=d.target.scaleX(),p.scaleY=d.target.scaleY()),p},[]),s=O.useCallback(function(d){o(l(d))},[]),u=O.useCallback(function(d){d.target.name()===b.TEXT&&d.target.setAttrs(l(d))}),c=O.useCallback(function(d){if(!(d.target.id()===Xe||d.target.getStage().attrs.isDrawing)){var p=d.evt.ctrlKey||d.evt.shiftKey||d.evt.metaKey;n({type:Ot,payload:{annotationId:d.target.id(),multiple:p}}),n({type:sn,payload:{toolId:d.target.name(),keepSelections:p}})}},[]);return O.useMemo(function(){return r?{}:{onTransform:u,onTransformEnd:s,onDragEnd:i,onClick:c,onTap:c}},[r])},Wr=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},t=O.useRef(e),n=O.useRef(),r=O.useCallback(function(c){c.forEach(function(d){if(d.contentRect){var p=d.contentRect,m=p.width,h=p.height;t.current({entry:d,width:m,height:h})}})},[]),o=O.useCallback(function(c){t.current=c},[]),i=O.useCallback(function(){n.current||(n.current=new ResizeObserver(r))},[]),l=O.useCallback(function(c,d){c&&(!n.current&&i(),n.current.observe(c),d&&(t.current=d))},[]),s=O.useCallback(function(c,d){n.current&&c&&(n.current.unobserve(c),d&&(t.current=d))},[]),u=O.useCallback(function(){n.current&&n.current.disconnect()},[]);return O.useEffect(function(){return i(),u},[]),O.useMemo(function(){return[l,s,o]},[])},Te=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:438;return window.matchMedia("(max-width: ".concat(e,"px)")).matches},Ae=function(e,t,n,r,o){return(e-t)*(o-r)/(n-t)+r};function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Fo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var rn=function(e,t,n){var r,o;return wn(wn(wn({},e.x||e.x===0?{x:Math.round(Ae(e.x,0,t.width,0,n.width))}:{}),e.y||e.y===0?{y:Math.round(Ae(e.y,0,t.height,0,n.height))}:{}),{},{width:Math.round(Ae((r=e.width)!==null&&r!==void 0?r:t.width,0,t.width,0,n.width)),height:Math.round(Ae((o=e.height)!==null&&o!==void 0?o:t.height,0,t.height,0,n.height))})},He=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,r=Math.abs(n),o=Math.round(n),i=90<r,l=i?r-90:r,s=i?t:e,u=i?e:t,c=l*Math.PI/180,d=Math.abs(Math.sin(c)),p=Math.abs(Math.cos(c));return{width:Math.round(s*p)+Math.round(u*d),height:Math.round(s*d)+Math.round(u*p),offsetTop:0<=o&&90>=o?0:function(){return 0>o&&-90<o||90<o?s*d:u*p+s*d}(),offsetLeft:0>=o&&-90<=o?0:function(){return 90<o?s*p+u*d:u*d}()}},fp=function(e){if(e instanceof HTMLImageElement){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t.toDataURL()}return""},ml=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0,n=t,r=e;if(!n&&ou.some(function(l){return e.lastIndexOf(".".concat(l))===e.length-".".concat(l).length})){var o,i=(o=e.slice(e.lastIndexOf(".")+1))===null||o===void 0?void 0:o.toLowerCase();n=i&&ht.includes(i)?i:io,r=e.slice(0,e.lastIndexOf("."))}return n=n||io,{fullName:"".concat(r,".").concat(n),name:r,extension:n}},Ne=function(e,t){return e<<t|e>>>32-t},jt=function(e){var t,n,r="";for(t=7;0<=t;t--)n=15&e>>>4*t,r+=n.toString(16);return r},mp=function(e){for(var t,n=e.replace(/\r\n/g,`
`),r="",o=0;o<n.length;o++)t=n.charCodeAt(o),128>t?r+=String.fromCharCode(t):127<t&&2048>t?(r+=String.fromCharCode(192|t>>6),r+=String.fromCharCode(128|63&t)):(r+=String.fromCharCode(224|t>>12),r+=String.fromCharCode(128|63&t>>6),r+=String.fromCharCode(128|63&t));return r},gp=function(e){var t,n,r,o,i,l,s,u,c,d=e,p=Array(80),m=1732584193,h=4023233417,g=2562383102,v=271733878,y=3285377520;d=mp(d);var E=d.length,S=[];for(n=0;n<E-3;n+=4)r=d.charCodeAt(n)<<24|d.charCodeAt(n+1)<<16|d.charCodeAt(n+2)<<8|d.charCodeAt(n+3),S.push(r);switch(E%4){case 0:n=2147483648;break;case 1:n=8388608|d.charCodeAt(E-1)<<24;break;case 2:n=32768|(d.charCodeAt(E-2)<<24|d.charCodeAt(E-1)<<16);break;case 3:n=128|(d.charCodeAt(E-3)<<24|d.charCodeAt(E-2)<<16|d.charCodeAt(E-1)<<8);break}for(S.push(n);S.length%16!=14;)S.push(0);for(S.push(E>>>29),S.push(4294967295&E<<3),t=0;t<S.length;t+=16){for(n=0;16>n;n++)p[n]=S[t+n];for(n=16;79>=n;n++)p[n]=Ne(p[n-3]^p[n-8]^p[n-14]^p[n-16],1);for(o=m,i=h,l=g,s=v,u=y,n=0;19>=n;n++)c=4294967295&Ne(o,5)+(i&l|~i&s)+u+p[n]+1518500249,u=s,s=l,l=Ne(i,30),i=o,o=c;for(n=20;39>=n;n++)c=4294967295&Ne(o,5)+(i^l^s)+u+p[n]+1859775393,u=s,s=l,l=Ne(i,30),i=o,o=c;for(n=40;59>=n;n++)c=4294967295&Ne(o,5)+(i&l|i&s|l&s)+u+p[n]+2400959708,u=s,s=l,l=Ne(i,30),i=o,o=c;for(n=60;79>=n;n++)c=4294967295&Ne(o,5)+(i^l^s)+u+p[n]+3395469782,u=s,s=l,l=Ne(i,30),i=o,o=c;m=4294967295&m+o,h=4294967295&h+i,g=4294967295&g+l,v=4294967295&v+s,y=4294967295&y+u}return c=jt(m)+jt(h)+jt(g)+jt(v)+jt(y),c.toLowerCase()},hp=function(e){return btoa(e).replace(/=*$/g,"")},vp=function(e,t){return gp(e).slice(0,t)},yp=function(e,t,n,r){var o=hp(e),i=vp(t+o+n,r);return[i?"ci_seal=".concat(i):"",o?"ci_eqs=".concat(o):""].filter(function(l){return l}).join("&")},Op=function(e,t,n){var r=t||{},o=r.salt,i=r.charCount,l=r.includeParams,s=l===void 0?[]:l,u=!s||(s==null?void 0:s.length)===0,c="",d="",p=[],m=[];return e.split("&").forEach(function(h){var g=h.split("="),v=z(g,1),y=v[0];-1<(s==null?void 0:s.indexOf(y))||u?p.push(h):m.push(h)}),0<m.length&&(d=m.join("&")),c=yp(p.join("&"),n,o,i),[c,d].filter(function(h){return h}).join("&")},bp=function(){var e,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",n={hex:"000000",opacity:1};if(!t)return n;if(t.startsWith("#"))return{hex:t.replace("#",""),opacity:1};var r=t.split(","),o=z(r,4),i=o[0],l=o[1],s=o[2],u=o[3];return i&&l&&s?(i=parseFloat(i.replace(/rgba?\(/,"").trim()).toString(16),l=parseFloat(l.trim()).toString(16),s=parseFloat(s.trim()).toString(16),u=u?parseFloat((e=u.trim())!==null&&e!==void 0?e:1):void 0,i.length===1&&(i="0".concat(i)),l.length===1&&(l="0".concat(l)),s.length===1&&(s="0".concat(s)),{hex:"".concat(i).concat(l).concat(s),opacity:u}):n},ee=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:5;return e&&+parseFloat(e).toFixed(t)},wp=["width","height","x","y","opacity","scaleX","scaleY"];function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Lo(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Do(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Do(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ep=function(e,t,n,r){if(e.noEffect)return e.ratio.includes("=")?e.ratio:"gravity=".concat(e.ratio);var o=(r||{}).lockCropAreaAt,i=rn(e,t,n),l=i.x,s=i.y,u=i.width,c=i.height,d=e.ratio===rt?"&radius=".concat(Math.max(u,c),"&force_format=png"):"";if(o){var p=o.split("-"),m=z(p,2),h=m[0],g=m[1],v="".concat(lo[h]).concat(lo[g]);return"gravity=".concat(v,"&aspect_ratio=").concat(ee(typeof e.ratio=="string"?u/c:e.ratio,2)).concat(d)}return"tl_px=".concat(l,",").concat(s,"&br_px=").concat(l+u,",").concat(s+c).concat(d)},Sp=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.width,n=e.height;return"w=".concat(t,"&h=").concat(n)},Ip=function(e){return"r=".concat(-e)},Pp=function(e,t){return"flip=".concat(e?"x":"").concat(t?"y":"")},Cp=function(e){var t,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=n.width,i=n.height,l=n.x,s=n.y,u=n.opacity,c=n.scaleX,d=c===void 0?1:c,p=n.scaleY,m=p===void 0?1:p,h=de(n,wp),g=e.width*e.scaledBy,v=e.height*e.scaledBy,y="wat=1&wat_gravity=absolute&wat_pos=".concat(Math.floor(100*((l-(r.x||0))/g),2),"p,").concat(Math.floor(100*((s-(r.y||0))/v),2),"p");if(n.name===b.TEXT){var E,S=bp(h.fill),k=S.hex,j=S.opacity;return"".concat(y,"&wat_text=").concat(h.text.replaceAll(`
`,""),"&wat_font=").concat(h.fontFamily,"&wat_color=").concat(k,"&wat_opacity=").concat((E=j??u)!==null&&E!==void 0?E:1,"&wat_fontsize=").concat(h.fontSize,"max")}var w=((t=h.image)===null||t===void 0?void 0:t.src)||h.image,P=!w.startsWith("blob:")&&w;return"".concat(y,"&wat_opacity=").concat(u,"&wat_scale=").concat(ee(100*(o*d/g),2),"p,").concat(ee(100*(i*m/v),2),"p").concat(P?"&wat_url=".concat(encodeURIComponent(P)):"")},Zt={Brighten:{cloudimage:{name:"bright",min:-100,max:100},internal:{propName:"brightness",min:-1,max:1}},Contrast:{cloudimage:{name:"contrast",min:-100,max:100},internal:{propName:"contrast",min:-100,max:100}},Blur:{cloudimage:{name:"blur",min:0,max:100},internal:{propName:"blurRadius",min:0,max:100}}},jp=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=[];return e.forEach(function(r){var o=(r.finetuneName||r.name)&&Zt[r.finetuneName||r.name];if(o){var i=ee(Ae(t[o.internal.propName],o.internal.min,o.internal.max,o.cloudimage.min,o.cloudimage.max),2);n.push("".concat(o.cloudimage.name,"=").concat(i))}}),n.join("&")},Tp=function(e,t,n,r,o){var i=e.token,l=e.domain,s=e.dontPrefixUrl,u=e.version,c=e.imageSealing,d=e.secureProtocol,p=t.imgSrc,m=t.adjustments,h=m.crop,g=m.rotation,v=m.isFlippedX,y=m.isFlippedY,E=t.resize,S=E===void 0?{}:E,k=t.finetunes,j=k===void 0?{}:k,w=t.finetunesProps,P=t.annotations,C=P===void 0?{}:P,x=s?"":"http".concat(d?"s":"","://").concat(i,".").concat(l.replace(/^(https?:\/\/)?(www\.)?|^\.|\/$/g,""),"/").concat(u?"".concat(u,"/"):""),T=[];h.width&&h.height&&(h.x||h.x===0)&&(h.y||h.y===0)&&T.push(Ep(h,n,r,o)),(S.width||S.height)&&T.push(Sp(Lo(Lo({},r),S))),g&&T.push(Ip(g)),(v||y)&&T.push(Pp(v,y)),0<j.length&&w&&T.push(jp(j,w)),C[Xe]&&T.push(Cp(n,C[Xe],h)),T.push("ci_url_encoded=1");var N=T.join("&");c.enable&&(N=Op(N,c,p)),N=N.replaceAll(" ","+");var M=!s||p.indexOf("?")===-1?"?":"&";return"".concat(x).concat(s?p:encodeURIComponent(p)).concat(N?"".concat(M).concat(N.replace(/&$/,"")):"")},xp=["filter"];function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ve(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Mo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var gl=function(){var e=X(),t=e.dispatch,n=e.designLayer,r=e.shownImageDimensions,o=e.originalImage,i=e.resize,l=e.adjustments,s=l.crop,u=l.rotation,c=u===void 0?0:u,d=l.isFlippedX,p=l.isFlippedY,m=e.config,h=m.savingPixelRatio,g=m.previewPixelRatio,v=m.forceToPngInEllipticalCrop,y=m.defaultSavedImageType,E=m.useCloudimage,S=m.cloudimage,k=m[b.CROP];return E?function(){var w,P,C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=yt(e);x.filter;var T=de(x,xp),N=Tp(S,T,r,o,k),M=rn({x:s.x,y:s.y,width:s.width,height:s.height},r,o),F={cloudimageUrl:N,width:(C==null||(w=C.size)===null||w===void 0?void 0:w.width)||M.width,height:(C==null||(P=C.size)===null||P===void 0?void 0:P.height)||M.height};return{imageData:F,designState:T}}:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},P=1<arguments.length&&arguments[1]!==void 0&&arguments[1],C=2<arguments.length&&arguments[2]!==void 0&&arguments[2],x=Ve({size:i},w);se.pixelRatio=P||h;var T=n.attrs,N=T.clipWidth,M=T.clipHeight,F=T.clipX,_=T.clipY;n.setAttr("isSaving",!0);var R=n.getStage().clone({width:o.width,height:o.height,scaleX:d?-1:1,scaleY:p?-1:1}),W=z(R.children,1),D=W[0];R.children[1].destroy();var $=R.findOne("#".concat(Qa));$.cache();var L={x:R.width()/r.width,y:R.height()/r.height};D.setAttrs({rotation:0,offsetX:0,offsetY:0,x:0,y:0,scaleX:L.x,scaleY:L.y});var G=Ve(Ve({},(!x.name||!x.extension)&&ml(o.name,v&&s.ratio===rt?"png":ht.includes(y==null?void 0:y.toLowerCase())&&y)),x),te=G.name,K=G.extension,re=G.quality,ue=re===void 0?92:re,oe=G.size,ie=oe===void 0?{}:oe,Y=["jpeg","jpg","webp"].includes(K),V=rn(s.noEffect?{x:0,y:0}:{x:s.x||F,y:s.y||_,width:s.width||N,height:s.height||M},r,R.attrs),q=He(V.width,V.height,c);if(R.setAttrs({offsetX:V.width/2+V.x,offsetY:V.height/2+V.y,width:q.width,height:q.height,x:q.width/2,y:q.height/2,rotation:c}),ie.width){var pe=(d?-1:1)*(ie.width/R.width());R.setAttrs({scaleX:pe,width:ie.width,x:R.x()*Math.abs(pe)})}if(ie.height){var Q=(p?-1:1)*(ie.height/R.height());R.setAttrs({scaleY:Q,height:ie.height,y:R.y()*Math.abs(Q)})}var U=Ve({mimeType:"image/".concat(K==="jpg"?"jpeg":K)},Y?{quality:ue}:{}),B=R.toCanvas(U),ye=R.toDataURL(U),ae=Ve(Ve({},yt(e)),{},{shownImageDimensions:{width:e.shownImageDimensions.width,height:e.shownImageDimensions.height,scaledBy:e.shownImageDimensions.scaledBy}});ae.filter&&(ae.filter=ae.filter.filterName||ae.filter.name),ae.finetunes=ae.finetunes.map(function(Be){return Be.finetuneName||Be.name}),Object.keys(ae.annotations).forEach(function(Be){var Et,je=ae.annotations[Be],qe=je.name===b.IMAGE&&((Et=je.image)===null||Et===void 0?void 0:Et.src);qe&&qe.startsWith("blob:")?ae.annotations[Be].image=fp(je.image):je.image instanceof HTMLImageElement&&(ae.annotations[Be].image=qe)});var Ce=Ve({fullName:"".concat(te,".").concat(K),name:te,extension:K,mimeType:"image/".concat(K),imageCanvas:B,imageBase64:ye,width:ie.width||V.width,height:ie.height||V.height},Y?{quality:ue}:{});n.setAttr("isSaving",!1),t({type:ts}),$.clearCache(),se.pixelRatio=g;var wt=function(){t({type:un})};return C||wt(),{imageData:Ce,designState:ae,hideLoadingSpinner:wt}}},kp=A.div.withConfig({componentId:"sc-dwg14p-0"})(["width:fit-content;margin:0 auto;max-width:99.5%;max-height:170px;[data-phone='true'] &{padding:0;margin-top:8px;max-height:initial;}"]),Ap=A.div.withConfig({componentId:"sc-dwg14p-1"})(["padding:8px 16px 16px 16px;display:flex;gap:12px;align-items:center;overflow:hidden;",""],function(e){var t=e.isPhoneScreen;return t&&`
    justify-content: space-between;
    padding: 12px;
    gap: 8px;
  `}),Np=A.div.withConfig({componentId:"sc-dwg14p-2"})(function(e){var t=e.theme,n=e.isPhoneScreen;return`
    display: flex;
    gap: 6px;
    border-radius: 2px;
    align-items: center;
    justify-content: center;
    padding: 8px 12px;

    svg {
      color: `.concat(t.palette[Z.IconsPrimary],`;
    }

    &,
    * {
      cursor: pointer;
    }

    &:hover {
      `).concat(!n&&"background: ".concat(t.palette["bg-primary-active"],";"),`
    }

    &[aria-selected='true'] {
      `).concat(!n&&"background: ".concat(t.palette["bg-primary-active"],";"),`
      border-radius: 4px;

      * {
        color: `).concat(t.palette["accent-primary-active"],`;
      }
    }

    `).concat(n&&Ge(["display:flex;flex-direction:column;min-width:52px;min-height:52px;padding:8px;gap:4px;"]),`
  `)}),zr=A(ce).withConfig({componentId:"sc-dwg14p-3"})(function(e){var t=e.theme,n=e.isPhoneScreen;return Ge(["color:",";",";"],t.palette[Z.TextPrimary],n&&t.typography.font[Pe.LabelExtraSmallUp])}),_p=A.div.withConfig({componentId:"sc-dwg14p-4"})(["position:relative;width:100%;transition:max-height 100ms ease-in-out;display:flex;justify-content:center;align-items:center;gap:24px;",";",""],function(e){return`
      max-height: `.concat(e.hasChildren?"56px":0,`;
      margin: `).concat(e.hasChildren?"0 auto 8px":0,`;
    `)},function(e){var t=e.isPhoneScreen;return t&&`
    max-height: unset;
    flex-direction: column;
    padding: 0 12px 8px 12px;
    gap: 8px;
    margin: 0;
  `}),hl=function(e){var t=e.id,n=e.label,r=e.onClick,o=e.Icon,i=e.isSelected,l=e.children,s=e.className,u=Te(320);return a.createElement(Np,{className:s,onClick:function(d){r(t,d)},"aria-selected":i,isPhoneScreen:u},a.createElement(o,{size:u?20:16}),n&&a.createElement(zr,{isPhoneScreen:u},n),l)};hl.defaultProps={isSelected:!1,id:void 0,children:null,label:""};const he=O.memo(hl);var vl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_brightness-tool-button",id:b.BRIGHTNESS,label:r("brightnessTool"),Icon:ks,onClick:t,isSelected:n})};vl.defaultProps={isSelected:!1};var Rp=A(As).withConfig({componentId:"sc-1wort0h-0"})(["width:",";max-width:",";user-select:none;padding:0;margin-bottom:",";.SfxSlider-annotation{display:none;}.SfxSlider-thumb{background-color:",";}.SfxSlider-Track{height:2px;color:",";}.SfxSlider-rail{height:2px;background-color:",";}"],function(e){var t=e.width;return t||"104px"},function(e){var t=e.width;return t||"104px"},function(e){var t=e.noMargin;return t?"":"16px"},function(e){var t=e.theme.palette;return t[Z.AccentStateless]},function(e){var t=e.theme.palette;return t[Z.AccentStateless]},function(e){var t=e.theme.palette;return t[Z.BordersItem]}),Fp=["onChange"],ge=function(e){var t=e.onChange,n=de(e,Fp);return a.createElement(Rp,ve({annotation:"",onChange:function(o,i){return t?t(i):void 0}},n))},Dp=A.div.withConfig({componentId:"sc-1rfxjvn-0"})(["display:flex;width:100%;justify-content:space-between;gap:10px;.SfxSlider-root{min-width:100px;}",""],function(e){var t=e.isPhoneScreen;return t&&`
      flex-direction: column;

      .SfxSlider-root {
        min-width: 230px;
      }
    `}),Qe=A.div.withConfig({componentId:"sc-1rfxjvn-1"})(["display:flex;flex-direction:column;"]),Je=A(ce).withConfig({componentId:"sc-1rfxjvn-2"})(["",";"],function(e){var t=e.theme;return t.typography.font[Pe.LabelExtraSmallUp]}),et=A.div.withConfig({componentId:"sc-1rfxjvn-3"})(["display:flex;align-items:center;"]),tt=A(Ba).withConfig({componentId:"sc-1rfxjvn-4"})(["display:inline-block;width:40px;height:28px;padding:6px 2px;margin-left:10px;border:none;.SfxInput-Base{text-align:center;}"]),Bo=-1,En={brightness:0},$o=1,Lp={width:150,padding:0,margin:0},Mp=function(e){var t,n,r=e.t,o=Dt(se.Filters.Brighten,En),i=z(o,2),l=i[0],s=i[1],u=function(c){s({brightness:me(c,Bo,$o)})};return a.createElement(Qe,{className:"FIE_brightness-option-wrapper"},a.createElement(Je,{className:"FIE_brightness-option-label"},r("brightness")),a.createElement(et,null,a.createElement(ge,{className:"FIE_brightness-option",min:Bo,step:.05,max:$o,width:"124px",value:(t=l.brightness)!==null&&t!==void 0?t:En.brightness,onChange:u,style:Lp}),a.createElement(tt,{value:(n=l.brightness)!==null&&n!==void 0?n:En.brightness,onChange:function(d){var p=d.target.value;return u(p)}})))},on=function(e,t){return Math.min(e.width/t.width,e.height/t.height)||Le},Wo=[{titleKey:"custom",ratio:tl,icon:Ns,hide:function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=t.lockCropAreaAt;return n}},{titleKey:"original",ratio:Nt,icon:_s},{titleKey:"landscape",descriptionKey:"16:9",ratio:ee(16/9),icon:Rs},{titleKey:"portrait",descriptionKey:"9:16",ratio:ee(9/16),icon:Fs},{titleKey:"ellipse",ratio:rt,icon:Ds}],Bp=A.div.withConfig({componentId:"sc-ldar2z-0"})(["display:flex;"]),$p=A(De).withConfig({componentId:"sc-ldar2z-1"})(["margin:0 0 0 6px;padding:0;"]),yl=A.div.withConfig({componentId:"sc-ldar2z-2"})(["svg,span{vertical-align:middle;}"]),Wp=A(ce).withConfig({componentId:"sc-ldar2z-3"})(["cursor:pointer;",""],function(e){var t=e.theme.typography;return t.font[Pe.InputSm]}),zp=A.div.withConfig({componentId:"sc-ldar2z-4"})(["min-width:270px;border-radius:4px;overflow:hidden;background-color:",";"],function(e){var t=e.theme.palette;return t[Z.BackgroundStateless]}),Ol=A(Rt).withConfig({componentId:"sc-ldar2z-5"})(["display:flex;gap:10px;justify-content:flex-start;align-items:center;border-radius:4px;padding:8px 16px;"," ",""],function(e){var t=e.isAccordion;return t&&"padding-left: 22px;"},function(e){var t=e.isListItem;return t&&"padding: 0;"}),Xp=A(ce).withConfig({componentId:"sc-ldar2z-6"})(function(e){var t=e.theme;return Ge(["color:",";",";"],t.palette[Z.TextPrimary],t.typography.font[Pe.InputMd])}),Hp=A(Ls).withConfig({componentId:"sc-ldar2z-7"})(function(e){var t=e.theme;return Ge([".SfxAccordionHeader-icon{padding-left:0;}.SfxAccordionHeader-label{",";color:",";}.SfxAccordionHeader-root{display:flex;flex-direction:row-reverse;width:fit-content;gap:10px;}"],t.typography.font[Pe.LabelMediumEmphasis],t.palette[Z.TextPrimary])}),Xr=function(e){var t=e.titleKey,n=e.description,r=e.ratio,o=e.onClick,i=e.Icon,l=e.isActive,s=e.isAccordion,u=e.theme,c=e.width,d=e.height,p=e.t,m=e.disableManualResize,h=e.noEffect;return a.createElement(Ol,{active:l,onClick:function(v){return o(v,r,{ratioTitleKey:t,width:c,height:d,disableManualResize:m,noEffect:h})},isAccordion:s},i&&a.createElement(yl,null,typeof i=="string"?a.createElement("span",{dangerouslySetInnerHTML:{__html:i}}):a.createElement(i,{color:u.palette["icon-primary"]})),a.createElement(Xp,null,p(t)),n&&a.createElement(Wp,null,n))};Xr.defaultProps={Icon:void 0,width:void 0,height:void 0,disableManualResize:!1,isAccordion:!1,noEffect:!1};function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Xo(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?zo(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Gp=function(e){var t=e.groupTitleKey,n=e.items,r=e.onItemSelect,o=e.t,i=e.isExpanded,l=e.setExpandedGroup,s=X(),u=s.adjustments.crop,c=u.ratio,d=u.ratioGroupKey,p=u.ratioTitleKey,m=s.theme,h=function(g,v,y){r(g,v,Xo(Xo({},y),{},{ratioGroupKey:t}))};return a.createElement(Hp,{label:o(t),onChange:function(){l(i?null:t)},expanded:i},n.map(function(g){var v=g.titleKey,y=g.ratio,E=g.width,S=g.height,k=g.descriptionKey,j=g.icon,w=g.disableManualResize,P=g.noEffect,C=y??ee(E/S);return a.createElement(Xr,{key:v,titleKey:v,t:o,description:o(k),size:"sm",onClick:h,width:E,height:S,ratio:C,Icon:j,theme:m,isAccordion:!0,disableManualResize:w,isActive:c===C&&p===v&&d===t,noEffect:P})}))};function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Go(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ho(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ho(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var bl=function(e){var t=e.titleKey,n=e.Icon,r=e.theme,o=e.groups,i=e.onItemSelect,l=e.t,s=X(),u=s.adjustments.crop,c=u.ratioFolderKey,d=u.ratioGroupKey,p=O.useState(""),m=z(p,2),h=m[0],g=m[1],v=function(y,E,S){i(y,E,Go(Go({},S),{},{ratioFolderKey:t}))};return a.createElement(Ol,{isListItem:!0,list:[{content:l(t),key:t,active:t===c,prefix:n&&a.createElement(yl,null,typeof n=="string"?a.createElement("span",{dangerouslySetInnerHTML:{__html:n}}):a.createElement(n,{color:r.palette["icon-primary"]})),subList:o.map(function(y){var E=y.titleKey,S=y.items;return{content:a.createElement(Gp,{groupTitleKey:E,setExpandedGroup:g,isExpanded:h===""?d===E:h===E,t:l,items:S,onItemSelect:v}),key:E,disableHover:!0}}),subMenuProps:{style:{backgroundColor:r.palette[Z.BackgroundStateless]}}}]})};bl.defaultProps={Icon:void 0};var wl=function(e){var t=e.anchorEl,n=e.onClose,r=X(),o=r.dispatch,i=r.t,l=r.adjustments,s=l===void 0?{}:l,u=s.crop,c=u===void 0?{}:u,d=c.ratio,p=c.ratioTitleKey,m=c.ratioFolderKey,h=r.shownImageDimensions,g=r.config,v=r.theme,y=g[b.CROP],E=Te(),S=O.useMemo(function(){var j=y.presetsItems,w=j===void 0?[]:j,P=y.presetsFolders,C=P===void 0?[]:P,x=y.lockCropAreaAt,T=x?Wo.filter(function(N){var M;return!((M=N.hide)!==null&&M!==void 0&&M.call(N,{lockCropAreaAt:x}))}):Wo;return[].concat(be(C),be(T),be(w))},[y]),k=function(j,w,P){j.stopPropagation();var C={ratio:w,ratioTitleKey:P.ratioTitleKey,ratioGroupKey:P.ratioGroupKey,ratioFolderKey:P.ratioFolderKey,noEffect:P.noEffect};o({type:Vr,payload:C}),y.autoResize&&(o({type:gt,payload:{width:P.width,height:P.height,manualChangeDisabled:P.disableManualResize}}),o({type:bt,payload:{factor:P.width>h.width||P.height>h.height?on(h,P):Le}})),n()};return a.createElement(a.Fragment,null,a.createElement(Bp,null,a.createElement(zr,{className:"FIE_crop-tool-label FIE_selected-crop-preset-label",isPhoneScreen:E},i(p||"cropTool")),a.createElement($p,{className:"FIE_crop-presets-opener-button",color:"link-secondary",size:"lg"},t?a.createElement(Ms,{size:10}):a.createElement(Bs,{size:10}))),a.createElement(Ft,{className:"FIE_crop-presets-menu",anchorEl:t,enableOverlay:!0,onClose:n,open:!!t,position:"top",popperOptions:{modifiers:[{name:"offset",options:{offset:[0,4]}}]},maxHeight:"100%"},a.createElement(zp,null,S.map(function(w){var P=w.titleKey,C=w.descriptionKey,x=w.ratio,T=w.width,N=w.height,M=w.groups,F=w.icon,_=w.disableManualResize,R=w.noEffect;return M?a.createElement(bl,{key:P,titleKey:P,groups:M,Icon:F,theme:v,onItemSelect:k,t:i,disableManualResize:_}):a.createElement(Xr,{key:x,ratio:x??ee(T/N),titleKey:P,t:i,description:i(C),Icon:F,isActive:(d||Nt)===(x??ee(T/N))&&!m,theme:v,width:T,height:N,onClick:k,disableManualResize:_,noEffect:R})}))))};wl.defaultProps={anchorEl:null};var El=function(e){var t=e.selectTool,n=e.isSelected,r=X(),o=r.config,i=r.t,l=O.useState(),s=z(l,2),u=s[0],c=s[1];return a.createElement(he,{className:"FIE_crop-tool",id:b.CROP,Icon:$s,onClick:function(p,m){t(p),c(m.currentTarget)},isSelected:n},o[b.CROP].noPresets?a.createElement(zr,{className:"FIE_crop-tool-label"},i("cropTool")):a.createElement(wl,{anchorEl:u,onClose:function(){c(null)}}))};El.defaultProps={isSelected:!1};var Kp={transform:"scaleX(-1)"},Sl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t,o=X(),i=o.dispatch,l=o.adjustments.isFlippedX,s=Te(320),u=O.useMemo(function(){return{reverseLabelOfCurrXFlipDir:r(l?"unFlipX":"flipX"),reverseIconOfCurrXFlipDir:function(){return a.createElement(Ws,{size:s?20:16,style:l?Kp:void 0})}}},[l]),c=u.reverseLabelOfCurrXFlipDir,d=u.reverseIconOfCurrXFlipDir,p=O.useCallback(function(){i({type:qr,payload:{direction:Un.X}})},[]),m=O.useCallback(function(h){t(h),p()},[]);return a.createElement(he,{className:"FIE_flip-x-tool-button",id:b.FLIP_X,label:c,Icon:d,onClick:m,isSelected:n})};Sl.defaultProps={isSelected:!1};var Yp={transform:"scaleY(-1)"},Il=function(e){var t=e.selectTool,n=e.isSelected,r=e.t,o=X(),i=o.dispatch,l=o.adjustments.isFlippedY,s=Te(320),u=O.useMemo(function(){return{reverseLabelOfCurrXFlipDir:r(l?"unFlipY":"flipY"),reverseIconOfCurrXFlipDir:function(){return a.createElement(zs,{size:s?20:16,style:l?Yp:void 0})}}},[l]),c=u.reverseLabelOfCurrXFlipDir,d=u.reverseIconOfCurrXFlipDir,p=O.useCallback(function(){i({type:qr,payload:{direction:Un.Y}})},[]),m=O.useCallback(function(h){t(h),p()},[]);return a.createElement(he,{className:"FIE_flip-y-tool-button",id:b.FLIP_Y,label:c,Icon:d,onClick:m,isSelected:n})};Il.defaultProps={isSelected:!1};var Pl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_rotate-tool-button",id:b.ROTATE,label:r("rotateTool"),Icon:Xs,onClick:t,isSelected:n})};Pl.defaultProps={isSelected:!1};var Up=A.div.withConfig({componentId:"sc-wbx58r-0"})(["display:flex;align-items:center;gap:16px;"]),qp=A(Hs).withConfig({componentId:"sc-wbx58r-1"})([".SfxRotationSlider-control{width:1px;height:10px;background-color:",";&:before{box-shadow:unset;}}.SfxRotationSlider-mark,.SfxRotationSlider-small-dot-wrapper{padding:0;.SfxRotationSlider-mark-text{top:10px;}.SfxRotationSlider-big-dot{width:4px;height:4px;}.SfxRotationSlider-small-dot{width:1px;height:1px;}}.SfxRotationSlider-list{gap:4px;}"],function(e){var t=e.theme.palette;return t[Z.IconsSecondary]}),Vp=A(ze).withConfig({componentId:"sc-wbx58r-2"})([""]),Zp=function(){var e=X(),t=e.dispatch,n=e.adjustments.rotation,r=n===void 0?0:n,o=e.resize,i=o===void 0?{}:o,l=e.config,s=l[b.ROTATE],u=Te(),c=fl(function(d,p){var m=me(p,-180,180);if(t({type:ql,payload:{rotation:m}}),i.width&&i.height){var h=He(i.width,i.height,m);t({type:gt,payload:{width:h.width,height:h.height}})}},20);return s.componentType==="buttons"?a.createElement(a.Fragment,null,a.createElement(he,{className:"FIE_rotate_button_left",id:b.IMAGE,label:"-".concat(s.angle,"°"),Icon:Gs,onClick:function(p){var m=r-s.angle;c(p,m)}}),a.createElement(he,{className:"FIE_rotate_button_right",id:b.IMAGE,label:"+".concat(s.angle,"°"),Icon:Ks,onClick:function(p){var m=r+s.angle;c(p,m)}})):a.createElement(Up,null,a.createElement(qp,{className:"FIE_rotate-slider",showCurrentMarkText:!0,min:-180,max:180,step:u?s.angle/3:1,value:r,angle:s.angle||90,onChange:c}),a.createElement(Vp,{size:"sm",color:"basic",onClick:function(p){return c(p,r+90)}},a.createElement(Ys,{width:15})))},Cl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_contrast-tool-button",id:b.CONTRAST,label:r("contrastTool"),Icon:Us,onClick:t,isSelected:n})};Cl.defaultProps={isSelected:!1};var Ko=-100,Sn={contrast:0},Yo=100,Qp={width:150,padding:0,margin:0},Jp=function(e){var t,n,r=e.t,o=Dt(se.Filters.Contrast,Sn),i=z(o,2),l=i[0],s=i[1],u=function(c){s({contrast:me(c,Ko,Yo)})};return a.createElement(Qe,{className:"FIE_contrast-option-wrapper"},a.createElement(Je,{className:"FIE_contrast-option-label"},r("contrastTool")),a.createElement(et,null,a.createElement(ge,{className:"FIE_contrast-option",min:Ko,max:Yo,width:"124px",value:(t=l.contrast)!==null&&t!==void 0?t:Sn.contrast,onChange:u,style:Qp}),a.createElement(tt,{value:(n=l.contrast)!==null&&n!==void 0?n:Sn.contrast,onChange:function(d){var p=d.target.value;return u(p)}})))},jl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_hsv-tool-button",id:b.HSV,label:r("hsvTool"),Icon:qs,onClick:t,isSelected:n})};jl.defaultProps={isSelected:!1};var Ze={hue:0,saturation:0,value:0},Uo={hue:259,saturation:10,value:2},In={padding:0,margin:0},ef=Te(),tf=function(e){var t,n,r,o,i,l,s=e.t,u=Dt(se.Filters.HSV,Ze),c=z(u,2),d=c[0],p=c[1],m=function(h,g){p(f({},h,g>Uo[h]?Uo[h]:+g))};return a.createElement(Dp,{isPhoneScreen:ef},a.createElement(Qe,{className:"FIE_hue-option-wrapper"},a.createElement(Je,{className:"FIE_hue-option-label"},s("hue")),a.createElement(et,null,a.createElement(ge,{className:"FIE_hue-option",min:0,step:1,max:259,value:(t=d.hue)!==null&&t!==void 0?t:Ze.hue,onChange:function(g){return m("hue",g)},style:In}),a.createElement(tt,{value:(n=d.hue)!==null&&n!==void 0?n:Ze.hue,onChange:function(g){var v=g.target.value;return m("hue",v)}}))),a.createElement(Qe,{className:"FIE_saturation-option-wrapper"},a.createElement(Je,{className:"FIE_saturation-option-label"},s("saturation")),a.createElement(et,null,a.createElement(ge,{className:"FIE_saturation-option",min:-2,step:.5,max:10,value:(r=d.saturation)!==null&&r!==void 0?r:Ze.saturation,onChange:function(g){return m("saturation",g)},style:In}),a.createElement(tt,{value:(o=d.saturation)!==null&&o!==void 0?o:Ze.saturation,onChange:function(g){var v=g.target.value;return m("saturation",v)}}))),a.createElement(Qe,{className:"FIE_value-option-wrapper"},a.createElement(Je,{className:"FIE_value-option-label"},s("value")),a.createElement(et,null,a.createElement(ge,{className:"FIE_value-option",min:-2,step:.1,max:2,value:(i=d.value)!==null&&i!==void 0?i:Ze.value,onChange:function(g){return m("value",g)},style:In}),a.createElement(tt,{value:(l=d.value)!==null&&l!==void 0?l:Ze.value,onChange:function(g){var v=g.target.value;return m("value",v)}}))))},Tl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_blur-tool-button",id:b.BLUR,label:r("blurTool"),Icon:Vs,onClick:t,isSelected:n})};Tl.defaultProps={isSelected:!1};var qo=0,Pn={blurRadius:0},Vo=100,nf={width:150,padding:0,margin:0},rf=function(e){var t,n,r=e.t,o=Dt(se.Filters.Blur,Pn),i=z(o,2),l=i[0],s=i[1],u=function(c){s({blurRadius:me(c,qo,Vo)})};return a.createElement(Qe,{className:"FIE_blur-option-wrapper"},a.createElement(Je,{className:"FIE_blur-option-label"},r("blur")),a.createElement(et,null,a.createElement(ge,{className:"FIE_blur-option",min:qo,max:Vo,width:"124px",value:(t=l.blurRadius)!==null&&t!==void 0?t:Pn.blurRadius,onChange:u,style:nf}),a.createElement(tt,{value:(n=l.blurRadius)!==null&&n!==void 0?n:Pn.blurRadius,onChange:function(d){var p=d.target.value;return u(p)}})))},xl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_warmth-tool-button",id:b.WARMTH,label:r("warmthTool"),Icon:Zs,onClick:t,isSelected:n})};xl.defaultProps={isSelected:!1};var Zo=0,Cn={warmth:0},Qo=200,of={width:150,padding:0,margin:0},af=function(e){var t,n,r=e.t,o=Dt(Fr,Cn),i=z(o,2),l=i[0],s=i[1],u=function(c){s({warmth:me(c,Zo,Qo)})};return a.createElement(Qe,{className:"FIE_warmth-option-wrapper"},a.createElement(Je,{className:"FIE_warmth-option-label"},r("warmthTool")),a.createElement(et,null,a.createElement(ge,{className:"FIE_warmth-option",min:Zo,max:Qo,width:"124px",value:(t=l.warmth)!==null&&t!==void 0?t:Cn.warmth,onChange:u,style:of}),a.createElement(tt,{value:(n=l.warmth)!==null&&n!==void 0?n:Cn.warmth,onChange:function(d){var p=d.target.value;return u(p)}})))},lf=A.div.withConfig({componentId:"sc-1nr0bka-0"})(["max-width:680px;min-width:150px;position:relative;overflow:hidden;touch-action:pan-y pinch-zoom;"]),sf=A.ul.withConfig({componentId:"sc-1nr0bka-1"})(["padding:0;margin:0;white-space:nowrap;overflow:hidden;"]),cf=A.li.withConfig({componentId:"sc-1nr0bka-2"})(["padding:4px;display:inline-block;list-style-type:none;user-select:none;"]),kl=Ge(["position:absolute;top:0;height:100%;width:60px;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:1;svg{color:",";}"],function(e){var t=e.theme.palette;return t[Z.IconsSecondary]}),uf=A.div.withConfig({componentId:"sc-1nr0bka-3"})([""," left:0;justify-content:flex-start;background:linear-gradient( 90deg,#ffffff 1.56%,rgba(255,255,255,0.89) 52.4%,rgba(255,255,255,0.532165) 76.04%,rgba(255,255,255,0) 100% );"],kl),df=A.div.withConfig({componentId:"sc-1nr0bka-4"})([""," right:0;justify-content:flex-end;background:linear-gradient( 270deg,#ffffff 1.56%,rgba(255,255,255,0.89) 52.4%,rgba(255,255,255,0.532165) 76.04%,rgba(255,255,255,0) 100% );"],kl),fn=function(e){var t=e.children,n=e.style,r=e.className,o=O.useRef(!1),i=O.useRef(),l=Wr(),s=z(l,1),u=s[0],c=O.useState(!1),d=z(c,2),p=d[0],m=d[1],h=O.useState(!1),g=z(h,2),v=g[0],y=g[1],E=O.Children.toArray(t),S=function(){if(i.current){var C=i.current,x=C.scrollWidth,T=C.offsetWidth,N=C.scrollLeft,M=Math.round(x-T),F=Math.round(M-N);m(0<N),y(0<F)}},k=function(C,x){var T=C.findIndex(function(N){return N.classList.contains("FIE_carousel-item")});T!==-1&&(C[T].scrollIntoView({inline:x,behavior:"smooth",block:"nearest"}),setTimeout(function(){S()},500))},j=function(C){if(o.current){var x,T=(((x=C.touches)===null||x===void 0?void 0:x[0])||C).pageX;i.current.scrollBy(o.current-T,0),o.current=T,pn(S,30)()}},w=function(){o.current=null,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",j),document.removeEventListener("touchcancel",w),document.removeEventListener("touchend",w)},P=function(C){var x;o.current=(((x=C.touches)===null||x===void 0?void 0:x[0])||C).pageX,document.addEventListener("mousemove",j),document.addEventListener("mouseup",w),document.addEventListener("touchmove",j),document.addEventListener("touchcancel",w),document.addEventListener("touchend",w)};return O.useEffect(function(){i.current&&u(i.current,S)},[]),a.createElement(lf,{className:"".concat(r,"-wrapper"),style:n,onMouseDown:P,onTouchStart:P},p&&a.createElement(uf,{className:"FIE_carousel-prev-button",onClick:function(x){var T=Wn(),N=T.topOffset,M=T.leftOffset,F=document.elementsFromPoint(x.pageX+x.currentTarget.offsetWidth-M,x.pageY-N);k(F,"end")}},a.createElement($a,null)),a.createElement(sf,{className:"".concat(r,"-items"),ref:i},E.map(function(C){return a.createElement(cf,{className:"".concat(r,"-item-wrapper FIE_carousel-item"),key:C.key},C)})),v&&a.createElement(df,{className:"FIE_carousel-next-button",onClick:function(x){var T=Wn(),N=T.topOffset,M=T.leftOffset,F=document.elementsFromPoint(x.pageX-x.currentTarget.offsetWidth-M,x.pageY-N);k(F,"start")}},a.createElement(Qs,null)))};fn.defaultProps={style:null};var pf=A.div.withConfig({componentId:"sc-oxugzy-0"})(["display:inline-flex;flex-direction:column;align-items:center;justify-content:center;padding:0px 2px;gap:6px;cursor:pointer;border-radius:2px;canvas{border-radius:2px;}"]),ff=A(Ra).withConfig({componentId:"sc-oxugzy-1"})(["[aria-selected='true'] &{padding:1px;border:1px solid ",";border-radius:2px;}"],function(e){var t=e.theme;return t.palette["accent-primary-active"]}),mf=A(ce).withConfig({componentId:"sc-oxugzy-2"})(function(e){var t=e.theme;return Ge(["color:",";",";[aria-selected='true'] &{color:",";}"],t.palette[Z.TextPrimary],t.typography.font[Pe.LabelExtraSmallUp],t.palette["accent-primary-active"])}),Mt=60,Bt=45,Al=function(e){var t=e.filterLabel,n=e.filterFn,r=e.applyFilter,o=e.isActive,i=e.image,l=O.useRef(),s=O.useCallback(function(){r(n)},[n]),u=O.useCallback(function(){l.current?l.current.cache():setTimeout(u,0)},[]);O.useEffect(function(){return i&&u(),function(){var h;(h=l.current)===null||h===void 0||h.clearCache()}},[i]);var c=i.width/i.height,d=1>c,p=d?Mt:Bt*c,m=d?Mt/c:Bt;return a.createElement(pf,{className:"FIE_filters-item",onClick:s,"aria-selected":o},a.createElement(ff,{className:"FIE_filters-item-preview",width:Mt,height:Bt},a.createElement(Yn,{onTap:s},a.createElement(cn,{image:i,filters:n?[n]:[],width:p,height:m,x:-(p-Mt)/2,y:-(m-Bt)/2,ref:l}))),a.createElement(mf,{className:"FIE_filters-item-label"},t))};Al.defaultProps={filterFn:void 0};const gf=O.memo(Al);var $t=se.Filters,hf=[{label:"Original",filterFn:null},{label:"Invert",filterFn:$t.Invert},{label:"Black & White",filterFn:qn},{label:"Sepia",filterFn:$t.Sepia},{label:"Solarize",filterFn:$t.Solarize},{label:"Clarendon",filterFn:Vn},{label:"Gingham",filterFn:Zn},{label:"Moon",filterFn:Qn},{label:"Lark",filterFn:Jn},{label:"Reyes",filterFn:er},{label:"Juno",filterFn:tr},{label:"Slumber",filterFn:nr},{label:"Crema",filterFn:rr},{label:"Ludwig",filterFn:or},{label:"Aden",filterFn:ir},{label:"Perpetua",filterFn:ar},{label:"Amaro",filterFn:lr},{label:"Mayfair",filterFn:sr},{label:"Rise",filterFn:cr},{label:"Hudson",filterFn:ur},{label:"Valencia",filterFn:dr},{label:"X-Pro II",filterFn:pr},{label:"Sierra",filterFn:fr},{label:"Willow",filterFn:mr},{label:"Lo-Fi",filterFn:gr},{label:"Inkwell",filterFn:$t.Grayscale},{label:"Hefe",filterFn:hr},{label:"Nashville",filterFn:vr},{label:"Stinson",filterFn:yr},{label:"Vesper",filterFn:Or},{label:"Earlybird",filterFn:br},{label:"Brannan",filterFn:wr},{label:"Sutro",filterFn:Er},{label:"Toaster",filterFn:Sr},{label:"Walden",filterFn:Ir},{label:"1977",filterFn:Pr},{label:"Kelvin",filterFn:Cr},{label:"Maven",filterFn:jr},{label:"Ginza",filterFn:Tr},{label:"Skyline",filterFn:xr},{label:"Dogpatch",filterFn:kr},{label:"Brooklyn",filterFn:Ar},{label:"Helena",filterFn:Nr},{label:"Ashby",filterFn:_r},{label:"Charmes",filterFn:Rr}],vf={maxWidth:"100%",width:"100%"},yf=function(){var e=X(),t=e.originalImage,n=Jd(),r=z(n,2),o=r[0],i=r[1];return a.createElement(fn,{className:"FIE_filters",style:vf},hf.map(function(l){return a.createElement(gf,{key:l.label,filterLabel:l.label,filterFn:l.filterFn,applyFilter:i,isActive:o===l.filterFn,image:t})}))},Nl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_text-tool-button",id:b.TEXT,label:r("textTool"),Icon:Js,onClick:t,isSelected:n})};Nl.defaultProps={isSelected:!1};var Of=A.div.withConfig({componentId:"sc-qvjmv1-0"})(["display:flex;align-items:center;justify-content:center;padding:8px 16px;margin-top:4px;gap:8px;flex-wrap:wrap;"," svg{color:",";}"],function(e){var t=e.isPhoneScreen;return t&&`
    max-width: 315px;
    padding: 0;
  `},function(e){var t=e.theme.palette;return t[Z.IconsPrimary]}),bf=A.div.withConfig({componentId:"sc-qvjmv1-1"})(["display:flex;flex-wrap:wrap;margin-left:-4px;gap:4px;.FIE_annotation-option-triggerer{padding:6px;}"]),an=A.div.withConfig({componentId:"sc-qvjmv1-2"})(["background:",";border-radius:4px;display:flex;flex-direction:column;padding:8px 12px;overflow:visible;"," "," *{font-family:'Roboto',sans-serif;}"],function(e){var t=e.theme;return t.palette["bg-secondary"]},function(e){var t=e.position;return t&&`
    display: grid;
    grid-template-columns: repeat(4, auto);
    padding: 0;
    margin-top: 8px;
    box-shadow: 0px 1px 2px `.concat(function(n){var r=n.theme;return r.palette["light-shadow"]},`;
    `)},function(e){var t=e.disablePadding;return t&&`
      padding: 0;
    `}),Ue=A.div.withConfig({componentId:"sc-qvjmv1-3"})(["display:flex;align-items:center;gap:8px;",""],function(e){var t=e.preventFlex;return t&&`
      display: block;
  
      label {
        margin-bottom: 8px;
      }
  `}),Jo=A.div.withConfig({componentId:"sc-qvjmv1-4"})(["display:flex;align-items:center;justify-content:space-between;"]),Wt=A.div.withConfig({componentId:"sc-qvjmv1-5"})(["&:not(:first-child){margin-left:12px;}"]),We=A.div.withConfig({componentId:"sc-qvjmv1-6"})(function(e){var t=e.theme,n=e.addThinBorder,r=e.secondaryIconColor,o=e.active,i=e.watermarkTool;return`
    cursor: pointer;
    padding: `.concat(i?"6px":"8px 12px",`;
    border-radius: 2px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;

    svg {
      vertical-align: middle;
      margin: 0 auto;
    }

    `).concat(n?"border: 0.5px solid ".concat(t.palette["borders-secondary"],`;
        padding: 8px 8px;`):"",`;
    color: `).concat(r?t.palette[Z.IconsSecondary]:"",`;

    `).concat(o&&`
      border-radius: 4px;
      border-color: `.concat(t.palette[Z.AccentStateless],`;
      background-color: `).concat(t.palette[Z.BackgroundActive],`;

        * {
          color: `).concat(t.palette[Z.AccentStateless],`;
        }
      `),`

    :hover {
      background: `).concat(t.palette["bg-primary-active"],`;
    }
  `)}),_l=A(ce).withConfig({componentId:"sc-qvjmv1-7"})(["color:",";"],function(e){var t=e.theme.palette;return t[Z.TextPrimary]}),wf=0,Ef=1,Sf=function(e){var t=e.annotation,n=e.updateAnnotation,r=e.t,o=t.opacity,i=Math.round(100*o);return a.createElement(an,{disablePadding:!0},a.createElement(ce,null,r("transparency")),a.createElement(Ue,null,a.createElement(ge,{annotation:"%",onChange:function(s){n({opacity:me(s/100,wf,Ef)})},value:i,noMargin:!0}),a.createElement(_l,null,"".concat(i,"%"))))},If=A(Wa).withConfig({componentId:"sc-7tf41j-0"})(["max-width:350px;"]),Pf=A.div.withConfig({componentId:"sc-7tf41j-1"})([".SfxColorPicker-root{max-width:100%;padding:0;box-shadow:none;border:none;","}.SfxColorPicker-action{display:flex;gap:12px;.SfxColorPicker-select{width:100px;}.SfxInput-root{width:190px !important;}}.SfxColorPicker-icon{color:",";}.SfxColorPicker-range-picker,.SfxColorPicker-bar-wrapper{width:100%;}"],function(e){var t=e.hideModalTitle;return t&&"padding-top: 12px;"},function(e){var t=e.theme.palette;return t[Z.IconsPrimary]}),Cf=A(za).withConfig({componentId:"sc-7tf41j-2"})(["gap:12px;padding:24px;.SfxButton-root{flex:1;margin:0;height:40px;}"]),jn={ColorPickerModal:If,ColorPickerWrap:Pf,ModalActions:Cf},jf={zIndex:1301},Rl=function(e){var t=e.hideModalTitle,n=e.defaultColor,r=n===void 0?"":n,o=e.onChange,i=e.open,l=e.pinnedColors,s=e.onClose,u=X(),c=u.t;return i?a.createElement(jn.ColorPickerModal,{onClose:s,open:i,fullWidth:!0,modalStyles:jf},!t&&a.createElement(Xa,{onClose:s,primary:c("colorPickerModalTitleLabel","Pick color"),icon:a.createElement(ec,{size:29}),iconShadow:!0,variant:"with-icon"}),a.createElement(Ha,null,a.createElement(jn.ColorPickerWrap,{hideModalTitle:t},a.createElement(tc,{onChange:o,pinnedColors:l,defaultColor:r,showTransparentColor:!0}))),a.createElement(jn.ModalActions,null,a.createElement(De,{color:"basic",onClick:s},c("cancel")),a.createElement(De,{color:"primary",onClick:s},c("apply")))):null};Rl.defaultProps={defaultColor:"",pinnedColors:[],onChange:function(){},open:!1,hideModalTitle:!1,onClose:function(){}};var Tf=A.div.attrs(function(e){var t=e.$color;return{style:{background:t==="rgba(0,0,0,0)"?"repeating-conic-gradient(#5d6d7e 0% 25%, transparent 0% 50%) 50% / 8px 8px":t}}}).withConfig({componentId:"sc-zmv0gj-0"})(["background:",";border-radius:4px;width:32px;height:32px;border:1px solid ",";cursor:pointer;box-sizing:border-box;"],function(e){var t=e.theme;return t.palette["icons-primary"]},function(e){var t=e.theme;return t.palette[Z.BorderPrimaryStateless]}),Tn="FIE_pinnedColors",mn=function(e){var t,n=e.onChange,r=e.color,o=e.colorFor,i=X(),l=i.selectionsIds,s=l===void 0?[]:l,u=i.config.annotationsCommon,c=u===void 0?{}:u,d=i.dispatch,p=i.latestColors,m=p===void 0?{}:p,h=m[o],g=O.useState(),v=z(g,2),y=v[0],E=v[1],S=O.useState(function(){return h||r||c.fill}),k=z(S,2),j=k[0],w=k[1],P=O.useState((t=window)!==null&&t!==void 0&&t.localStorage?JSON.parse(localStorage.getItem(Tn)||"[]"):[]),C=z(P,2),x=C[0],T=C[1],N=function(F){var _;if((_=window)!==null&&_!==void 0&&_.localStorage){var R=window.localStorage.getItem(Tn);if(JSON.stringify(F)!==R){var W=F.slice(-9);window.localStorage.setItem(Tn,JSON.stringify(W)),T(W)}}},M=function(F){E(y?null:F.currentTarget)};return O.useEffect(function(){var F=s.length===0&&h||r;w(F),n(F)},[r,s]),a.createElement(a.Fragment,null,a.createElement(Tf,{className:"FIE_color-picker-triggerer",onClick:M,$color:j,onChange:n}),a.createElement(Rl,{hideModalTitle:!0,onChange:function(_,R,W){w(R),n(R),N(W),h!==R&&d({type:ns,payload:{latestColors:f({},o,R)}})},defaultColor:j,pinnedColors:x,open:!!y,onClose:M}))};mn.defaultProps={color:void 0};var xf=0,kf=100,Af=function(e){var t=e.annotation,n=e.updateAnnotation,r=t.stroke,o=t.strokeWidth;return a.createElement(Ue,null,a.createElement(ge,{annotation:"px",onChange:function(l){n({strokeWidth:me(l,xf,kf)})},value:o,noMargin:!0}),a.createElement(mn,{color:r,onChange:function(l){n({stroke:l})},colorFor:"stroke"}))},Nf=function(e){var t=e.annotation,n=e.updateAnnotation,r=e.t,o=t.shadowOffsetX,i=t.shadowOffsetY,l=t.shadowBlur,s=t.shadowColor,u=t.shadowOpacity,c=function(d,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:100;n(f({},d,me(p,m,h)))};return a.createElement(Ue,{preventFlex:!0},a.createElement(ce,null,r("shadow")),a.createElement(Jo,null,a.createElement(Wt,null,a.createElement(ce,null,r("horizontal")),a.createElement(ge,{annotation:"px",min:-100,max:100,onChange:function(p){return c("shadowOffsetX",p,-100,100)},value:o||0,hideTrack:!0})),a.createElement(Wt,null,a.createElement(ce,null,r("vertical")),a.createElement(ge,{annotation:"px",min:-100,max:100,onChange:function(p){return c("shadowOffsetY",p,-100,100)},value:i||0,hideTrack:!0}))),a.createElement(Jo,null,a.createElement(Wt,null,a.createElement(ce,null,r("blur")),a.createElement(ge,{annotation:"%",onChange:function(p){return c("shadowBlur",p)},value:l})),a.createElement(Wt,null,a.createElement(ce,null,r("opacity")),a.createElement(ge,{annotation:"%",onChange:function(p){return c("shadowOpacity",p/100,0,1)},value:Math.round(100*u)}))),a.createElement(mn,{color:s,onChange:function(p){n({shadowColor:p})},colorFor:"shadow"}))},_f=function(e,t,n){var r=e.width,o=e.height,i=e.scaleX,l=i===void 0?1:i,s=e.scaleY,u=s===void 0?1:s,c=e.rotation,d=c===void 0?0:c,p=e.padding,m=p===void 0?0:p,h=e.radius,g=e.radiusX,v=e.radiusY,y=He((r||2*(h||g))*l,(o||2*(h||v))*u,d),E=t.attrs,S=E.clipWidth,k=E.clipHeight,j=E.clipX,w=j===void 0?0:j,P=E.clipY,C=P===void 0?0:P,x={left:w+y.offsetLeft+m,center:w+S/2-(y.width/2-y.offsetLeft)+m,right:w+S-y.width-m+y.offsetLeft},T={top:C+y.offsetTop+m,middle:C+k/2-(y.height/2-y.offsetTop)+m,bottom:C+k-y.height-m+y.offsetTop},N=f(f(f(f(f(f(f(f(f({},fe.TOP_LEFT,function(){return{x:x.left,y:T.top}}),fe.TOP_CENTER,function(){return{x:x.center,y:T.top}}),fe.TOP_RIGHT,function(){return{x:x.right,y:T.top}}),fe.MIDDLE_LEFT,function(){return{x:x.left,y:T.middle}}),fe.MIDDLE_CENTER,function(){return{x:x.center,y:T.middle}}),fe.MIDDLE_RIGHT,function(){return{x:x.right,y:T.middle}}),fe.BOTTOM_LEFT,function(){return{x:x.left,y:T.bottom}}),fe.BOTTOM_CENTER,function(){return{x:x.center,y:T.bottom}}),fe.BOTTOM_RIGHT,function(){return{x:x.right,y:T.bottom}});return N[n]()},ei=Object.values(fe),Rf=f(f(f(f(f(f(f(f(f({},fe.TOP_LEFT,-145),fe.TOP_CENTER,-90),fe.TOP_RIGHT,-45),fe.MIDDLE_LEFT,180),fe.MIDDLE_CENTER,0),fe.MIDDLE_RIGHT,0),fe.BOTTOM_LEFT,135),fe.BOTTOM_CENTER,90),fe.BOTTOM_RIGHT,45),_e={OPACITY:"opacity",STROKE:"stroke",SHADOW:"shadow",POSITION:"position"},Ff=function(e){var t=e.annotation,n=e.updateAnnotation,r=O.useState(null),o=z(r,2),i=o[0],l=o[1],s=X(),u=s.designLayer,c=function(p){n(_f(t,u,p)),l(p)},d=ei.length;return ei.map(function(p,m){return a.createElement(O.Fragment,{key:p},a.createElement(We,{onClick:function(){return c(p)},active:i===p,secondaryIconColor:!0,addThinBorder:!0},p===fe.MIDDLE_CENTER?a.createElement(nc,null):a.createElement(rc,{style:{transform:"rotate(".concat(Rf[p],"deg)")}})),(m+1)%3==0&&m+1!==d&&a.createElement("div",null))})},Df=["children","morePoppableOptionsPrepended","moreOptionsPopupComponentsObj","morePoppableOptionsAppended","annotation","updateAnnotation","hideFillOption","hidePositionField","className"];function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ni(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ti(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ti(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Me=function(e){var t=e.children,n=e.morePoppableOptionsPrepended,r=e.moreOptionsPopupComponentsObj,o=e.morePoppableOptionsAppended,i=e.annotation,l=e.updateAnnotation,s=e.hideFillOption,u=e.hidePositionField,c=e.className,d=de(e,Df),p=O.useState(null),m=z(p,2),h=m[0],g=m[1],v=O.useState(null),y=z(v,2),E=y[0],S=y[1],k=X(),j=k.config.useCloudimage,w=k.t,P=Te(320),C=O.useMemo(function(){return[].concat(be(n),[{titleKey:"opacity",name:_e.OPACITY,Icon:oc}],be(j?[]:[{titleKey:"stroke",name:_e.STROKE,Icon:ic},{titleKey:"shadow",name:_e.SHADOW,Icon:ac}]),[u?void 0:{titleKey:"position",name:_e.POSITION,Icon:lc}])},[n]),x=O.useMemo(function(){return ni(ni({},r),{},f(f(f(f({},_e.OPACITY,Sf),_e.STROKE,Af),_e.SHADOW,Nf),_e.POSITION,Ff),o)},[r]),T=O.useCallback(function(F,_){var R=F==null?void 0:F.currentTarget;g(R),S(_)},[]),N=O.useCallback(function(F){l({fill:F})},[l]),M=h&&E&&x[E];return a.createElement(Of,{className:"FIE_annotations-options".concat(c?" ".concat(c):""),isPhoneScreen:P},!s&&a.createElement(mn,{color:i.fill,onChange:N,colorFor:"fill"}),t,a.createElement(bf,null,C.map(function(F){return F&&a.createElement(We,{className:"FIE_annotation-option-triggerer",key:F.name,title:w(F.titleKey),onClick:function(R){return T(R,F.name)},active:E===F.name},a.createElement(F.Icon,{size:20}))})),M&&a.createElement(Ft,{className:"FIE_annotation-option-popup",anchorEl:h,open:!!h,onClose:T,position:"top"},a.createElement(an,null,E===_e.POSITION?function(){return a.createElement(a.Fragment,null,a.createElement(ce,null,w("position")),a.createElement(an,{position:!0},a.createElement(M,ve({annotation:i,updateAnnotation:l},d))))}():a.createElement(M,ve({annotation:i,updateAnnotation:l},d)))))};Me.defaultProps={children:void 0,morePoppableOptionsPrepended:[],moreOptionsPopupComponentsObj:{},morePoppableOptionsAppended:[],hideFillOption:!1,hidePositionField:!1,className:void 0};var Lf=A(sc).withConfig({componentId:"sc-1cwdnjz-0"})(["width:160px;"]),Mf=A(Ba).withConfig({componentId:"sc-1cwdnjz-1"})(["width:72px;"]),Bf=A.div.withConfig({componentId:"sc-1cwdnjz-2"})(["display:flex;"]),$f=0,Wf=100,ri=1,zf=function(e){var t=e.annotation,n=e.updateAnnotation,r=e.t,o=t.letterSpacing,i=t.lineHeight,l=function(s,u){n(f({},s,me(u,$f,Wf)))};return a.createElement(Ue,{preventFlex:!0},a.createElement(ce,null,r("letterSpacing")),a.createElement(ge,{annotation:"px",isActive:!!o,onChange:function(u){return l("letterSpacing",u)},value:o,step:ri}),a.createElement(ce,null,r("lineHeight")),a.createElement(ge,{annotation:"px",isActive:!!i,onChange:function(u){return l("lineHeight",u)},value:i,step:ri}))},Xf={transform:"scaleX(-1)"},Hf=function(e){var t=e.annotation,n=e.updateAnnotation,r=t.align,o=function(i){n({align:i})};return a.createElement(Ue,null,a.createElement(We,{onClick:function(){return o("left")},active:r==="left"},a.createElement(oo,null)),a.createElement(We,{onClick:function(){return o("center")},active:r==="center"},a.createElement(Ga,null)),a.createElement(We,{onClick:function(){return o("right")},active:r==="right"},a.createElement(oo,{style:Xf})))},Gf=[{titleKey:"textAlignment",name:"text-alignment",Icon:Ga},{titleKey:"textSpacings",name:"text-spacings",Icon:cc}],Kf=f(f({},"text-alignment",Hf),"text-spacings",zf),H,J,At,zn,Xn,Fl=function(e){if(e.target!==H){var t=H.value;ln(),zn(t)}},ln=function(){H&&H.remove(H),window&&window.removeEventListener("click",Fl),J&&J.show(),At&&At.show(),typeof Xn=="function"&&Xn(),J=null,H=null,At=null},Yf=function(e,t,n,r,o){function i(p){var m=p;m||(m=J.placeholder.length*J.fontSize());var h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(h||d)&&(m=Math.ceil(m));var g=document.documentMode||/Edge/.test(navigator.userAgent);g&&(m+=1),H.style.width="".concat(m,"px")}zn=r,Xn=o,At=n,J=t.findOne("#".concat(e)),J.hide(),At.hide();var l=J.absolutePosition();H=document.createElement("textarea"),t.container().parentNode.appendChild(H),H.value=J.text(),H.style.position="absolute",H.style.top="".concat(l.y,"px"),H.style.left="".concat(l.x,"px"),H.style.width="".concat(J.width()-2*J.padding(),"px"),H.style.height="".concat(J.height()-2*J.padding()+5,"px"),H.style.maxWidth="".concat(J.width()-2*J.padding(),"px"),H.style.maxHeight="".concat(J.height()-2*J.padding()+5,"px"),H.style.fontSize="".concat(J.fontSize(),"px"),H.style.border="1px solid rgba(0, 0, 0, 0.5)",H.style.padding="0px",H.style.margin="0px",H.style.overflow="hidden",H.style.background="none",H.style.outline="none",H.style.resize="none",H.style.lineHeight=J.lineHeight(),H.style.fontFamily=J.fontFamily(),H.style.transformOrigin="left top",H.style.textAlign=J.align(),H.style.fontStyle=J.fontStyle(),H.style.letterSpacing=J.letterSpacing(),H.style.lineHeight=J.lineHeight(),H.style.color=J.fill();var s=J.rotation(),u="";s&&(u+="rotateZ(".concat(s,"deg)"));var c=0,d=-1<navigator.userAgent.toLowerCase().indexOf("firefox");d&&(c+=2+Math.round(J.fontSize()/20)),u+="translateY(-".concat(c,"px)"),H.style.transform=u,H.style.height="auto",H.style.height="".concat(H.scrollHeight+3,"px"),H.focus(),H.addEventListener("keydown",function(p){if(p.key==="Enter"&&!p.shiftKey){var m=H.value;ln(),zn(m)}p.key==="Escape"&&ln()}),H.addEventListener("keydown",function(p){if(p.key!=="Enter"&&p.key!=="Escape"){var m=J.getAbsoluteScale().x;i(J.width()*m),H.style.height="auto",H.style.height="".concat(H.scrollHeight+J.fontSize(),"px")}}),window&&setTimeout(function(){window.addEventListener("click",Fl)})},Hr=function(e){var t=e.text,n=e.saveText,r=e.children,o=X(),i=o.dispatch,l=o.textIdOfEditableContent,s=o.designLayer,u=o.t,c=o.config,d=c.useCloudimage,p=c[b.TEXT],m=p.fonts,h=m===void 0?[]:m,g=p.onFontChange,v=O.useCallback(function(j){var w=j.target,P=w.name,C=w.value,x=w.type;n(function(T){return f({id:T.id},P,x==="number"?me(C,1,500):C)})},[n]),y=O.useCallback(function(j){if(v({target:{name:"fontFamily",value:j}}),t.fontFamily!==j&&typeof g=="function"){var w=s.draw.bind(s);g(j,w)}},[v,t,s]),E=O.useCallback(function(j){var w,P=((w=t.fontStyle)===null||w===void 0?void 0:w.replace("normal","").split(" "))||[];0<Object.keys(P).length&&P.includes(j)?P=P.filter(function(C){return C!==j}):P.push(j),v({target:{name:"fontStyle",value:P.join(" ").trim()||"normal"}})},[t]),S=O.useCallback(function(){i({type:Zr,payload:{textIdOfEditableContent:null}})},[]),k=O.useCallback(function(j){v({target:{name:"text",value:j}}),S()},[]);return O.useEffect(function(){var j;if(l&&t.id===l){var w=s.getStage(),P=z(w.findOne("#".concat(Za)).children,1);j=P[0],Yf(l,w,j,k,S)}return function(){j&&l&&ln()}},[l]),a.createElement(Me,{className:"FIE_text-tool-options",annotation:t,updateAnnotation:n,morePoppableOptionsPrepended:d?[]:Gf,moreOptionsPopupComponentsObj:d?{}:Kf,t:u},Array.isArray(h)&&1<h.length&&a.createElement(Lf,{className:"FIE_text-font-family-option",onChange:y,value:t.fontFamily,placeholder:u("fontFamily"),size:"sm"},h.map(function(){var j,w,P,C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return a.createElement(Rt,{className:"FIE_text-font-family-item",key:(j=C.value)!==null&&j!==void 0?j:C,value:(w=C.value)!==null&&w!==void 0?w:C},(P=C.label)!==null&&P!==void 0?P:C)})),a.createElement(Mf,{className:"FIE_text-size-option",value:t.fontSize||"",name:"fontSize",onChange:v,inputMode:"numeric",type:"number",size:"sm",placeholder:u("size")}),a.createElement(Bf,null,!d&&a.createElement(a.Fragment,null,a.createElement(We,{className:"FIE_text-bold-option",active:(t.fontStyle||"").includes("bold"),onClick:function(){return E("bold")},watermarkTool:!0},a.createElement(uc,{size:20})),a.createElement(We,{className:"FIE_text-italic-option",active:(t.fontStyle||"").includes("italic"),onClick:function(){return E("italic")},watermarkTool:!0},a.createElement(dc,{size:20}))),r))};Hr.defaultProps={children:null};var Uf=function(e){var t=e.t,n=Ye({name:b.TEXT}),r=z(n,2),o=r[0],i=r[1];return a.createElement(Hr,{text:o,saveText:i,t})},Dl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_image-tool-button",id:b.IMAGE,label:r("imageTool"),Icon:pc,onClick:t,isSelected:n})};Dl.defaultProps={isSelected:!1};var qf=A.input.withConfig({componentId:"sc-h20emh-0"})(["display:none;width:1px;height:1px;position:absolute;z-index:-1;"]),Vf=function(e,t){return a.createElement(qf,ve({type:"file",ref:t},e))};const Ll=O.forwardRef(Vf);var Zf=A.div.withConfig({componentId:"sc-m9ezm7-0"})(["display:flex;align-items:center;margin-left:",";flex-shrink:0;"],function(e){var t=e.noMargin;return t?"0":"12px"}),Qf=A(De).withConfig({componentId:"sc-m9ezm7-1"})(["flex-grow:1;justify-content:center;align-items:center;"]),Jf=A(Ft).withConfig({componentId:"sc-m9ezm7-2"})(["padding:8px;background-color:",";"],function(e){var t=e.theme.palette;return t[Z.BackgroundStateless]}),em=A(Rt).withConfig({componentId:"sc-m9ezm7-3"})(["border-radius:4px;"]),tm=A(fc).withConfig({componentId:"sc-m9ezm7-4"})(["display:flex;align-items:center;"]),gn=function(e){var t=e.onClick,n=e.title,r=e.label,o=e.color,i=e.menuFromBtn,l=e.menuItems,s=e.menuPosition,u=s===void 0?"bottom":s,c=e.disabled,d=c!==void 0&&c,p=e.className,m=e.menuStyle,h=e.wrapperStyle,g=e.buttonRef,v=e.noMargin,y=X(),E=y.t,S=O.useRef(!0),k=O.useState(null),j=z(k,2),w=j[0],P=j[1],C="sm",x=l.filter(Boolean),T=1<x.length,N=function(_){S.current&&P(_.currentTarget)},M=function(){S.current&&P(null)},F=function(_){typeof _=="function"&&_(),M()};return O.useEffect(function(){return S.current=!0,function(){S.current=!1}},[]),a.createElement(a.Fragment,null,a.createElement(Zf,{className:"".concat(p,"-wrapper"),style:h,ref:g,noMargin:v},a.createElement(Qf,{className:"".concat(p,"-button"),color:o,size:C,title:n,onClick:d?void 0:function(R){var W;return i&&T?void N(R):void(typeof t=="function"?t():(W=x[0])!==null&&W!==void 0&&W.onClick&&x[0].onClick())},disabled:d},r||E("saveAs"))),T&&a.createElement(Jf,{className:"".concat(p,"-menu"),anchorEl:w,onClose:M,open:!0,style:m,position:u},l.map(function(_){return _&&a.createElement(em,{className:"".concat(p,"-menu-item"),key:_.key,active:_.isActive,onClick:function(){return F(_.onClick)},size:C},_.icon&&a.createElement(tm,{size:C},typeof _.icon=="string"?a.createElement("span",{dangerouslySetInnerHTML:{__html:_.icon}}):a.createElement(_.icon,null)),a.createElement(Ka,null,_.label))})))};gn.defaultProps={title:"",label:"",color:"primary",menuFromBtn:!1,noMargin:!1,menuPosition:"bottom",onClick:void 0,disabled:!1,menuStyle:void 0,wrapperStyle:void 0,buttonRef:void 0};var Gr=function(e){var t=e.image,n=e.saveImage,r=e.children,o=e.t;return a.createElement(Me,{className:"FIE_image-tool-options",annotation:t,updateAnnotation:n,t:o,hideFillOption:!0},r)};Gr.defaultProps={children:null};var nm=A.div.withConfig({componentId:"sc-dqni47-0"})(["background:",";box-shadow:0px 1px 2px ",";border-radius:4px;padding:8px;overflow-y:auto;max-height:350px;max-width:300px;"],function(e){var t=e.theme;return t.palette["bg-secondary"]},function(e){var t=e.theme;return t.palette["light-shadow"]}),rm=A.div.withConfig({componentId:"sc-dqni47-1"})(["display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;margin:4px;padding:4px;cursor:pointer;border-radius:4px;border:2px solid ",";user-select:none;:hover{border-color:",";}img{width:100%;height:100%;object-fit:contain;}"],function(e){var t=e.theme;return t.palette["bg-primary-active"]},function(e){var t=e.theme;return t.palette["accent-primary-active"]}),Ml=function(e){var t=e.gallery,n=e.anchorEl,r=e.onClose,o=e.onSelect;return a.createElement(mc,{className:"FIE_image-tool-gallery",anchorEl:n,open:!!n,position:"top",onClick:r,overlay:!0},a.createElement(nm,null,t.map(function(i){var l=i.originalUrl,s=i.previewUrl;return a.createElement(rm,{key:l,onClick:function(){return o(l)}},a.createElement("img",{src:s,alt:s,crossOrigin:"Anonymous",draggable:!1}))})))};Ml.defaultProps={gallery:[],anchorEl:null};var oi=.15,om=function(){var e=O.useState(),t=z(e,2),n=t[0],r=t[1],o=O.useState(null),i=z(o,2),l=i[0],s=i[1],u=O.useRef(),c=O.useRef(),d=X(),p=d.shownImageDimensions,m=d.dispatch,h=d.adjustments.crop,g=h===void 0?{}:h,v=d.t,y=d.config,E=y===void 0?{}:y,S=E[b.IMAGE],k=!S.disableUpload,j=Array.isArray(S.gallery)&&0<S.gallery.length,w=Ye({name:b.IMAGE,opacity:1},!1),P=z(w,3),C=P[0],x=P[1],T=P[2],N=O.useRef(0),M=function($){var L=g.width||p.width,G=g.height||p.height,te=g.x||0,K=g.y||0,re=Math.min(1,L/($.width+$.width*oi),G/($.height+$.height*oi));T({image:$,x:te+L/2-$.width*re/2,y:K+G/2-$.height*re/2,width:$.width*re,height:$.height*re})},F=function($){N.current+=1,N.current===$&&(N.current=0,r(!1))},_=function($){m({type:Ke,payload:{feedback:{message:$,status:vt.WARNING}}})},R=function(){u.current&&u.current.click()},W=function(){s(c.current)},D=O.useMemo(function(){return[k&&{key:"add-by-upload-image",label:v(n?"importing":"uploadImage"),icon:gc,onClick:n?void 0:R},j&&{key:"add-from-gallery",label:v("fromGallery"),icon:hc,onClick:W}]},[S,n,v]);return a.createElement(Gr,{image:C,saveImage:x,t:v},a.createElement(gn,{className:"FIE_image-tool-add-option",color:"secondary",label:v("addImage"),title:v("addImageTitle"),menuPosition:"top",menuItems:D,size:"sm",style:{maxHeight:24},buttonRef:c,menuFromBtn:!0}),k&&a.createElement(Ll,{ref:u,onChange:n?void 0:function(L){if(L.target.files){r(!0);var G=[],te=Array.from(L.target.files),K=te.length;if(te.forEach(function(ue){if(ue.type.startsWith("image/")){var oe=new Image;oe.onload=function(){M(oe),URL.revokeObjectURL(ue),F(K)},oe.onerror=function(){_(v("uploadImageError")),F(K)},oe.src=URL.createObjectURL(ue)}else G.push(ue.name),F(K)}),0<G.length){var re=1<G.length?v("areNotImages"):v("isNotImage");_("".concat(G.join(", ")," ").concat(re," ").concat(v("toBeUploaded"),"."))}}L.target.value=""},disabled:n,multiple:!0}),j&&a.createElement(Ml,{gallery:S.gallery,onSelect:function(L){r(!0);var G=new Image;G.onload=function(){M(G),F(1)},G.onerror=function(){_(v("uploadImageError")),F(1)},G.crossOrigin="Anonymous",G.src=L},onClose:function(){s(null)},anchorEl:l}))},Bl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_rect-tool-button",id:b.RECT,label:r("rectangleTool"),Icon:vc,onClick:t,isSelected:n})};Bl.defaultProps={isSelected:!1};var ii=0,ai=150,im=function(e){var t=e.annotation,n=e.updateAnnotation,r=e.t,o=t.cornerRadius;return a.createElement(Ue,null,a.createElement(ce,null,r("cornerRadius")),a.createElement(ge,{annotation:"px",onChange:function(l){n({cornerRadius:me(l,ii,ai)})},value:o,min:ii,max:ai}))},am=[{titleKey:"cornerRadius",name:"corner-radius",Icon:yc}],lm=f({},"corner-radius",im),sm=function(e){var t=e.t,n=Ye({name:b.RECT}),r=z(n,2),o=r[0],i=r[1];return a.createElement(Me,{className:"FIE_rect-tool-options",moreOptionsPopupComponentsObj:lm,morePoppableOptionsPrepended:am,annotation:o,updateAnnotation:i,t})},$l=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_ellipse-tool-button",id:b.ELLIPSE,label:r("ellipseTool"),Icon:Oc,onClick:t,isSelected:n})};$l.defaultProps={isSelected:!1};var cm=function(e){var t=e.t,n=Ye({name:b.ELLIPSE}),r=z(n,2),o=r[0],i=r[1];return a.createElement(Me,{className:"FIE_ellipse-tool-options",annotation:o,updateAnnotation:i,t})},Wl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_pen-tool-button",id:b.PEN,label:r("penTool"),Icon:bc,onClick:t,isSelected:n})};Wl.defaultProps={isSelected:!1};function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?li(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):li(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var $e={passive:!0},um=function(e){var t=e.t,n=X(),r=n.dispatch,o=n.designLayer,i=n.previewGroup,l=n.config,s=Ye(xn(xn(xn({},l.annotationsCommon),l[b.PEN]),{},{name:b.PEN}),!1),u=z(s,3),c=u[0],d=u[1],p=u[2],m=O.useRef(null),h=O.useRef({points:[],moved:!1,id:""}),g=O.useCallback(function(){var S=dl(m.current.content),k=Vt(i,S);return[k.offsetX-(o.attrs.xPadding||0),k.offsetY-(o.attrs.yPadding||0)]},[o]),v=O.useCallback(function(){h.current.moved?(h.current.points=h.current.points.concat(g()),r({type:nt,payload:{id:h.current.id,points:h.current.points,dismissHistory:!0}})):(h.current={moved:!0,id:dn(b.PEN),points:[].concat(be(h.current.points),be(g()))},p({id:h.current.id,name:b.PEN,points:h.current.points}))},[g]),y=O.useCallback(function(){h.current.id&&l[b.PEN].selectAnnotationAfterDrawing&&r({type:Ot,payload:{annotationId:h.current.id}}),h.current=null,m.current.off("mousemove touchmove",v),m.current.off("mouseleave touchcancel",y),document.removeEventListener("mouseup",y,$e),document.removeEventListener("touchend",y,$e),document.removeEventListener("mouseleave",y,$e),document.removeEventListener("touchcancel",y,$e)},[v]),E=O.useCallback(function(S){S.target.attrs.draggable||(S.evt.preventDefault(),h.current={points:g()},m.current.on("mousemove touchmove",v),m.current.on("mouseleave touchcancel",y),document.addEventListener("mouseup",y,$e),document.addEventListener("touchend",y,$e),document.addEventListener("mouseleave",y,$e),document.addEventListener("touchcancel",y,$e))},[g,v,y]);return O.useEffect(function(){return m.current=o==null?void 0:o.getStage(),m.current&&m.current.on("mousedown touchstart",E),function(){m.current&&m.current.off("mousedown touchstart",E)}},[o]),a.createElement(Me,{className:"FIE_pen-tool-options",annotation:c,updateAnnotation:d,t,hidePositionField:!0,hideFillOption:!0})},zl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_line-tool-button",id:b.LINE,label:r("lineTool"),Icon:wc,onClick:t,isSelected:n})};zl.defaultProps={isSelected:!1};var dm=function(e){var t=e.t,n=Ye({name:b.LINE}),r=z(n,2),o=r[0],i=r[1];return a.createElement(Me,{className:"FIE_line-tool-options",annotation:o,updateAnnotation:i,t,hidePositionField:!0,hideFillOption:!0})},Xl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_arrow-tool-button",id:b.ARROW,label:r("arrowTool"),Icon:Ec,onClick:t,isSelected:n})};Xl.defaultProps={isSelected:!1};var pm=function(e){var t=e.t,n=Ye({name:b.ARROW}),r=z(n,2),o=r[0],i=r[1];return a.createElement(Me,{className:"FIE_arrow-tool-options",annotation:o,updateAnnotation:i,t,hidePositionField:!0,hideFillOption:!0})},Hl=function(e){var t=e.selectTool,n=e.isSelected,r=e.t;return a.createElement(he,{className:"FIE_polygon-tool-button",id:b.POLYGON,label:r("polygonTool"),Icon:Sc,onClick:t,isSelected:n})};Hl.defaultProps={isSelected:!1};var si=3,ci=25,fm=function(e){var t=e.annotation,n=e.updateAnnotation,r=e.t,o=t.sides;return a.createElement(Ue,null,a.createElement(ce,null,r("sides")),a.createElement(ge,{annotation:"",onChange:function(l){n({sides:me(l,si,ci)})},value:o,min:si,max:ci}))},mm=[{titleKey:"sides",name:"sides-number",Icon:Ic}],gm=f({},"sides-number",fm),hm=function(e){var t=e.t,n=Ye({name:b.POLYGON}),r=z(n,2),o=r[0],i=r[1];return a.createElement(Me,{className:"FIE_polygon-tool-options",morePoppableOptionsPrepended:mm,moreOptionsPopupComponentsObj:gm,annotation:o,updateAnnotation:i,t,hidePositionField:!0})};function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function di(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ui(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ui(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Gl=function(e,t,n,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0;if(e.width&&e.height)return e;var i=rn(t,n,r),l=He(i.width,i.height,o);return e.width||e.height?{width:e.width||l.width,height:e.height||l.height}:l.width&&l.height&&l||di(di({},r),He(r.width,r.height,o))},vm=A.div.withConfig({componentId:"sc-17otqpz-0"})(["display:flex;justify-content:",";align-items:flex-end;gap:3px;flex-wrap:",";"],function(e){var t=e.alignment;return t||"center"},function(e){var t=e.disableWrap;return t?"no-wrap":"wrap"}),pi=A(Ya).withConfig({componentId:"sc-17otqpz-1"})(function(e){var t=e.theme;return Ge(["width:",";margin-top:'4px';span{color:",";",";}"],function(n){var r=n.disableWrap;return r?"100%":"100px"},t.palette[Z.TextSecondary],t.typography.font[Pe.LabelMedium])}),ym=A(ze).withConfig({componentId:"sc-17otqpz-2"})(["svg{margin-bottom:1px;}"]),Om=A(ze).withConfig({componentId:"sc-17otqpz-3"})(["margin-left:12px;"]);function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function mi(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?fi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Kr=function(e){var t=e.onChange,n=e.currentSize,r=e.hideResetButton,o=e.alignment,i=e.disableWrap,l=X(),s=l.dispatch,u=l.originalImage,c=l.resize,d=l.shownImageDimensions,p=l.adjustments,m=p.crop,h=p.rotation,g=h===void 0?0:h,v=l.theme,y=l.t,E=function(C){var x,T=C.target,N=T.name,M=T.value;if(!(1>parseFloat(M))){var F=Math.min(10*u.width,10*u.height),_=He(u.width,u.height,g),R=f({},N,M&&me(M,0,F)),W=N==="height",D=W?"width":"height",$=(x=n.ratioUnlocked)!==null&&x!==void 0?x:c.ratioUnlocked;if(!$){var L=_.width/_.height;R[D]=Math.round(W?R[N]*L:R[N]/L)}if(R[N]!==c[N]||R[D]!==c[D]){if(typeof t=="function")return void t(R);s({type:gt,payload:R});var G=m.width&&m.height&&m||d,te=mi(mi({},c),R);s({type:bt,payload:{factor:te.width&&te.height?on(G,te):Le,isAbsoluteZoom:!0}})}}},S=typeof c.width>"u"&&typeof c.height>"u"||u.width===c.width&&u.height===c.height,k=Gl((n.width||n.height)&&n||c,m,d,u,g),j=c.manualChangeDisabled,w=typeof c.width<"u"&&!c.width,P=typeof c.height<"u"&&!c.height;return a.createElement(vm,{className:"FIE_resize-tool-options",alignment:o,disableWrap:i},a.createElement(pi,{className:"FIE_resize-width-option",value:w?"":k.width,name:"width",onChange:j?void 0:E,inputMode:"numeric",title:y("resizeWidthTitle"),label:y("width"),inputProps:{type:"number"},size:"sm",iconEnd:"px",placeholder:"Width",disableWrap:i,disabled:j}),a.createElement(ym,{className:"FIE_resize-ratio-locker",title:y("toggleRatioLockTitle"),onClick:j?void 0:function(){return typeof t=="function"?void t({ratioUnlocked:!n.ratioUnlocked}):void s({type:gt,payload:{ratioUnlocked:!c.ratioUnlocked}})},color:"basic",size:"sm",disabled:j},n.ratioUnlocked||c.ratioUnlocked?a.createElement(Pc,{size:16,color:v.palette.success}):a.createElement(Cc,{size:16,color:v.palette.error})),a.createElement(pi,{className:"FIE_resize-height-option",value:P?"":k.height,name:"height",onChange:j?void 0:E,inputMode:"numeric",title:y("resizeHeightTitle"),label:y("height"),inputProps:{type:"number"},size:"sm",iconEnd:"px",placeholder:"Height",disableWrap:i,disabled:j}),!r&&a.createElement(Om,{className:"FIE_resize-reset-button",size:"sm",color:"basic",onClick:S||j?void 0:function(){s({type:gt,payload:{width:void 0,height:void 0,ratioUnlocked:!1}});var x=m.width&&m.height&&m||d;s({type:bt,payload:{factor:on(x,x)}})},disabled:S||j},a.createElement(Ua,null)))};Kr.defaultProps={onChange:void 0,currentSize:{},hideResetButton:!1,alignment:"center",disableWrap:!1};var bm=A.div.withConfig({componentId:"sc-fvaj5j-0"})(["display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:8px;overflow:hidden;",";"],function(e){var t=e.noWrap;return t?"flex-wrap: nowrap;":""}),gi=A.div.withConfig({componentId:"sc-fvaj5j-1"})(["margin-bottom:8px;"]),wm=A.div.withConfig({componentId:"sc-fvaj5j-2"})(function(e){var t=e.theme;return`
    padding: 6px 4px;
    border: 1px solid `.concat(t.palette["borders-secondary"],`;
    width: fit-content;
    height: 32px;
    border-radius: 2px;
    overflow: hidden;
    cursor: pointer;
    border-radius: 4px;

    :hover {
      background: `).concat(t.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(t.palette["bg-primary-active"],`;
      border-color: `).concat(t.palette["accent-primary-active"],`;
    }

    img {
      max-width: 100%;
      max-height: 100%;
    }
  `)}),Kl=function(e){var t=e.addImgWatermark,n=e.loadAndSetWatermarkImg,r=e.style,o=X(),i=o.config,l=o.annotations,s=o.dispatch,u=o.t,c=O.useMemo(function(){var g;return(g=(l[Xe]||{}).image)===null||g===void 0?void 0:g.src},[l[Xe]]),d=function(g){var v=g.currentTarget.children[0];if(v.complete){if(!v.naturalWidth)return void s({type:Ke,payload:{feedback:{message:u("mutualizedFailedToLoadImg"),duration:2e3}}});t(v)}},p=i[b.WATERMARK]||{},m=p.gallery,h=m===void 0?[]:m;return h.length===0?null:a.createElement(fn,{className:"FIE_watermark-gallery",style:r},h.map(function(g){var v=(g==null?void 0:g.url)||g,y=(g==null?void 0:g.previewUrl)||v;return a.createElement(wm,{className:"FIE_watermark-selected-item",onClick:function(S){return v===y?d(S):n(v)},key:v,"aria-selected":v===c},a.createElement("img",{src:y,alt:"Failed to load.",crossOrigin:"Anonymous",draggable:!1}))}))};Kl.defaultProps={style:void 0};var Em=function(e){var t=e.watermark,n=e.saveWatermark,r=e.t,o=O.useState(null),i=z(o,2),l=i[0],s=i[1],u=t.padding||0;return a.createElement(a.Fragment,null,a.createElement(We,{className:"FIE_watermark-padding-triggerer",title:r("padding"),onClick:function(d){s(d.currentTarget)},active:l},a.createElement(jc,{size:20})),a.createElement(Ft,{className:"FIE_watermark-padding-popup",anchorEl:l,open:!!l,onClose:function(){s(null)},position:"top"},a.createElement(an,null,a.createElement(ce,null,r("padding")),a.createElement(Ue,null,a.createElement(ge,{annotation:"px",onChange:function(d){n({padding:me(d,0,100)})},value:u,noMargin:!0}),a.createElement(_l,null,"".concat(u,"px"))))))};function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ke(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?hi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var vi=.33,ct="watermark",Sm=function(){var e=X(),t=e.annotations,n=e.shownImageDimensions,r=e.selectionsIds,o=e.config,i=e.dispatch,l=e.t,s=e.adjustments.crop,u=s===void 0?{}:s,c=Te(),d=O.useState(!1),p=z(d,2),m=p[0],h=p[1],g=O.useRef(),v=o[b.WATERMARK],y=O.useMemo(function(){return t[ct]},[t[ct]]),E=u.width||n.width,S=u.height||n.height,k=u.x||0,j=u.y||0,w=v.textScalingRatio||vi,P=v.imageScalingRatio||vi,C=function(_){var R=_.width/_.height,W={};if(S>E){var D=S*P/_.height;W.height=_.height*D,W.width=W.height*R}else{var $=E*P/_.width;W.width=_.width*$,W.height=W.width/R}var L=ke(ke(ke(ke({},o.annotationsCommon),o[b.IMAGE]),W),{},{padding:1,image:_,x:k+E/2-W.width/2,y:j+S/2-W.height/2,id:ct,name:b.IMAGE,replaceCurrent:!0});i({type:nt,payload:L})},x=function(_){i({type:nt,payload:ke(ke({},typeof _=="function"?_(y):_),{},{id:ct})})},T=function(_){i({type:Ke,payload:{feedback:{message:_,status:vt.WARNING}}})},N=function(_,R){if(_){h(!0);var W=new Image;W.onload=function(){C(W),R&&URL.revokeObjectURL(_),h(!1)},W.onerror=function(){T(l("mutualizedFailedToLoadImg")),R&&URL.revokeObjectURL(_),h(!1)},W.src=_}};O.useEffect(function(){y&&(i({type:Ur}),i({type:Ot,payload:{annotationId:"watermark"}}))},[y]),O.useEffect(function(){y&&(r.length===0||r[0].id!==ct)&&i({type:Ot,payload:{annotationId:"watermark"}})},[r]);var M=[(!o.useCloudimage||typeof v.onUploadWatermarkImgClick=="function")&&{key:"upload-watermark",label:l("uploadWatermark"),icon:Tc,onClick:function(){if(typeof v.onUploadWatermarkImgClick=="function"){var R=v.onUploadWatermarkImgClick(N);return void(R instanceof Promise&&R.then(function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},D=W.url,$=W.revokeObjectUrl;return N(D,$!==void 0&&$)}))}g.current&&g.current.click()}},!v.hideTextWatermark&&{key:"add-text-watermark",label:l("addWatermarkAsText"),icon:xc,onClick:function(){var R={height:S*w,width:E*w},W=ke(ke(ke(ke({},o.annotationsCommon),o[b.TEXT]),R),{},{padding:1,x:k+E/2-R.width/2,y:j+S/2-R.height/2,fill:"#000000",id:ct,name:b.TEXT,replaceCurrent:!0});i({type:nt,payload:W})}}],F=function(){return a.createElement(Em,{watermark:y,saveWatermark:x,t:l})};return a.createElement("div",{className:"FIE_watermark-tool-wrapper"},(y==null?void 0:y.name)===b.TEXT&&a.createElement(gi,{className:"FIE_watermark-options-wrapper"},a.createElement(Hr,{text:y,saveText:x,t:l},F())),(y==null?void 0:y.name)===b.IMAGE&&a.createElement(gi,{className:"FIE_watermark-options-wrapper"},a.createElement(Gr,{image:y,saveImage:x,t:l},F())),a.createElement(bm,{className:"FIE_watermark-add-wrapper",noWrap:!0},a.createElement(gn,{className:"FIE_watermark-add",color:"secondary",label:function(){return c?l("plus"):M[0]?l("addWatermark"):l("addTextWatermark")}(),title:l("addWatermarkTitle"),menuPosition:"top",menuItems:M,menuFromBtn:!0,noMargin:!0}),a.createElement(Kl,{loadAndSetWatermarkImg:N,addImgWatermark:C,style:c&&!(y==null||!y.name)?{width:"55%"}:void 0}),a.createElement(Ll,{onChange:m?void 0:function(R){if(R.target.files){var W=R.target.files[0];W.type.startsWith("image/")&&N(URL.createObjectURL(W),!0)}R.target.value=""},disabled:m,ref:g})))},kn,Tt=(kn={},f(f(f(f(f(f(f(f(f(f(kn,b.CROP,{id:b.CROP,Item:El}),b.ROTATE,{id:b.ROTATE,Item:Pl,ItemOptions:Zp}),b.FLIP_X,{id:b.FLIP_X,Item:Sl}),b.FLIP_Y,{id:b.FLIP_Y,Item:Il}),b.BRIGHTNESS,{id:b.BRIGHTNESS,Item:vl,ItemOptions:Mp}),b.CONTRAST,{id:b.CONTRAST,Item:Cl,ItemOptions:Jp}),b.HSV,{id:b.HSV,Item:jl,ItemOptions:tf,hideFn:function(t){var n=t.useCloudimage;return n}}),b.BLUR,{id:b.BLUR,Item:Tl,ItemOptions:rf}),b.WARMTH,{id:b.WARMTH,Item:xl,ItemOptions:af,hideFn:function(t){var n=t.useCloudimage;return n}}),b.FILTERS,{id:b.FILTERS,Item:yf}),f(f(f(f(f(f(f(f(f(f(kn,b.WATERMARK,{id:b.WATERMARK,Item:Sm}),b.TEXT,{id:b.TEXT,Item:Nl,ItemOptions:Uf}),b.IMAGE,{id:b.IMAGE,Item:Dl,ItemOptions:om}),b.RECT,{id:b.RECT,Item:Bl,ItemOptions:sm}),b.POLYGON,{id:b.POLYGON,Item:Hl,ItemOptions:hm}),b.ELLIPSE,{id:b.ELLIPSE,Item:$l,ItemOptions:cm}),b.PEN,{id:b.PEN,Item:Wl,ItemOptions:um}),b.LINE,{id:b.LINE,Item:zl,ItemOptions:dm}),b.ARROW,{id:b.ARROW,Item:Xl,ItemOptions:pm}),b.RESIZE,{id:b.RESIZE,Item:Kr})),Qt=f(f(f(f(f(f({},ne.ADJUST,[b.CROP,b.ROTATE,b.FLIP_X,b.FLIP_Y]),ne.FINETUNE,[b.BRIGHTNESS,b.CONTRAST,b.HSV,b.BLUR,b.WARMTH]),ne.FILTERS,[b.FILTERS]),ne.WATERMARK,[b.WATERMARK]),ne.ANNOTATE,[b.TEXT,b.IMAGE,b.RECT,b.ELLIPSE,b.POLYGON,b.PEN,b.LINE,b.ARROW]),ne.RESIZE,[b.RESIZE]);function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Oi(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?yi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Yl="SELECT_TAB",Im=function(e,t){return t.tabId===e.tabId?e:Oi(Oi({},e),{},{tabId:t.tabId,toolId:Qt[t.tabId][0],selectionsIds:[],pointerCssIcon:t.tabId===ne.ANNOTATE?Fe.DRAW:Fe.DEFAULT})};function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?bi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Yr="UNDO",Pm=function(e){if(e.pastDesignStates&&0<e.pastDesignStates.length){var t=yt(e),n=Ma(e.pastDesignStates),r=n[0],o=n.slice(1),i=[t].concat(be(e.futureDesignStates||[]));return An(An(An({},e),r),{},{selectionsIds:[],pastDesignStates:o,futureDesignStates:i,hasUndo:0<o.length,hasRedo:!0,haveNotSavedChanges:0<o.length})}return e};function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?wi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ul="SET_FINETUNE",Cm=function(e,t){return zt(zt({},e),{},{isDesignState:!t.dismissHistory,finetunes:!t.finetune||e.finetunes.includes(t.finetune)?e.finetunes:[].concat(be(e.finetunes),[t.finetune]),finetunesProps:zt(zt({},e.finetunesProps),t.finetuneProps)})},jm=["dismissHistory","replaceCurrent"];function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ut(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ei(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ei(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var nt="SET_ANNOTATION",Tm=function(e){var t,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},r=n.dismissHistory,o=n.replaceCurrent,i=de(n,jm),l=(t=i.id)!==null&&t!==void 0?t:dn(i.name),s=e.annotations[l];return s&&!Object.keys(i).some(function(u){return(i[u]||i[u]===0)&&i[u]!==s[u]})?e:ut(ut({},e),{},{isDesignState:!(r!==void 0&&r),annotations:ut(ut({},e.annotations),{},f({},l,ut(ut({},o!==void 0&&o?{}:s),i)))})};function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ii(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Si(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Si(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var _t="CHANGE_POINTER_ICON",xm=function(e,t){return e.pointerCssIcon===t.pointerCssIcon?e:Ii(Ii({},e),{},{pointerCssIcon:t.pointerCssIcon})};function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ci(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Pi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ot="SELECT_ANNOTATION",km=function(e,t){if(e.selectionsIds.length===1&&e.selectionsIds[0]===t.annotationId)return e;var n;if(t.multiple){n=e.selectionsIds.filter(function(o){return o!==t.annotationId});var r=n.length!==e.selectionsIds.length;r||n.push(t.annotationId)}else n=[t.annotationId];return Ci(Ci({},e),{},{selectionsIds:n})};function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ti(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ji(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ji(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ur="CLEAR_ANNOTATIONS_SELECTIONS",Am=function(e){return e.selectionsIds.length===0?e:Ti(Ti({},e),{},{selectionsIds:[]})};function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ki(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?xi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Hn="TOGGLE_ORIGINAL_IMAGE_DISPLAY",Nm=function(e,t){return ki(ki({},e),{},{isShowOriginalImage:t.isShow})};function Ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ni(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ai(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ai(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var sn="SELECT_TOOL",_m=function(e,t){return e.toolId===t.toolId?e:Ni(Ni({},e),{},{toolId:t.toolId,selectionsIds:t.keepSelections?e.selectionsIds:[]})};function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Xt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?_i(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_i(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var qr="TOGGLE_FLIP",Rm=function(e,t){var n="isFlipped".concat(t.direction===Un.X?"X":"Y");return Xt(Xt({},e),{},{isDesignState:!t.dismissHistory,adjustments:Xt(Xt({},e.adjustments),{},f({},n,!e.adjustments[n]))})};function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ri(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ri(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Vr="SET_CROP",Fm=function(e,t){var n,r,o,i,l,s,u,c=(n=e.adjustments.crop)!==null&&n!==void 0?n:{},d={x:(r=ee(t.x))!==null&&r!==void 0?r:c.x,y:(o=ee(t.y))!==null&&o!==void 0?o:c.y,ratio:typeof t.ratio=="string"?t.ratio:(i=ee(t.ratio))!==null&&i!==void 0?i:c.ratio,width:(l=ee(t.width))!==null&&l!==void 0?l:c.width,height:(s=ee(t.height))!==null&&s!==void 0?s:c.height,ratioTitleKey:(u=t.ratioTitleKey)!==null&&u!==void 0?u:c.ratioTitleKey,ratioGroupKey:t.ratioGroupKey,ratioFolderKey:t.ratioFolderKey,noEffect:t.noEffect};return c.x===d.x&&c.y===d.y&&(c.width===d.width||d.width===ee(e.shownImageDimensions.width)&&!c.width!==null&&d.ratio!==Nt)&&(c.height===d.height||d.height===ee(e.shownImageDimensions.height)&&c.height!==null&&d.ratio!==Nt)&&c.ratio===d.ratio&&c.ratioTitleKey===d.ratioTitleKey&&c.ratioGroupKey===d.ratioGroupKey&&c.ratioFolderKey===d.ratioFolderKey?e:dt(dt({},e),{},{isDesignState:!t.dismissHistory,adjustments:dt(dt({},e.adjustments),{},{crop:dt(dt({},c),d)})})};function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Fi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var ql="CHANGE_ROTATION",Dm=function(e,t){return e.adjustments.rotation===t.rotation?e:Ht(Ht({},e),{},{isDesignState:!t.dismissHistory,adjustments:Ht(Ht({},e.adjustments),{},{rotation:t.rotation})})};function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Li(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Di(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Di(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Lm=function(e,t,n,r){if(e.factor===Le)return{x:0,y:0,factor:Le};var o=e.factor>t.factor,i={x:(e.x-t.x||0)/t.factor,y:(e.y-t.y||0)/t.factor},l={x:e.x-i.x*e.factor,y:e.y-i.y*e.factor};if(o&&t.factor===1||(l.x=Math.min(0,Math.max(l.x,n*(1-t.factor))),l.y=Math.min(0,Math.max(l.y,r*(1-t.factor)))),1>e.factor){var s=n-n*e.factor,u=r-r*e.factor;l.x+=s/2,l.y+=u/2}return Li(Li({},l),{},{factor:e.factor})},Mm=["preparedDimensions"];function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function pt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Mi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var bt="ZOOM_CANVAS",Bm=.03,$m=60,Wm=function(e,t){var n,r=me(parseFloat(t.factor).toFixed(2),Bm,$m);if(t.preparedDimensions){t.preparedDimensions;var o=de(t,Mm);n=o}else{var i,l,s={x:t.x||t.x===0?(i=t.x)!==null&&i!==void 0?i:e.zoom.x:e.canvasWidth/2,y:t.y||t.y===0?(l=t.y)!==null&&l!==void 0?l:e.zoom.y:e.canvasHeight/2};n=Lm(pt(pt({},s),{},{factor:r}),t.isAbsoluteZoom?{factor:Le,x:null,y:null}:e.zoom,e.canvasWidth,e.canvasHeight)}return n.factor===e.zoom.factor&&n.x===e.zoom.x&&n.y===e.zoom.y?e:pt(pt({},e),{},{zoom:pt(pt({},e.zoom),n)})};function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $i(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Bi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Vl="SET_CANVAS_SIZE",zm=function(e,t){if(e.canvasWidth===t.canvasWidth&&e.canvasHeight===t.canvasHeight)return e;var n=e.initialCanvasWidth,r=n===void 0?t.canvasWidth:n,o=e.initialCanvasHeight,i=o===void 0?t.canvasHeight:o,l=Ln(e.initialCanvasWidth,e.initialCanvasHeight,e.originalImage.width,e.originalImage.height),s=l*e.originalImage.width,u=l*e.originalImage.height,c=1;if(r!==t.canvasWidth||i!==t.canvasHeight){var d=t.canvasWidth/s,p=t.canvasHeight/u;c=Math.min(d,p)}return $i($i({},e),{},{initialCanvasWidth:r,initialCanvasHeight:i,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,canvasScale:c})};function Wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function zi(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Wi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Zl="SET_ORIGINAL_IMAGE",Xm=function(e,t){return zi(zi({},e),{},{feedback:{},originalImage:t.originalImage,imgSrc:t.originalImage.src})};function Xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Xi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ql="SET_SHOWN_IMAGE_DIMENSIONS",Hm=function(e,t){return Gt(Gt({},e),{},{shownImageDimensions:Gt(Gt({},e.shownImageDimensions),t.shownImageDimensions),designLayer:t.designLayer||e.designLayer,previewGroup:t.previewGroup||e.previewGroup})};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Gi(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Hi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Jl="REMOVE_ANNOTATIONS",Gm=function(e,t){var n=e.annotations,r=e.selectionsIds;return t.annotationsIds.forEach(function(o){if(r=r.filter(function(l){return l!==o}),e.designLayer&&n[o]){var i=e.designLayer.findOne("#".concat(o));i&&i.destroy(),delete n[o]}}),Gi(Gi({},e),{},{isDesignState:t.isDesignState||!0,annotations:n,selectionsIds:[]})};function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ft(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ki(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ki(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var es="DUPLICATE_ANNOTATIONS",Km=function(e,t){var n=e.annotations,r={};return t.annotationsIds.forEach(function(o){var i=n[o];if(i){var l=dn(i.name);r[l]=ft(ft({},i),{},{id:l,x:i.x+20,y:i.y+20})}}),ft(ft({},e),{},{isDesignState:!t.dismissHistory,annotations:ft(ft({},n),r)})};function Yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ui(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Yi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Zr="ENABLE_TEXT_CONTENT_EDIT",Ym=function(e,t){return Ui(Ui({},e),{},{textIdOfEditableContent:t.textIdOfEditableContent||null})};function qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?qi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var gt="SET_RESIZE",Um=function(e,t){var n;return xt(xt({},e),{},{isDesignState:!t.dismissHistory,resize:xt(xt(xt({},e.resize),t),{},{manualChangeDisabled:!((n=t.manualChangeDisabled)===null||n===void 0)&&n})})};function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Zi(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Vi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var ts="SET_SAVED",qm=function(e){return e.haveNotSavedChanges?Zi(Zi({},e),{},{haveNotSavedChanges:!1}):e};function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Vm(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Qi(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var hn=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],r=Vm({},e),o=Object.keys(t);return o.forEach(function(i){var l=t[i];if(l!==void 0){var s=tn(l);if(s!=="object"||l instanceof HTMLElement||l===null||Array.isArray(l)||!e[i]||tn(e[i])!=="object")return void(r[i]=n&&Array.isArray(r[i])&&Array.isArray(l)?[].concat(be(r[i]),be(l)):l);r[i]=hn(e[i],l)}}),r},Jt="UPDATE_STATE",Zm=function(e,t){var n=t&&typeof t=="function"?t(e):t;return n?hn(e,n):e};function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Kt(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ji(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ji(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var ns="SET_LATEST_COLOR",Qm=function(e,t){return Kt(Kt({},e),{},{latestColors:Kt(Kt({},e.latestColors),t.latestColors)})};function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ta(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ea(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ea(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var rs="SET_SHOWN_TABS_MENU",Jm=function(e,t){return ta(ta({},e),{},{showTabsMenu:t.opened})},Yt;const na=(Yt={},f(f(f(f(f(f(f(f(f(f(Yt,Zl,Xm),Ke,Kd),Mr,Yd),un,su),_t,xm),Ot,km),Ur,Am),Hn,Nm),Yl,Im),sn,_m),f(f(f(f(f(f(f(f(f(f(Yt,bt,Wm),Vl,zm),Ql,Hm),Zr,Ym),ns,Qm),rs,Jm),rl,lu),Ul,Cm),nt,Tm),Vr,Fm),f(f(f(f(f(f(f(f(f(f(Yt,ql,Dm),qr,Rm),gt,Um),Jl,Gm),es,Km),Yr,Pm),Dr,Hd),Lr,Gd),ts,qm),Jt,Zm));var eg=.05,tg=12,ng=function(){return 2*(window?Math.min(window.innerHeight,window.innerWidth)*eg:tg)},ra=function(e,t){var n=e.x,r=e.y,o=t*Math.PI/180,i=Math.cos(o),l=Math.sin(o);return{x:n*i-r*l,y:r*i+n*l}},rg=function(e,t,n){if(!e||!t||!n&&n!==0)return{x:0,y:0,rotation:n};var r={x:-e/2,y:-t/2},o=ra(r,0),i=ra(r,n),l=i.x-o.x,s=i.y-o.y;return{x:l,y:s,rotation:n}},ot={definitions:{id:Se.string.isRequired,name:Se.string.isRequired,rotation:Se.number,scaleX:Se.number,scaleY:Se.number,stroke:Se.string,strokeWidth:Se.number,shadowOffsetX:Se.number,shadowOffsetY:Se.number,shadowBlur:Se.number,shadowColor:Se.string,shadowOpacity:Se.number,opacity:Se.number},defaults:{rotation:0,scaleX:1,scaleY:1,stroke:void 0,strokeWidth:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowColor:void 0,shadowOpacity:void 0,opacity:1}},og=["id","name","fill","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity","cornerRadius"];function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ia(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?oa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var os=function(e){var t=e.id,n=e.name,r=e.fill,o=e.x,i=e.y,l=e.width,s=e.height,u=e.scaleX,c=e.scaleY,d=e.rotation,p=e.annotationEvents,m=e.stroke,h=e.strokeWidth,g=e.shadowOffsetX,v=e.shadowOffsetY,y=e.shadowBlur,E=e.shadowColor,S=e.shadowOpacity,k=e.opacity,j=e.cornerRadius,w=de(e,og);return a.createElement(Fa,ve({id:t,name:n,rotation:d,scaleX:u,scaleY:c,stroke:m,strokeWidth:h,shadowOffsetX:g,shadowOffsetY:v,shadowBlur:y,shadowColor:E,shadowOpacity:S,fill:r,x:o,y:i,width:l,height:s,opacity:k,cornerRadius:j},p,w))};os.defaultProps=ia(ia({},ot.defaults),{},{fill:"#000",cornerRadius:0,width:0,height:0});var ig=["id","name","fill","x","y","radiusX","radiusY","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"];function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function la(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?aa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var is=function(e){var t=e.id,n=e.name,r=e.fill,o=e.x,i=e.y,l=e.radiusX,s=e.radiusY,u=e.scaleX,c=e.scaleY,d=e.rotation,p=e.annotationEvents,m=e.stroke,h=e.strokeWidth,g=e.shadowOffsetX,v=e.shadowOffsetY,y=e.shadowBlur,E=e.shadowColor,S=e.shadowOpacity,k=e.opacity,j=de(e,ig);return a.createElement(Da,ve({id:t,name:n,rotation:d,scaleX:u,scaleY:c,stroke:m,strokeWidth:h,shadowOffsetX:g,shadowOffsetY:v,shadowBlur:y,shadowColor:E,shadowOpacity:S,fill:r,x:o,y:i,radiusX:l,radiusY:s,offsetX:-l,offsetY:-s,opacity:k},p,j))};is.defaultProps=la(la({},ot.defaults),{},{fill:"#000",radiusX:0,radiusY:0});var ag=["id","name","fill","x","y","radius","scaleX","scaleY","rotation","sides","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"];function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ca(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?sa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var as=function(e){var t=e.id,n=e.name,r=e.fill,o=e.x,i=e.y,l=e.radius,s=e.scaleX,u=e.scaleY,c=e.rotation,d=e.sides,p=e.annotationEvents,m=e.stroke,h=e.strokeWidth,g=e.shadowOffsetX,v=e.shadowOffsetY,y=e.shadowBlur,E=e.shadowColor,S=e.shadowOpacity,k=e.opacity,j=de(e,ag);return a.createElement(Ss,ve({id:t,name:n,rotation:c,scaleX:s,scaleY:u,stroke:m,strokeWidth:h,shadowOffsetX:g,shadowOffsetY:v,shadowBlur:y,shadowColor:E,shadowOpacity:S,fill:r,x:o,y:i,radius:l,offsetX:-l,offsetY:-l,sides:d,opacity:k},p,j))};as.defaultProps=ca(ca({},ot.defaults),{},{fill:"#000",sides:3});var lg=["id","name","text","fontFamily","fontSize","fontStyle","fill","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity","letterSpacing","lineHeight","align"];function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function da(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ua(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ua(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Qr=function(e){var t=e.id,n=e.name,r=e.text,o=e.fontFamily,i=e.fontSize,l=e.fontStyle,s=e.fill,u=e.x,c=e.y,d=e.width,p=e.height,m=e.scaleX,h=e.scaleY,g=e.rotation,v=e.annotationEvents,y=e.stroke,E=e.strokeWidth,S=e.shadowOffsetX,k=e.shadowOffsetY,j=e.shadowBlur,w=e.shadowColor,P=e.shadowOpacity,C=e.opacity,x=e.letterSpacing,T=e.lineHeight,N=e.align,M=de(e,lg);return a.createElement(Is,ve({id:t,name:n,rotation:g,scaleX:m,scaleY:h,stroke:y,strokeWidth:E,shadowOffsetX:S,shadowOffsetY:k,shadowBlur:j,shadowColor:w,shadowOpacity:P,opacity:C,fill:s,text:r,fontFamily:o,fontStyle:l,fontSize:i,letterSpacing:x,lineHeight:T,align:N,x:u,y:c,width:d,height:p},v,M))};Qr.defaultProps=da(da({},ot.defaults),{},{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur imperdiet tortor quis odio facilisis, id aliquet nulla facilisis. Etiam tincidunt tempor odio nec placerat.",fontFamily:"Arial",fontSize:14,fill:"#000",width:0,height:0,letterSpacing:void 0,lineHeight:void 0,align:"left"});var sg=function(e){var t=e.split("/");return t[t.length-1].split("?")[0]},ls=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return new Promise(function(r,o){var i=new Image;n||(i.crossOrigin="Anonymous"),i.src=e,i.name=t??sg(e),i.onload=function(){r(i)},i.onerror=function(){o(new Error("Error in loading the image with the provided url: ".concat(e)))}})},cg=["id","name","image","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"];function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function fa(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?pa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var ss=function(e){var t=e.id,n=e.name,r=e.image,o=e.x,i=e.y,l=e.width,s=e.height,u=e.scaleX,c=e.scaleY,d=e.rotation,p=e.annotationEvents,m=e.stroke,h=e.strokeWidth,g=e.shadowOffsetX,v=e.shadowOffsetY,y=e.shadowBlur,E=e.shadowColor,S=e.shadowOpacity,k=e.opacity,j=de(e,cg),w=O.useState(null),P=z(w,2),C=P[0],x=P[1];O.useEffect(function(){typeof r=="string"&&ls(r).then(x)},[r]);var T=r instanceof HTMLImageElement;if(!T&&!C)return null;var N=T?r:C;return a.createElement(cn,ve({id:t,name:n,rotation:d,scaleX:u,scaleY:c,stroke:m,strokeWidth:h,shadowOffsetX:g,shadowOffsetY:v,shadowBlur:y,shadowColor:E,shadowOpacity:S,image:N,x:o,y:i,width:l,height:s,opacity:k},j,p,j))};ss.defaultProps=fa(fa({},ot.defaults),{},{width:0,height:0});var ug=["id","name","scaleX","scaleY","rotation","annotationEvents","points","lineCap","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","tension","opacity"];function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ma(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ma(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Gn=function(e){var t=e.id,n=e.name,r=e.scaleX,o=e.scaleY,i=e.rotation,l=e.annotationEvents,s=e.points,u=e.lineCap,c=e.stroke,d=e.strokeWidth,p=e.shadowOffsetX,m=e.shadowOffsetY,h=e.shadowBlur,g=e.shadowColor,v=e.shadowOpacity,y=e.tension,E=e.opacity,S=de(e,ug);return a.createElement(Ps,ve({id:t,name:n,rotation:i,scaleX:r,scaleY:o,stroke:c,strokeWidth:d,shadowOffsetX:p,shadowOffsetY:m,shadowBlur:h,shadowColor:g,shadowOpacity:v,points:s,lineCap:u,tension:y,hitStrokeWidth:20,x:0,y:0,opacity:E},l,S))};Gn.defaultProps=ga(ga({},ot.defaults),{},{stroke:"#000000",strokeWidth:1,lineCap:"butt",annotationEvents:{},tension:void 0});var dg=["id","name","fill","pointerLength","pointerWidth","scaleX","scaleY","rotation","annotationEvents","points","lineCap","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"];function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function va(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ha(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ha(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var cs=function(e){var t=e.id,n=e.name,r=e.fill,o=e.pointerLength,i=e.pointerWidth,l=e.scaleX,s=e.scaleY,u=e.rotation,c=e.annotationEvents,d=e.points,p=e.lineCap,m=e.stroke,h=e.strokeWidth,g=e.shadowOffsetX,v=e.shadowOffsetY,y=e.shadowBlur,E=e.shadowColor,S=e.shadowOpacity,k=e.opacity,j=de(e,dg);return a.createElement(Cs,ve({id:t,name:n,rotation:u,scaleX:l,scaleY:s,stroke:m,strokeWidth:h,shadowOffsetX:g,shadowOffsetY:v,shadowBlur:y,shadowColor:E,shadowOpacity:S,fill:r,x:0,y:0,points:d,pointerLength:o,pointerWidth:i,lineCap:p,opacity:k},c,j))};cs.defaultProps=va(va({},ot.defaults),{},{stroke:"#000000",strokeWidth:6,fill:void 0,lineCap:"butt",pointerLength:void 0,pointerWidth:void 0});var pg=f(f(f(f(f(f(f(f({},b.RECT,os),b.ELLIPSE,is),b.POLYGON,as),b.TEXT,Qr),b.IMAGE,ss),b.LINE,Gn),b.ARROW,cs),b.PEN,Gn),fg=function(e){var t=e.annotation,n=e.annotationEvents,r=e.selectionsIds,o=pg[t.name];return o?a.createElement(o,ve({key:t.id,annotationEvents:n,draggable:r.includes(t.id)},t)):null};const mg=O.memo(fg);var gg=function(){var e=X(),t=e.annotations,n=t===void 0?{}:t,r=e.selectionsIds,o=r===void 0?[]:r,i=pp();return O.useMemo(function(){return Object.values(n).map(function(l){return a.createElement(mg,{key:l.id,annotation:l,annotationEvents:i,selectionsIds:o})})},[n,i,o])},hg=function(e,t){return a.createElement(js,ve({ref:t},e))};const vg=O.forwardRef(hg);function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ya(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ya(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var yg=ng(),Og=10,bg=function(){var e,t,n,r,o=O.useRef(),i=X(),l=i.initialCanvasWidth,s=i.initialCanvasHeight,u=i.canvasWidth,c=i.canvasHeight,d=i.dispatch,p=i.toolId,m=i.canvasScale,h=i.originalImage,g=h===void 0?{}:h,v=i.finetunes,y=v===void 0?[]:v,E=i.finetunesProps,S=E===void 0?{}:E,k=i.filter,j=k===void 0?null:k,w=i.adjustments,P=w===void 0?{}:w,C=P.rotation,x=C===void 0?0:C,T=P.crop,N=T===void 0?{}:T,M=P.isFlippedX,F=P.isFlippedY,_=i.resize,R=O.useRef(),W=O.useRef(),D=p===b.CROP,$=O.useMemo(function(){return j?[].concat(be(y),[j]):y},[y,j]),L=O.useMemo(function(){var je=Math.max(Og,g.width-yg),qe=g.width/g.height;return{width:je,height:je/qe}},[g]),G=O.useMemo(function(){return He(g.width,g.height,x)},[g,x]),te=O.useMemo(function(){return Ln(l,s,g.width,g.height)},[g,l,s]),K=O.useMemo(function(){return{width:L.width*te,height:L.height*te}},[L,te]),re=_.width&&!D?_.width/((e=(t=N.width)!==null&&t!==void 0?t:K.width)!==null&&e!==void 0?e:G.width):1,ue=_.height&&!D?_.height/((n=(r=N.height)!==null&&r!==void 0?r:K.height)!==null&&n!==void 0?n:G.height):1,oe=u/(2*m)-K.width*re/2,ie=c/(2*m)-K.height*ue/2,Y=u/(2*m)-K.width/2,V=c/(2*m)-K.height/2,q=O.useMemo(function(){return{x:Math.round(oe),y:Math.round(ie),abstractX:Math.round(Y),abstractY:Math.round(V),width:K.width,height:K.height,scaledBy:m}},[m,oe,ie,Y,V,K]),pe=O.useCallback(function(){R.current?R.current.cache():setTimeout(pe,0)},[]),Q=He(q.width,q.height,x),U=D?1:Ln(q.width,q.height,Q.width,Q.height);if(O.useEffect(function(){return g&&pe(),function(){var je;(je=R.current)===null||je===void 0||je.clearCache()}},[g]),O.useEffect(function(){q&&d({type:Ql,payload:{shownImageDimensions:q,designLayer:o.current,previewGroup:W.current}})},[q]),!oe||!ie||!q)return null;var B=rg(N.x,N.y,x),ye=oe+(!D&&N.width?(M?-1:1)*(q.width/2-N.x-N.width/2+B.x)*re:0),ae=ie+(!D&&N.height?(F?-1:1)*(q.height/2-N.y-N.height/2+B.y)*ue:0),Ce=D?Y:ye,wt=D?V:ae,Be=(M?-1:1)*(D?1:re)*U,Et=(F?-1:1)*(D?1:ue)*U;return a.createElement(Yn,{id:ru,ref:o,xPadding:Ce,yPadding:wt,offsetX:K.width/2,offsetY:K.height/2,x:K.width*re/2+Ce,y:K.height*ue/2+wt,scaleX:Be,scaleY:Et,rotation:D?0:x,clipFunc:function(qe){var it,ro=D&&!((it=o.current)!==null&&it!==void 0&&(it=it.attrs)!==null&&it!==void 0&&it.isSaving),St=ro||N.noEffect?Nn(Nn({},q),{},{x:0,y:0}):{width:N.width||q.width,height:N.height||q.height,x:N.x||0,y:N.y||0};au(qe,Nn({ratio:N.ratio},St),ro),o.current&&o.current.setAttrs({clipX:St.x,clipY:St.y,clipWidth:St.width,clipHeight:St.height})}},a.createElement(cn,ve({id:Qa,image:g,width:K.width,height:K.height,offsetX:K.width/2,offsetY:K.height/2,x:K.width/2,y:K.height/2,listening:!1,filters:$,ref:R},S)),a.createElement(gg,null),a.createElement(vg,{ref:W}))},wg=function(e,t){return ee(e)===ee(t)};function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Eg(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Oa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Sg=function(e,t){var n=t.width-(2*e.radiusX||e.width),r=t.height-(2*e.radiusY||e.height);return{x:ee(Math.min(Math.max(e.x,0),n)),y:ee(Math.min(Math.max(e.y,0),r))}},Ig=function(e,t,n){var r=e.split("-"),o=z(r,2),i=o[0],l=o[1],s={x:0,y:0};return i==="center"?s.y=t.height/2-n.height/2:i==="bottom"&&(s.y=t.height-n.height),l==="center"?s.x=t.width/2-n.width/2:l==="right"&&(s.x=t.width-n.width),s},_n=function(e,t,n,r){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{},i={x:ee(n.abstractX*n.scaledBy),y:ee(n.abstractY*n.scaledBy),width:ee(n.width*n.scaledBy),height:ee(n.height*n.scaledBy)},l=Eg({},t);if(t.x<i.x&&(l.x=i.x,l.width=e.x-i.x+e.width),t.y<i.y&&(l.y=i.y,l.height=e.y-i.y+e.height),l.x+l.width>i.x+i.width&&(l.width=i.x+i.width-l.x),l.y+l.height>i.y+i.height&&(l.height=i.y+i.height-l.y),typeof r=="number"&&!wg(l.width/l.height,r)){var s=l.height*r,u=l.width/r;ee(l.y+u)<=i.y+i.height?l.height=u:l.width=s}if((o.minWidth&&l.width<=o.minWidth||o.maxWidth&&l.width>=o.maxWidth)&&(l.width=me(l.width,o.minWidth,o.maxWidth),l.x=e.x,l.y=e.y,typeof r=="number"&&(l.height=l.width/r)),(o.minHeight&&t.height<=o.minHeight||o.maxHeight&&t.height>=o.maxHeight)&&(l.height=me(l.height,o.minHeight,o.maxHeight),l.x=e.x,l.y=e.y,typeof r=="number"&&(l.width=l.height*r)),typeof o.lockCropAreaAt=="string"){var c=Ig(o.lockCropAreaAt,i,l),d=c.x,p=c.y;l.x=d,l.y=p}return l};function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ba(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ba(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var wa=!1,Ut={width:200,height:100},Pg=function(){var e=X(),t=e.dispatch,n=e.theme,r=e.designLayer,o=e.originalImage,i=e.shownImageDimensions,l=e.adjustments,s=l===void 0?{}:l,u=s.crop,c=u===void 0?{}:u,d=s.isFlippedX,p=s.isFlippedY,m=e.resize,h=m===void 0?{}:m,g=e.config,v=e.t,y=O.useRef(),E=O.useRef(),S=O.useRef(),k=O.useRef(),j=g[b.CROP],w=O.useMemo(function(){var Y;return Ie(Ie({},j),{},{lockCropAreaAt:(Y=c.lockCropAreaAt)!==null&&Y!==void 0?Y:j==null?void 0:j.lockCropAreaAt})},[c.lockCropAreaAt,j]),P=w.lockCropAreaAt,C=c.ratio||w.ratio,x=C===tl,T=C===rt,N=function(){return C===Nt?o.width/o.height:C},M=function(Y,V){var q=Y.width,pe=Y.height,Q=Y.x,U=Y.y,B={x:d?i.width-Q-q:Q,y:p?i.height-U-pe:U,width:q,height:pe},ye=c.width>=h.width&&c.height>=h.height;h.width&&h.height&&(q<h.width||pe<h.height)&&ye&&t({type:Ke,payload:{feedback:{message:v("cropSizeLowerThanResizedWarning"),status:vt.WARNING}}}),t({type:Vr,payload:Ie(Ie(Ie({},c),B),{},{dismissHistory:V})})},F=function(Y,V){var q,pe;E.current&&y.current&&E.current.nodes([y.current]);var Q=k.current,U={width:Y,height:V,x:(q=c.x)!==null&&q!==void 0?q:0,y:(pe=c.y)!==null&&pe!==void 0?pe:0};M(_n(U,U,Ie(Ie({},Q),{},{abstractX:0,abstractY:0}),!(x||T)&&N(),w),!0)};if(O.useEffect(function(){return r&&E.current&&y.current&&(S.current&&S.current.cache(),E.current.nodes([y.current])),function(){S.current&&S.current.clearCache()}},[r,o,i]),O.useEffect(function(){if(k.current){var Y,V,q=k.current;F((Y=c.width)!==null&&Y!==void 0?Y:q.width,(V=c.height)!==null&&V!==void 0?V:q.height)}},[C]),O.useEffect(function(){E.current&&y.current&&k.current&&c.width&&c.height&&F(c.width,c.height)},[w,i.width,i.height]),O.useEffect(function(){if(i&&(k.current=i,!wa&&C&&i.x&&i.width)){var Y,V;F((Y=c.width)!==null&&Y!==void 0?Y:i.width,(V=c.height)!==null&&V!==void 0?V:i.height),wa=!0}},[i]),!r)return null;var _,R=(P||c.noEffect)&&[]||(x||T?void 0:["top-left","bottom-left","top-right","bottom-right"]),W=function(Y){var V=1<arguments.length&&arguments[1]!==void 0&&arguments[1];Y.target&&M({width:Y.target.width()*Y.target.scaleX(),height:Y.target.height()*Y.target.scaleY(),x:Y.target.x(),y:Y.target.y()},V)};if(!c.width&&!c.height){var D=1>i.scaledBy?i.scaledBy:1,$=Ie(Ie({},i),{},{width:i.width/D,height:i.height/D});_=_n($,Ie(Ie({},$),{},{x:0,y:0}),Ie(Ie({},$),{},{abstractX:0,abstractY:0}),!(x||T)&&N(),w)}else _=c;var L=_,G=L.x,te=G===void 0?0:G,K=L.y,re=K===void 0?0:K,ue=L.width,oe=L.height,ie={x:d?i.width-te-ue:te,y:p?i.height-re-oe:re,ref:y,fill:"#FFFFFF",scaleX:1,scaleY:1,globalCompositeOperation:"destination-out",onDragEnd:P?void 0:W,onDragMove:P?void 0:function(V){var q=V.target;q.setAttrs(Sg(q.attrs,k.current))},onTransformEnd:P?void 0:W,draggable:!P};return a.createElement(a.Fragment,null,a.createElement(cn,{image:o,x:d?i.width:0,y:p?i.height:0,width:i.width,height:i.height,filters:[se.Filters.Blur,se.Filters.Brighten],blurRadius:10,brightness:-.3,scaleX:d?-1:1,scaleY:p?-1:1,ref:S}),T?a.createElement(Da,ve({},ie,{radiusX:ue/2,radiusY:oe/2,offset:{x:-ue/2,y:-oe/2}})):a.createElement(Fa,ve({},ie,{width:c.noEffect?0:ue,height:c.noEffect?0:oe})),c.noEffect&&a.createElement(Qr,{name:"Text",id:"no-preview-text-node",text:v("cropItemNoEffect"),x:i.width/2-Ut.width/2,y:i.height/2-Ut.height/2,fontSize:20,fill:"#ffffff",stroke:"#ff0000",strokeWidth:.2,shadowColor:"#ff0000",shadowBlur:10,annotationEvents:{},align:"center",width:Ut.width,height:Ut.height}),a.createElement(La,{centeredScaling:!1,flipEnabled:!1,rotateEnabled:!1,nodes:y.current?[y.current]:[],anchorSize:14,anchorCornerRadius:7,enabledAnchors:R,ignoreStroke:!1,anchorStroke:n.palette["accent-primary"],anchorFill:n.palette["access-primary"],anchorStrokeWidth:2,borderStroke:n.palette["accent-primary"],borderStrokeWidth:2,borderDash:[4],keepRatio:!x||!T,ref:E,boundBoxFunc:function(V,q){return _n(V,q,k.current,!(x||T)&&N(),w)}}))},Cg=function(){var e,t=X(),n=t.selectionsIds,r=n===void 0?[]:n,o=t.theme,i=t.designLayer,l=t.dispatch,s=t.config.useCloudimage,u=O.useMemo(function(){return i!=null&&i.findOne?r.map(function(p){return i.findOne("#".concat(p))}).filter(Boolean):[]},[r]),c=function(){u.length===1&&u[0].name()===b.TEXT&&l({type:Zr,payload:{textIdOfEditableContent:u[0].id()}})},d=s?["top-left","bottom-left","top-right","bottom-right"]:void 0;return a.createElement(La,{id:Ja,centeredScaling:!1,rotationSnaps:[0,45,90,135,180,225,270,315],nodes:u,rotateAnchorOffset:30,anchorSize:14,anchorCornerRadius:7,padding:u.length===1&&(e=u[0].attrs.padding)!==null&&e!==void 0?e:1,ignoreStroke:!1,anchorStroke:o.palette["accent-primary"],anchorFill:o.palette["access-primary"],anchorStrokeWidth:2,borderStroke:o.palette["accent-primary"],borderStrokeWidth:2,borderDash:[4],rotateEnabled:!s,onMouseOver:function(){l({type:_t,payload:{pointerCssIcon:Fe.MOVE}})},onMouseLeave:function(){l({type:_t,payload:{pointerCssIcon:Fe.DRAW}})},onDblClick:c,onDblTap:c,enabledAnchors:d,flipEnabled:!s,shouldOverdrawWholeArea:!0})},jg=function(){var e=X(),t=e.toolId,n=e.shownImageDimensions;return a.createElement(Yn,{id:Za,x:n.abstractX||0,y:n.abstractY||0},a.createElement(Cg,null),t===b.CROP&&a.createElement(Pg,null))},Tg=A.div.withConfig({componentId:"sc-1tst9ex-0"})(function(e){var t=e.theme,n=e.top,r=e.left;return`
  position: absolute;
  z-index: 1;
  background: `.concat(t.palette["bg-secondary"],`;
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0px 1px 2px `).concat(t.palette["light-shadow"],`;
  top: `).concat((n||0)+8,`px;
  left: `).concat((r||0)+4,`px;
  transform: translateX(-50%);
  height: 32px;
`)}),xg=function(){var e=X(),t=e.selectionsIds,n=t===void 0?[]:t,r=e.designLayer,o=e.annotations,i=e.dispatch,l=O.useState({left:0,top:0}),s=z(l,2),u=s[0],c=s[1],d=O.useMemo(function(){var h;return r==null||(h=r.getStage())===null||h===void 0?void 0:h.findOne("#".concat(Ja))},[r]),p=n.length,m=pn(function(){d&&c({left:(d.x()+d.width()/2)*d.scaleX(),top:(d.y()+d.height())*d.scaleY()})},0);return O.useEffect(function(){m()},[n,d,o]),p===0||!d?null:a.createElement(Tg,{className:"FIE_annotation-controls-overlay",left:u.left,top:u.top},n[0]!==Xe&&a.createElement(ze,{color:"basic",size:"sm",onClick:function(){i({type:es,payload:{annotationsIds:n}})}},a.createElement(kc,null)),a.createElement(ze,{color:"basic",size:"sm",onClick:function(){i({type:Jl,payload:{annotationsIds:n}})}},a.createElement(Ac,null)))};function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Sa(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ea(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ea(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}function kg(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ia(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var mt=null,kt=0,Ag=function(e,t){e.evt.preventDefault();var n=e.evt.touches[0],r=e.evt.touches[1];if(n&&r){var o=e.currentTarget;o.isDragging()&&o.stopDrag();var i={x:n.clientX,y:n.clientY},l={x:r.clientX,y:r.clientY};if(!mt)return void(mt=Ia(i,l));var s=Ia(i,l),u=kg(i,l);kt||(kt=u);var c={x:(s.x-o.x())/o.scaleX(),y:(s.y-o.y())/o.scaleX()},d=o.scaleX()*(u/kt),p=s.x-mt.x,m=s.y-mt.y,h={x:s.x-c.x*d+p,y:s.y-c.y*d+m};kt=u,mt=s,t(Sa(Sa({},h),{},{factor:d,preparedDimensions:!0}))}},Ng=function(e){kt=0,mt=null,typeof e=="function"&&e()},_g=A.div.withConfig({componentId:"sc-3ln9py-0"})(["width:100%;position:relative;height:calc(100% - 112px - 16px);overflow:hidden;min-height:250px;padding:16px;flex-grow:1;"]),Rg=A.img.withConfig({componentId:"sc-3ln9py-1"})(["max-width:98%;max-height:98%;box-shadow:0 0 0 5px rgba(0,0,0,0.1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;"]),Fg=A(Ra).withConfig({componentId:"sc-3ln9py-2"})(["outline:none;background:",";"],function(e){var t=e.theme;return t.palette["bg-hover"]});function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ca(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Pa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Dg=.006,Lg=function(e){var t=e.children;Ts(!0);var n=O.useRef(),r=X(),o=r.dispatch,i=r.pointerCssIcon,l=r.tabId,s=r.toolId,u=r.canvasWidth,c=r.canvasHeight,d=r.canvasScale,p=r.selectionsIds,m=p===void 0?[]:p,h=r.zoom,g=h===void 0?{}:h,v=r.config,y=v.previewPixelRatio,E=v.disableZooming;se.pixelRatio=y;var S=Le,k=!E&&s!==b.CROP,j=O.useState(l!==ne.ANNOTATE&&l!==ne.WATERMARK&&g.factor>S),w=z(j,2),P=w[0],C=w[1],x=O.useMemo(function(){return{cursor:i===Fe.DEFAULT&&l===ne.ANNOTATE?Fe.DRAW:i}},[l,i]),T=function(D){o({type:bt,payload:D})},N=O.useCallback(function(D){var $,L;D.evt.preventDefault(),($=(L=D.currentTarget).container)===null||$===void 0||$.call(L).focus(),D.target instanceof se.Stage&&0<m.length&&o({type:Ur})},[m]),M=function(){return C(l!==ne.ANNOTATE||l===ne.WATERMARK)},F=function(D){(D.code==="Space"||D.key==="Control")&&!D.repeat&&g.factor>S&&k&&(D.preventDefault(),C(!0),o({type:_t,payload:{pointerCssIcon:Fe.DRAG}}))},_=function(D){D.code==="Space"&&(D.preventDefault(),M())},R=function(){n.current&&n.current.container().focus()};O.useEffect(function(){o({type:_t,payload:{pointerCssIcon:Fe[P?"DRAG":"DEFAULT"]}})},[P]),O.useEffect(function(){C(l!==ne.ANNOTATE&&l!==ne.WATERMARK&&g.factor>S);var D;return n.current&&(D=n.current.container(),D.addEventListener("mouseenter",R),D.addEventListener("keydown",F),D.addEventListener("keyup",_)),function(){D&&(D.removeEventListener("mouseenter",R),D.removeEventListener("keydown",F),D.removeEventListener("keyup",_))}},[l,g.factor,S]);var W=d*(k&&g.factor||S);return a.createElement(Fg,{className:"FIE_canvas-node",tabIndex:-1,ref:n,width:u,height:c,scaleX:W,scaleY:W,x:k&&g.x||null,y:k&&g.y||null,zoomFactor:k&&g.factor||S,onWheel:k?function($){$.evt.preventDefault();var L=(g.factor||S)+$.evt.deltaY*-Dg,G=$.currentTarget.getPointerPosition();T(Ca(Ca({},G),{},{factor:L}))}:void 0,onTap:N,onClick:N,onTouchMove:k?function(D){return Ag(D,T)}:void 0,onDragStart:function($){var L;1<((L=$.evt.touches)===null||L===void 0?void 0:L.length)&&C(!1)},onTouchEnd:k?function(){Ng(M)}:void 0,dragBoundFunc:function($){var L=Math.min(0,Math.max($.x,u*(1-g.factor))),G=Math.min(0,Math.max($.y,c*(1-g.factor)));return{x:L,y:G}},draggable:k&&P,onDragEnd:function($){$.currentTarget.draggable()&&$.target.nodeType.toLowerCase()==="stage"&&k&&P&&T({factor:g.factor,x:$.target.x(),y:$.target.y(),preparedDimensions:!0})},style:x},t)};const Mg=O.memo(Lg);var Bg=function(){var e=Wr(),t=z(e,1),n=t[0],r=X(),o=O.useRef(null),i=O.useCallback(function(l){var s=l.width,u=l.height;r.dispatch({type:Vl,payload:{canvasWidth:s,canvasHeight:u}})},[]);return O.useEffect(function(){n(o.current,i)},[]),a.createElement(_g,{className:"FIE_canvas-container",ref:o},!r.textIdOfEditableContent&&a.createElement(xg,null),r.isShowOriginalImage&&a.createElement(Rg,{className:"FIE_original-image-compare",src:r.originalImage.src}),a.createElement(Mg,null,a.createElement(Qd,{overridingValue:r},a.createElement(bg,null),a.createElement(jg,null))))},$g=A.div.withConfig({componentId:"sc-etsyb6-0"})(["display:inline-block;height:",";width:",";border-radius:1px;background:",";"],function(e){return e.height},function(e){return e.width},function(e){var t=e.theme.palette;return t[Z.BordersSecondary]}),Jr=function(e){var t=e.height,n=e.width;return a.createElement($g,{height:t,width:n})};Jr.defaultProps={height:"24px",width:"1px"};var Wg=A.div.withConfig({componentId:"sc-21g986-0"})(["padding:16px;box-sizing:border-box;position:relative;width:100%;display:flex;flex-wrap:wrap;gap:16px;align-items:center;justify-content:space-between;border-bottom:1px solid ",";[data-phone='true'] &{padding:6px 6px 4px 6px;","}"],function(e){var t=e.theme.palette;return t[Z.BordersSecondary]},function(e){var t=e.isPhoneScreen;return t&&`
      padding: 12px 12px 0px;
      gap: 12px;
    `}),zg=A.div.withConfig({componentId:"sc-21g986-1"})(["display:flex;align-items:center;order:1;"]),Xg=A.div.withConfig({componentId:"sc-21g986-2"})(["display:flex;align-items:center;order:3;gap:4px;"]),eo=A(ze).withConfig({componentId:"sc-21g986-3"})(["margin:",";svg{color:",";}"],function(e){var t=e.margin;return t??"0 4px"},function(e){var t=e.theme.palette,n=e.disabled;return n?t[Z.IconsMuted]:t[Z.IconsPrimary]}),Hg=A.div.withConfig({componentId:"sc-21g986-4"})(["display:flex;align-items:center;gap:2px;"]),Gg=A(ce).withConfig({componentId:"sc-21g986-5"})(["flex-shrink:0;color:",";",";"],function(e){var t=e.theme.palette;return t[Z.TextPlaceholder]},function(e){var t=e.theme.typography;return t.font[Pe.LabelMedium]}),Kn=A(ze).withConfig({componentId:"sc-21g986-6"})(["padding:8px;svg{color:",";}"],function(e){var t=e.theme.palette,n=e.showBackButton;return n?t[Z.IconsPrimary]:t[Z.IconsMuted]}),Kg=A.div.withConfig({componentId:"sc-21g986-7"})(["width:",";height:32px;display:block;width:100%;order:4;",";@media (min-width:761px){display:flex;align-items:center;justify-content:center;width:fit-content;order:2;}"],function(e){var t=e.showBackButton;return t?"318px":"384px"},function(e){var t=e.reverseDirection;return t?"flex-direction: row-reverse":""}),Yg=A(ce).withConfig({componentId:"sc-21g986-8"})(["cursor:pointer;color:",";",";"],function(e){var t=e.theme.palette;return t[Z.TextPrimary]},function(e){var t=e.theme.typography;return t.font[Pe.InputMd]}),Ug=A.span.withConfig({componentId:"sc-21g986-9"})(["",";"],function(e){var t=e.theme.typography;return t.font[Pe.ButtonMdEmphasis]}),qg=A(Nc).withConfig({componentId:"sc-21g986-10"})(["padding:8px;z-index:111;"]);A(De).withConfig({componentId:"sc-21g986-11"})(["padding:4px 12px;"]);var Vg=A(Ya).withConfig({componentId:"sc-21g986-12"})([""]),Zg=A(_c).withConfig({componentId:"sc-21g986-13"})(["margin-top:16px;"]),Qg=A.div.withConfig({componentId:"sc-21g986-14"})(["width:100%;margin-top:16px;"]),Jg=A.div.withConfig({componentId:"sc-21g986-15"})(["margin-top:16px;width:100%;"]),eh=A(ce).withConfig({componentId:"sc-21g986-16"})(["margin-bottom:4px;"]),th=A.div.withConfig({componentId:"sc-21g986-17"})(["display:flex;gap:6px;"]),nh=A.div.withConfig({componentId:"sc-21g986-18"})(["display:flex;gap:12px;justify-content:",";"],function(e){var t=e.isPhoneScreen;return t?"space-between":"center"}),rh=A(ze).withConfig({componentId:"sc-21g986-19"})(["@media (min-width:761px){display:none;}"]),oh=A.div.withConfig({componentId:"sc-21g986-20"})(["display:flex;gap:12px;align-items:center;"]),ih=A(Wa).withConfig({componentId:"sc-kpjpf5-0"})(["width:",";max-width:unset;"],function(e){var t=e.width;return t||"300px"}),ah=A(Xa).withConfig({componentId:"sc-kpjpf5-1"})(function(e){var t=e.theme,n=e.isWarning;return Ge(["padding-bottom:0;.SfxModalTitle-Icon{background-color:",";}.SfxModalTitle-LabelPrimary{margin-bottom:24px;",";}.SfxModalTitle-LabelSecondary{",";text-align:center;}"],n&&t.palette[Z.Orange_0_1_Overlay],t.typography.font[Pe.TitleH3],t.typography.font[Pe.TextLarge])}),lh=A(za).withConfig({componentId:"sc-kpjpf5-2"})(["gap:12px;padding:24px;.SfxButton-root{flex:1;margin:0;height:40px;}"]),to=function(e){var t=e.title,n=e.hint,r=e.Icon,o=e.onDone,i=e.onCancel,l=e.doneLabel,s=e.cancelLabel,u=e.isOpened,c=e.doneButtonStyle,d=e.doneButtonColor,p=d===void 0?"basic":d,m=e.cancelButtonColor,h=m===void 0?"basic":m,g=e.children,v=e.areButtonsDisabled,y=e.zIndex,E=e.className,S=e.width,k=e.isWarning;return a.createElement(ih,{className:E,open:u,onClose:i,style:{zIndex:y},onKeyUp:function(w){w.key==="Enter"&&o(w)},width:S},a.createElement(ah,{icon:a.createElement(r,{size:25}),iconShadow:!0,isWarning:k,onClose:i,primary:t,secondary:n,variant:"with-icon"}),g&&a.createElement(Ha,null,g),a.createElement(lh,{align:"center"},a.createElement(De,{color:h,onClick:i,size:"md",disabled:v},s),a.createElement(De,{color:p,onClick:o,size:"md",warning:k,style:c,disabled:v},l)))};to.defaultProps={hint:"",isOpened:!1,doneLabel:"Yes",cancelLabel:"No",doneButtonStyle:void 0,doneButtonColor:"basic",cancelButtonColor:"basic",children:void 0,areButtonsDisabled:!1,zIndex:void 0,className:void 0,width:"",isWarning:!1};var vn=function(e){var t=e.children,n=e.isReset,r=X(),o=r.t,i=r.theme,l=r.config,s=r.dispatch,u=r.isResetted,c=r.haveNotSavedChanges,d=r.config.onClose,p=O.useState(!1),m=z(p,2),h=m[0],g=m[1];if(typeof d!="function"&&!n)return a.createElement("span",null);var v=function(){g(!1)},y=O.useCallback(function(){s({type:Lr,payload:{config:l}}),v()},[l]),E=function(){n||(d(nl.CLOSE_BUTTON,c),y())};return a.createElement(a.Fragment,null,a.cloneElement(t,{onClick:u===void 0||u?E:function(){g(!0)}}),h&&a.createElement(to,{title:o(n?"warning":"discardChanges"),hint:o(n?"changesLoseWarningHint":"discardChangesWarningHint"),isOpened:h,onCancel:v,onDone:n?y:E,Icon:function(){return a.createElement(Rc,{color:i.palette.warning,size:25})},doneLabel:o("confirm"),doneButtonColor:"warning-primary",cancelLabel:o("cancel"),width:"400px",isWarning:!0}))};vn.defaultProps={isReset:!1};var sh=function(){var e=X(),t=e.config.onClose;return typeof t=="function"?a.createElement(a.Fragment,null,a.createElement(Jr,null),a.createElement(vn,null,a.createElement(qg,{className:"FIE_topbar-close-button",color:"basic",size:"md"},a.createElement(Fc,null)))):null},ch=function(e){return 0>=e||1<e?el:e};function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Oe(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ja(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ja(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var uh={marginBottom:16},dh={minWidth:67,width:"fit-content"},ph={marginLeft:12},Rn=!0,Ta=function(){var e=X(),t=O.useRef(),n=e.theme,r=e.dispatch,o=e.originalImage,i=e.resize,l=e.isLoadingGlobally,s=e.haveNotSavedChanges,u=e.feedback,c=e.hasUndo,d=e.t,p=e.adjustments,m=p===void 0?{}:p,h=m.crop,g=e.config,v=g.onClose,y=g.closeAfterSave,E=g.onBeforeSave,S=g.onSave,k=g.forceToPngInEllipticalCrop,j=g.defaultSavedImageName,w=g.defaultSavedImageType,P=g.defaultSavedImageQuality,C=P===void 0?el:P,x=g.useCloudimage,T=g.moreSaveOptions,N=g.disableSaveIfNoChanges,M=g.removeSaveButton,F=O.useState(!1),_=z(F,2),R=_[0],W=_[1],D=O.useState({quality:ch(C)}),$=z(D,2),L=$[0],G=$[1],te=gl(),K=["jpeg","jpg","webp"].includes(L.extension),re=u.duration===0,ue=function(){var U=te(L,!1,!0),B=t.current||S,ye=B(U.imageData,U.designState),ae=function(){r({type:un})};ye instanceof Promise?ye.finally(ae):ae(),t.current=null,y&&v&&v(nl.AFTER_SAVE,s)},oe=function(){r({type:Mr}),W(!1),setTimeout(ue,3)},ie=function(){var U=t.current||S;if(typeof U!="function")throw new Error("Please provide onSave function handler.");return L.name&&L.extension?void oe():void r({type:Ke,payload:{feedback:{message:d("nameIsRequired")}}})},Y=function(){if(!N||c){if(x){var U=te(L),B=t.current||S;return void B(U.imageData,U.designState)}return t.current||typeof E!="function"||E(L)!==!1?void W(!0):void ie()}},V=function(U,B){if(typeof U=="function")t.current=U,B();else throw new Error("onSave function callback is required as an argument to the passed function.")},q=function(){var U=ml(j||o.name,k&&h.ratio===rt?"png":ht.includes(w==null?void 0:w.toLowerCase())&&w),B=U.name,ye=U.extension;G(Oe(Oe({},L),{},{name:B,extension:ye}))};if(O.useEffect(function(){o&&q()},[o]),O.useEffect(function(){!o||L.name&&L.extension||q()},[R]),O.useEffect(function(){G(Oe(Oe({},L),{},{size:{width:i.width,height:i.height}}))},[i]),O.useEffect(function(){return Rn=!0,function(){Rn=!1}},[]),M)return null;var pe=Array.isArray(T)&&0<T.length?T.map(function(Q,U){return Oe(Oe({},Q),{},{key:"".concat(Q.label||U,"-option-key"),onClick:typeof Q.onClick=="function"?function(){return Q.onClick(function(B){return V(B,Y)},function(B){return V(B,oe)})}:void 0})}):[];return a.createElement(a.Fragment,null,a.createElement(gn,{className:"FIE_topbar-save",color:"primary",onClick:Y,menuPosition:"bottom",menuFromBtn:!0,label:0<pe.length?d("saveAs"):d("save"),menuItems:pe,menuStyle:ph,wrapperStyle:dh,disabled:l||N&&!c||re,noMargin:!0}),R&&a.createElement(to,{className:"FIE_save-modal",title:d("saveAsModalTitle"),Icon:function(U){return a.createElement(Dc,ve({color:n.palette["accent-primary"]},U))},isOpened:R,onCancel:function(){Rn&&R&&(t.current=null,W(!1))},onDone:ie,doneLabel:d("save"),cancelLabel:d("cancel"),doneButtonColor:"primary",areButtonsDisabled:l,zIndex:11110},a.createElement(Vg,{className:"FIE_save-file-name-input",value:L.name,onChange:function(U){var B=U.target.value;G(Oe(Oe({},L),{},{name:B}))},size:"sm",label:d("name"),placeholder:d("imageName"),error:!L.name,fullWidth:!0,focusOnMount:!0}),a.createElement(Zg,{className:"FIE_save-extension-selector",onChange:function(U){return G(Oe(Oe({},L),{},{extension:U}))},value:L.extension,label:d("format"),placeholder:d("extension"),size:"sm",fullWidth:!0},ht.map(function(Q){return a.createElement(Rt,{key:Q,value:Q},Q)})),K&&a.createElement(Qg,{className:"FIE_save-quality-wrapper"},a.createElement(ce,null,d("quality")),a.createElement(ge,{annotation:"%",min:1,max:100,onChange:function(U){G(Oe(Oe({},L),{},{quality:me(U/100,.01,1)}))},value:parseInt(100*L.quality,10),width:"100%",style:uh})),a.createElement(Jg,{className:"FIE_save-resize-wrapper"},a.createElement(eh,null,d("resize")),a.createElement(Kr,{onChange:function(U){G(Oe(Oe({},L),{},{size:Oe(Oe({},L.size),U)}))},currentSize:(L==null?void 0:L.size)||{},hideResetButton:!0,alignLeft:!0,disableWrap:!0,alignment:"space-between"}))))},us=function(e){var t=e.margin,n=X(),r=n.isResetted,o=n.feedback,i=n.t,l=o.duration===0;return a.createElement(vn,{isReset:!0},a.createElement(eo,{className:"FIE_topbar-reset-button",color:"basic",size:"sm",disabled:r===void 0||r||l,title:i("resetOperations"),margin:t},a.createElement(Ua,null)))};us.defaultProps={margin:void 0};var ds=function(e){var t=e.margin,n=X(),r=n.dispatch,o=n.hasUndo,i=o!==void 0&&o,l=n.t,s=n.feedback,u=s.duration===0,c=O.useCallback(function(){r({type:Yr})},[]);return a.createElement(eo,{className:"FIE_topbar-undo-button",color:"basic",size:"sm",onClick:i?c:void 0,disabled:!i||u,title:l("undoTitle"),margin:t},a.createElement(Lc,null))};ds.defaultProps={margin:void 0};var ps=function(e){var t=e.margin,n=X(),r=n.dispatch,o=n.hasRedo,i=o!==void 0&&o,l=n.t,s=O.useCallback(function(){r({type:Dr})},[]);return a.createElement(eo,{className:"FIE_topbar-redo-button",color:"basic",size:"sm",onClick:i?s:void 0,disabled:!i,title:l("redoTitle"),margin:t},a.createElement(Mc,null))};ps.defaultProps={margin:void 0};var fh=[{labelKey:"fitSize",factor:"fit"},{labelKey:"actualSize",factor:1},{label:"25%",factor:.25},{label:"50%",factor:.5},{label:"75%",factor:.75},{label:"125%",factor:1.25},{label:"170%",factor:1.7},{label:"300%",factor:3},{label:"500%",factor:5},{label:"1000%",factor:10}],xa=1.1,fs=function(e){var t=e.showBackButton,n=X(),r=n.dispatch,o=n.zoom,i=o===void 0?{}:o,l=n.toolId,s=n.feedback,u=n.t,c=n.shownImageDimensions,d=n.resize,p=n.originalImage,m=n.adjustments.crop,h=n.config.useZoomPresetsMenu,g=s.duration===0,v=O.useState(null),y=z(v,2),E=y[0],S=y[1],k=function(T,N){r({type:bt,payload:{factor:T,isAbsoluteZoom:N}})},j=function(){var T=d.width&&d.height&&d||m.width&&m.height&&m||c,N=on(m.width&&m.height&&m||c,T);k(N||Le,!0)},w=function(T){S(E?null:T.target)},P=function(T){if(T==="fit")return j(),void w();var N=d.width||d.height?T:Math.min(T*p.width/c.width,T*p.height/c.height);k(N,!0),w()},C=l===b.CROP||g,x=!p||d.width||d.height?i.factor:Math.min(c.width*i.factor/p.width,c.height*i.factor/p.height);return a.createElement(Hg,null,a.createElement(Kn,{onClick:function(){k(i.factor/xa)},color:"basic",title:u("zoomOutTitle"),disabled:C,showBackButton:t,className:"FIE_topbar-zoom-out-btn"},a.createElement(Bc,null)),a.createElement(Yg,{title:u("toggleZoomMenuTitle"),onClick:C?void 0:h&&w||j,"aria-disabled":C,className:"FIE_topbar-zoom-label"},"".concat(ee(100*x,0),"%")),a.createElement(Kn,{onClick:function(){k(i.factor*xa)},color:"basic",title:u("zoomInTitle"),disabled:C,showBackButton:t,className:"FIE_topbar-zoom-in-btn"},a.createElement($c,null)),a.createElement(Ft,{anchorEl:E,onClose:w,open:!!E,position:"bottom",className:"FIE_topbar-zoom-menu"},fh.map(function(T){var N=T.factor,M=T.labelKey,F=T.label;return a.createElement(Rt,{key:F||M,onClick:function(){return P(N)}},a.createElement(Ka,null,F??u(M)))})))};fs.defaultProps={showBackButton:!1};var ms=function(e){var t=e.showBackButton,n=e.isPhoneScreen,r=X(),o=r.dispatch,i=r.isResetted,l=i===void 0||i,s=r.originalImage,u=r.resize,c=u===void 0?{}:u,d=r.adjustments,p=d.crop,m=d.rotation,h=m===void 0?0:m,g=r.shownImageDimensions,v=r.config.disableZooming,y=r.t,E=function(){o({type:Hn,payload:{isShow:!1}}),document.removeEventListener("mouseup",E),document.removeEventListener("mouseleave",E),document.removeEventListener("touchcancel",E),document.removeEventListener("touchend",E)},S=function(){o({type:Hn,payload:{isShow:!0}}),document.addEventListener("mouseup",E),document.addEventListener("mouseleave",E),document.addEventListener("touchcancel",E),document.addEventListener("touchend",E)};if(!s)return null;var k=Gl(c,p,g,s,h);return a.createElement(nh,{isPhoneScreen:n},a.createElement(Gg,{title:y("imageDimensionsHoverTitle")},"".concat(k.width," x ").concat(k.height," px")),a.createElement(oh,null,a.createElement(Kn,{color:"basic",onMouseDown:l?void 0:S,onTouchStart:l?void 0:S,disabled:l,showBackButton:t,title:y("showImageTitle")},a.createElement(Wc,null)),!v&&a.createElement(a.Fragment,null,a.createElement(Jr,null),a.createElement(fs,{showBackButton:t}))))};ms.defaultProps={showBackButton:!1,isPhoneScreen:!1};var mh=function(){var e=X(),t=e.t,n=Te();return a.createElement(vn,null,a.createElement(De,{className:"FIE_topbar-back-button",color:"link-secondary",size:"sm",startIcon:a.createElement($a,null)},!n&&a.createElement(Ug,null,t("back"))))},gs=function(e){var t=e.toggleMainMenu,n=X(),r=n.config.showBackButton,o=Te(320);return a.createElement(Wg,{className:"FIE_topbar",isPhoneScreen:o},a.createElement(zg,{className:"FIE_topbar-buttons-wrapper"},a.createElement(rh,{className:"FIE_tabs_toggle_btn",size:o?"sm":"lg",color:"basic",onClick:function(){return t(!0)}},function(i){return a.createElement(qa,i)}),r?a.createElement(mh,null):a.createElement(Ta,null)),a.createElement(Kg,{className:"FIE_topbar-center-options",showBackButton:r},a.createElement(ms,{showBackButton:r,isPhoneScreen:o})),a.createElement(Xg,null,a.createElement(th,{className:"FIE_topbar-history-buttons"},a.createElement(us,{margin:"0",showBackButton:r}),a.createElement(ds,{margin:"0",showBackButton:r}),a.createElement(ps,{margin:"0",showBackButton:r})),r?a.createElement(Ta,null):a.createElement(sh,null)))};gs.defaultProps={toggleMainMenu:function(){}};var gh=A.div.withConfig({componentId:"sc-qhd6ow-0"})(function(e){var t=e.theme;return`
    width: 72px;
    min-height: 66px;
    padding: 4px 2px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    background: `.concat(t.palette[Z.BackgroundStateless],`;
    align-items: center;
    justify-content: center;

    [data-phone='true'] & {
      margin-bottom: 0;
      height: 50px;
      border-radius: 0;
    }

    svg {
      color: `).concat(t.palette[Z.IconsPrimary],`;
    }

    &,
    * {
      cursor: pointer;
    }

    &:hover {
      background: `).concat(t.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(t.palette["bg-primary-active"],`;

      * {
        color: `).concat(t.palette["accent-primary-active"],`;
      }
    }
  `)}),hh=A(ce).withConfig({componentId:"sc-qhd6ow-1"})(function(e){var t=e.theme;return`
  color: `.concat(t.palette[Z.TextPrimary],`;
  `).concat(t.typography.font[Pe.LabelSmall],`;
  font-size: 12px;
  line-height: 14px;

  span {
    white-space: normal;
  }

  [data-phone='true'] & {
    font-size: 10px;
  }
`)}),hs=function(e){var t=e.id,n=e.label,r=e.Icon,o=e.isSelected,i=e.onClick,l=O.useCallback(function(){typeof i=="function"&&i(t)},[t]);return a.createElement(gh,{className:"FIE_tab","aria-selected":o,onClick:l},a.createElement(r,{size:24}),n&&a.createElement(hh,{className:"FIE_tab-label"},n))};hs.defaultProps={isSelected:!1,onClick:void 0,label:void 0};const vh=O.memo(hs);var Fn=[{id:ne.ADJUST,labelKey:"adjustTab",icon:zc},{id:ne.FINETUNE,labelKey:"finetuneTab",icon:Xc},{id:ne.FILTERS,labelKey:"filtersTab",icon:Hc,hideFn:function(t){var n=t.useCloudimage;return n}},{id:ne.WATERMARK,labelKey:"watermarkTab",icon:Gc},{id:ne.ANNOTATE,labelKey:"annotateTabLabel",icon:Kc,hideFn:function(t){var n=t.useCloudimage;return n}},{id:ne.RESIZE,labelKey:"resizeTab",icon:Yc}],no=function(e){var t=e.toggleMainMenu,n=e.isDrawer,r=X(),o=r.t,i=r.tabId,l=i===void 0?null:i,s=r.dispatch,u=r.config,c=u.defaultTabId,d=u.tabsIds,p=u.useCloudimage,m=O.useCallback(function(v){s({type:Yl,payload:{tabId:v}}),t(!1)},[]),h=O.useMemo(function(){var v=[];return 0<Object.keys(d).length?Fn.forEach(function(y){var E=d.indexOf(y.id);E!==-1&&(v[E]=y)}):v=Fn,(0<v.length?v:Fn).filter(function(y){var E=y.hideFn;return!E||!E({useCloudimage:p})})},[d]);if(h.length===1)return null;var g=function(v){var y=v.id,E=v.labelKey,S=v.icon;return a.createElement(vh,{key:y,id:y,label:o(E),Icon:S,isSelected:(l||c)===y,onClick:m})};return a.createElement(a.Fragment,null,h.map(function(v){return n?a.createElement(Uc,{key:v.id},g(v)):g(v)}))};no.defaultProps={toggleMainMenu:function(){},isDrawer:!1};var vs=function(e){var t=e.children,n=e.isPhoneScreen;return a.createElement(_p,{className:"FIE_tool-options-wrapper",hasChildren:!!t,isPhoneScreen:n},t)};vs.defaultProps={children:void 0,isPhoneScreen:!1};var yh={maxWidth:"100%",width:"100%"},ys=function(e){var t,n=e.isPhoneScreen,r=X(),o=r.t,i=r.dispatch,l=r.tabId,s=r.toolId,u=r.annotations,c=r.selectionsIds,d=c===void 0?[]:c,p=r.config,m=p.defaultTabId,h=p.defaultToolId,g=p.useCloudimage,v=l||m,y=s||h||((t=Qt[v])===null||t===void 0?void 0:t[0]),E=O.useMemo(function(){return Qt[v]||[]},[v]),S=O.useCallback(function(w){i({type:sn,payload:{toolId:w}})},[]),k=O.useMemo(function(){return E.map(function(w){var P=Tt[w],C=P.Item,x=P.hideFn;return C&&(!x||!x({useCloudimage:g}))&&a.createElement(C,{key:w,selectTool:S,t:o,isSelected:y===w})})},[E,y]),j=O.useMemo(function(){var w,P,C;if(!y)return!1;if(v===ne.ANNOTATE){var x=d.length;if(x===1){var T,N=u[d[0]];return(T=Tt[N.name])===null||T===void 0?void 0:T.ItemOptions}if(1<x)return null}return v&&y&&Qt[v].includes(y)&&(!((w=Tt[s])!==null&&w!==void 0&&w.hideFn)||!((P=Tt[s])!==null&&P!==void 0&&P.hideFn({useCloudimage:g})))&&((C=Tt[s])===null||C===void 0?void 0:C.ItemOptions)},[v,y,u,d]);return O.useEffect(function(){!s&&y&&i({type:sn,payload:{toolId:y}})},[]),a.createElement(kp,{className:"FIE_tools-bar-wrapper"},a.createElement(vs,{isPhoneScreen:n},j&&a.createElement(j,{t:o})),k&&a.createElement(Ap,{className:"FIE_tools-bar",isPhoneScreen:n},v===ne.WATERMARK?k:a.createElement(fn,{className:"FIE_tools",style:yh},k)))};ys.defaultProps={isPhoneScreen:!1};var Oh={horizontal:"center",vertical:"bottom"},bh=f(f({},vt.ERROR,"error"),vt.WARNING,"warning"),Os=function(e){var t,n=e.anchorOrigin,r=X(),o=r.feedback,i=o===void 0?{}:o,l=r.dispatch;return i.message?a.createElement(qc,{className:"FIE_feedback-robot",anchorOrigin:n,autoHideDuration:(t=i.duration)!==null&&t!==void 0?t:5e3,message:i.message,open:!!i.message,status:bh[i.status||vt.ERROR],onClose:function(){l({type:Ke,payload:{feedback:{}}})}}):null};Os.defaultProps={anchorOrigin:Oh};var wh=nu(["to{transform:rotate(360deg);}"]),Eh=A.div.withConfig({componentId:"sc-m42fbk-0"})(["background:",";display:flex;align-items:center;justify-content:center;position:absolute;z-index:11111;top:0;bottom:0;right:0;left:0;flex-direction:column;user-select:none;"],function(e){var t=e.theme.palette;return t[Z.BackgroundStateless]}),Sh=A(Vc).withConfig({componentId:"sc-m42fbk-1"})(["animation:"," 1.2s infinite;"],wh),bs=function(e){var t=e.theme;return a.createElement(Eh,{className:"FIE_spinner-wrapper"},a.createElement(Sh,{size:50,color:t.palette[Z.AccentStateless]}))};bs.defaultProps={theme:{}};var Ih=["cropX2","cropY2","crop","watermark"];function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Re(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ka(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ka(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Ph=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},o=iu[t];switch(e){case"wat_text":return{watermark:{text:t.replaceAll("+"," ")}};case"wat_font":return{watermark:{fontFamily:t}};case"wat_color":return{watermark:{fill:"#".concat(t)}};case"wat_fontsize":return{watermark:{fontSize:parseFloat(t)}};case"wat_opacity":return{watermark:{opacity:parseFloat(t)}};case"wat_pos":{var i=t.split(","),l=z(i,2),s=l[0],u=l[1];return{watermark:{x:parseFloat(s)/100*n.width,y:parseFloat(u)/100*n.height}}}case"wat_url":return{watermark:{image:decodeURIComponent(t)}};case"wat_scale":{var c=t.split(","),d=z(c,2),p=d[0],m=d[1];return{watermark:{width:parseFloat(p)/100*(n.width||0),height:parseFloat(m)/100*(n.height||0)}}}case"tl_px":{var h=t.split(","),g=z(h,2),v=g[0],y=g[1];return{crop:{x:Ae(parseFloat(v),0,r.width,0,n.width),y:Ae(parseFloat(y),0,r.height,0,n.height)}}}case"br_px":{var E=t.split(","),S=z(E,2),k=S[0],j=S[1];return{cropX2:Ae(parseFloat(k),0,r.width,0,n.width),cropY2:Ae(parseFloat(j),0,r.height,0,n.height)}}case"round":return{crop:{ratio:rt}};case"gravity":return{crop:o?{lockCropAreaAt:o,width:null,height:null}:{noEffect:!0,ratio:t,ratioTitleKey:t,width:null,height:null}};case"aspect_ratio":return{crop:{ratio:+t}};case"w":return{resize:{width:parseFloat(t)}};case"h":return{resize:{height:parseFloat(t)}};case"r":return{adjustments:{rotation:-parseInt(t,10)}};case"flip":case"mirror":return{adjustments:{isFlippedX:t.includes("x")||t.includes("h"),isFlippedY:t.includes("y")||t.includes("v")}};default:{var w;if(Object.keys(Zt).forEach(function(T){Zt[T].cloudimage.name===e.toLowerCase()&&(w=T)}),!w)return null;var P=Zt[w],C=P.cloudimage,x=P.internal;return{finetunes:[se.Filters[w]],finetunesProps:f({},x.propName,Ae(parseFloat(t),C.min,C.max,x.min,x.max))}}}},Ch=function(e,t,n){if(!e)return null;var r=e.split("&"),o={};r.forEach(function(m){var h=m.split("="),g=z(h,2),v=g[0],y=g[1],E=Ph(v,y,t,n);E&&(o=hn(o,E,!0))});var i=o,l=i.cropX2,s=i.cropY2,u=i.crop,c=i.watermark,d=de(i,Ih),p=Re(Re(Re({},d),l&&s&&u||u!=null&&u.noEffect||u!=null&&u.lockCropAreaAt?{adjustments:Re(Re({},d.adjustments),{},{crop:Re({width:(l||0)-u.x,height:(s||0)-u.y},u)})}:{}),{},{annotations:Re({},c?f({},Xe,Re(Re({},c),{},{x:((u==null?void 0:u.x)||0)+(c.x||0),y:((u==null?void 0:u.y)||0)+(c.y||0),id:Xe,name:c.text?b.TEXT:b.IMAGE},c.text?{width:c.text.length*c.fontSize,height:c.fontSize}:{})):{})});return p},Dn=function(e,t){return e&&t&&(e instanceof HTMLImageElement&&e.src===t.src&&e.width===t.width&&e.height===t.height||((e==null?void 0:e.src)||e)===t.src)},jh=A.div.attrs(function(e){var t,n,r=e.$size,o=r===void 0?{}:r;return{style:{width:(t=o.width)!==null&&t!==void 0?t:"100%",height:(n=o.height)!==null&&n!==void 0?n:"100%"}}}).withConfig({componentId:"sc-ugtqr7-0"})(["display:flex;flex-direction:column;align-items:center;height:100%;max-height:100%;width:100%;max-width:100%;overflow:auto;border-radius:8px;position:relative;min-height:250px;background:",";",""],function(e){var t=e.theme;return t.palette["bg-secondary"]},function(e){var t=e.showTabsDrawer;return t&&`
      overflow: unset;
  `}),Th=A.div.withConfig({componentId:"sc-ugtqr7-1"})(["display:flex;align-items:flex-start;width:100%;box-sizing:border-box;height:calc(100% - 95px);flex-grow:1;[data-phone='true'] &{padding:0;}"]),xh=A.div.withConfig({componentId:"sc-ugtqr7-2"})(["height:100%;width:calc(100% - 80px);flex-grow:1;overflow-y:auto;display:flex;flex-direction:column;",""],function(e){var t=e.showTabsDrawer;return t&&`
     overflow-y: unset;
  `}),kh=A.div.withConfig({componentId:"sc-ugtqr7-3"})(["min-width:108px;height:100%;padding:16px;display:flex;flex-direction:column;gap:16px;overflow-y:auto;max-height:100%;box-shadow:6px 8px 12px 0px rgba(146,166,188,0.14);[data-phone='true'] &{display:flex;padding:0;}"]),Ah=A(Zc).withConfig({componentId:"sc-ugtqr7-4"})(["transition:transform 200ms ease-in-out;width:92px;height:100%;padding:12px;.SfxDrawer-list,.SfxDrawer-item{padding:0;}"]),ws=function(e){var t=e.toggleMainMenu,n=X(),r=n.t,o=n.showTabsMenu;return a.createElement(Ah,{className:"FIE_tabs-drawer",open:o,onClose:function(){return t(!1)},disablePortal:!0},a.createElement(Qc,null,a.createElement(De,{color:"link-basic-secondary",startIcon:a.createElement(qa,null),onClick:function(){return t(!1)}},r("tabsMenu"))),a.createElement(Jc,null,a.createElement(eu,null,a.createElement(no,{toggleMainMenu:t,isDrawer:!0}))))};ws.defaultProps={toggleMainMenu:function(){}};function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Na(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Aa(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Aa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))});return e}var Nh=function(){var e=X(),t=e.config,n=e.isLoadingGlobally,r=e.haveNotSavedChanges,o=e.dispatch,i=e.originalImage,l=e.shownImageDimensions,s=e.t,u=e.theme,c=e.feedback,d=c===void 0?{}:c,p=t.loadableDesignState,m=t.useCloudimage,h=t.cloudimage,g=t.source,v=t.avoidChangesNotSavedAlertOnLeave,y=t.useBackendTranslations,E=t.translations,S=t.language,k=t.defaultSavedImageName,j=t.observePluginContainerSize,w=t.showCanvasOnly,P=t.getCurrentImgDataFnRef,C=t.updateStateFnRef,x=t.noCrossOrigin,T=window.matchMedia("(max-width: 760px)").matches,N=Wr(),M=z(N,2),F=M[0],_=M[1],R=O.useState({width:void 0,height:void 0}),W=z(R,2),D=W[0],$=W[1],L=Te(),G=O.useRef(null),te=O.useRef(!0),K=O.useRef(!1),re=O.useRef(null),ue=O.useRef(r),oe=gl(),ie=O.useCallback(function(B){o({type:Zl,payload:{originalImage:B}})},[]),Y=O.useCallback(function(B){o({type:Ke,payload:{feedback:{message:B.message||B,duration:0}}})},[]),V=function(B){return new Promise(function(ye){var ae=(B==null?void 0:B.src)||B;if(re.current===ae||!ae&&i||Dn(ae,i))return void(re.current||ye());var Ce=function(){re.current=null,ye()};re.current=ae,setTimeout(function(){if(typeof B=="string")ls(B,k,x).then(ie).catch(Y).finally(Ce);else if(B instanceof HTMLImageElement){if(!B.name&&k&&(B.name=k),!B.complete)return void B.addEventListener("load",function(){ie(B),Ce()});ie(B),Ce()}else Y(s("invalidImageError")),Ce()},0)})},q=function(B){ue.current&&(B.preventDefault(),B.returnValue="")},pe=function(){var B=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){return[]};return o({type:Mr}),Promise.all(B()).finally(function(){o({type:un})})},Q=function(){p&&0<Object.keys(p).length&&o({type:Jt,payload:Na(Na({},p),{},{finetunes:ll(p==null?void 0:p.finetunes),filter:il(p==null?void 0:p.filter)})})};O.useEffect(function(){te.current||!g||Dn(g,i)||(K.current=!1,pe(function(){return[V(g)]}))},[g]),O.useEffect(function(){if(!te.current){var B=p==null?void 0:p.imgSrc;B&&!Dn(B,i)?pe(function(){return[V(B).then(Q)]}):Q()}},[p]),O.useEffect(function(){0<Object.keys(l||{}).length&&!Object.keys(l).some(function(B){return!l[B]})&&i&&m&&h!==null&&h!==void 0&&h.loadableQuery&&!K.current&&(o({type:Jt,payload:Ch(h.loadableQuery,l,i)}),K.current=!0)},[l,i,m,h]),O.useEffect(function(){var B=!1;return j&&G.current?F(G.current.parentNode,function(ye){var ae=ye.width,Ce=ye.height;return $({width:ae,height:Ce})}):D.width&&D.height&&!B&&$({width:void 0,height:void 0}),function(){j&&G.current&&_(G.current),B=!0}},[j]),O.useEffect(function(){return pe(function(){return[V((p==null?void 0:p.imgSrc)||g)].concat(be(y?[qd(S,E)]:[]))}),te.current=!1,window&&!v&&window.addEventListener("beforeunload",q),function(){window&&!v&&window.removeEventListener("beforeunload",q)}},[]),O.useEffect(function(){C&&tn(C)==="object"&&(C.current=function(B){o({type:Jt,payload:B})})},[C,o]),O.useEffect(function(){P&&tn(P)==="object"&&(P.current=oe)},[oe]),O.useEffect(function(){ue.current=r},[r]);var U=function(B){o({type:rs,payload:{opened:B}})};return a.createElement(jh,{className:nn,"data-phone":L,showTabsDrawer:T,ref:G,$size:D},n&&a.createElement(bs,{theme:u}),function(){return a.createElement(a.Fragment,null,!w&&a.createElement(a.Fragment,null,T&&a.createElement(ws,{toggleMainMenu:U}),a.createElement(gs,{toggleMainMenu:U})),i&&d.duration!==0&&a.createElement(Th,{className:"FIE_main-container"},!w&&!T&&a.createElement(kh,{className:"FIE_tabs"},a.createElement(no,{toggleMainMenu:U})),a.createElement(xh,{className:"FIE_editor-content",showTabsDrawer:T},a.createElement(Bg,null),!w&&a.createElement(ys,{isPhoneScreen:L}))))}(),a.createElement(Os,null))};const _h=O.memo(Nh);var Rh=Va([".","{font-family:",";}.SfxModal-Wrapper *{font-family:",";}"],nn,function(e){var t,n=e.theme,r=n===void 0?{}:n;return((t=r.typography)===null||t===void 0?void 0:t.fontFamily)||"Arial"},function(e){var t,n=e.theme,r=n===void 0?{}:n;return((t=r.typography)===null||t===void 0?void 0:t.fontFamily)||"Arial"}),Fh=Va([".Menu-open{overflow:visible !important;}.",",#SfxPopper{box-sizing:border-box;.SfxPopper-root .SfxMenu-root{overflow:visible;width:max-content;.SfxMenuItem-prefix{margin-right:6px;}}}."," *,#SfxPopper *{box-sizing:border-box;scrollbar-color:rgba(203,211,218,1) rgba(203,211,218,0.35);:not(button) > svg:not([color]){color:",'}:disabled,[aria-disabled="true"]{cursor:not-allowed;}&::-webkit-scrollbar{width:4px;height:4px;}&::-webkit-scrollbar-track{background:rgba(203,211,218,0.35);}&::-webkit-scrollbar-thumb{background:rgba(203,211,218,1);border-radius:10px;}}'],nn,nn,function(e){var t=e.theme;return t.palette["icons-primary"]}),Es=function(e){var t=e.img,n=e.source,r=e.useCloudimage,o=e.cloudimage;if(t)throw new Error("`img` is renamed to `source` please consider renaming it from your configurations.");if(!n||typeof n!="string"&&!(n instanceof HTMLImageElement))throw new Error("`source` property is required either a string of image url or a HTMLImageElement for the image that will be edited.");if(r){var i,l;if(o!=null&&(i=o.imageSealing)!==null&&i!==void 0&&i.enable&&!(o!=null&&(l=o.imageSealing)!==null&&l!==void 0&&l.salt))throw new Error("`salt` property of imageSealing object is required in cloudimage mode as long as `imageSealing` is enabled.")}var s=hn(ol,e);return a.createElement(a.StrictMode,null,a.createElement(tu,{theme:s.theme},a.createElement(Rh,null),a.createElement(Fh,null),a.createElement(ul,{config:s},a.createElement(_h,null))))};Es.defaultProps={useCloudimage:!1,cloudimage:{},img:void 0};const Xh=O.memo(Es);export{Xh as F,ne as T,b as a,hn as d};
